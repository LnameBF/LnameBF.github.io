[{"content":"在 .NET Core 5 中，接口扮演着非常重要的角色，它们定义了类或结构必须实现的方法、属性、事件等契约。这些核心接口使得 .NET Core 应用程序更加模块化，易于测试和维护。虽然没有明确的“5大核心接口”这样的分类，但是我可以提供一些在 .NET Core 中常用的重要接口：\nIApplicationBuilder - 用于构建应用程序的请求管道。 IServiceCollection - 用于定义和配置应用程序所需的服务。 IHostingEnvironment - 提供有关应用程序的宿主环境的信息。 ILogger - 用于在应用程序中实现日志记录。 IConfiguration - 用于读取应用程序的配置设置。\n","permalink":"https://www.heiok.top/posts/tutorial/net-core-5%E5%A4%A7%E6%A0%B8%E5%BF%83%E6%8E%A5%E5%8F%A3/","summary":"\u003cp\u003e在 .NET Core 5 中，接口扮演着非常重要的角色，它们定义了类或结构必须实现的方法、属性、事件等契约。这些核心接口使得 .NET Core 应用程序更加模块化，易于测试和维护。虽然没有明确的“5大核心接口”这样的分类，但是我可以提供一些在 .NET Core 中常用的重要接口：\u003c/p\u003e\n\u003cp\u003eIApplicationBuilder - 用于构建应用程序的请求管道。\nIServiceCollection - 用于定义和配置应用程序所需的服务。\nIHostingEnvironment - 提供有关应用程序的宿主环境的信息。\nILogger - 用于在应用程序中实现日志记录。\nIConfiguration - 用于读取应用程序的配置设置。\u003c/p\u003e","title":".NET core 5大核心接口"},{"content":"依赖注入 缓存（客户端缓存和服务器端缓存） 存储Iqueryable或者 IEnumerable等类型延迟加载的对象到缓存中，可能会出现一些问题\n分布式缓存 配置文件读取 加载顺序\nEfcore使用（数据库使用的Mysql） 创建实体类模块 安装依赖包（Microsoft.EntityFrameworkCore.Relational） Microsoft.EntityFrameworkCore.Relational 是 Entity Framework Core (EF Core) 的一部分，它提供了一些与关系型数据库（如 SQL Server、PostgreSQL、MySQL 等）交互的基础设施和功能。\n创建一个Dbcontext提供给迁移数据库使用（在多项目中） 目录结构 public class MyDbcContextDesignFac : IDesignTimeDbContextFactory\u0026lt;MyDbContext\u0026gt; { /// \u0026lt;summary\u0026gt; /// 开发环境中，给创建数据库提供一个Dbcontext，帮助执行 init，update等命令 /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;args\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; /// \u0026lt;exception cref=\u0026#34;NotImplementedException\u0026#34;\u0026gt;\u0026lt;/exception\u0026gt; public MyDbContext CreateDbContext(string[] args) { DbContextOptionsBuilder\u0026lt;MyDbContext\u0026gt; builder = new DbContextOptionsBuilder\u0026lt;MyDbContext\u0026gt;(); string connstr = \u0026#34;server=119.29.250.96;userid=root;pwd=Root!@qq123;port=3306;database=CSharp;sslmode=none;CharSet=utf8;\u0026#34;; builder.UseMySql(connstr, ServerVersion.AutoDetect(connstr)); MyDbContext myDbContext = new MyDbContext(builder.Options); return myDbContext; } } 执行更新命令 add-Migration init update-database // 注意，使用这两个命令需要安装Microsoft.EntityFrameworkCore.Tools和 Pomelo.EntityFrameworkCore.MySql 可以看到生成成功了 多租户模式（多个DbContext） 过滤器 所有的过滤器都可以使用这样的方式注入到容器中\nbuilder.Services.AddControllers(opt =\u0026gt; { // order代表执行顺序，order值越小，则越先执行 // 使用泛型注入 // o.Filters.Add\u0026lt;CtmAuthorizationFilterAttribute\u0026gt;(1); // o.Filters.Add\u0026lt;CtmResourceFilterAttribute\u0026gt;(2); // 使用typeof注入 // o.Filters.Add(typeof(CtmActionFilterAttribute)); opt.Filters.Add\u0026lt;GlobalExceptionFilter\u0026gt;(); opt.Filters.Add\u0026lt;MyActionFilter\u0026gt;(); opt.Filters.Add\u0026lt;MyActionFilter2\u0026gt;(); }); // 或者这样 // builder.Services.Configure\u0026lt;MvcOptions\u0026gt;(opt =\u0026gt; // { // opt.Filters.Add\u0026lt;GlobalExceptionFilter\u0026gt;(); // }); ExceptionFilter 例子:全局异常处理器\npublic class GlobalExceptionFilter : IAsyncExceptionFilter { private readonly ILogger\u0026lt;GlobalExceptionFilter\u0026gt; _logger; public GlobalExceptionFilter(ILogger\u0026lt;GlobalExceptionFilter\u0026gt; logger) { _logger = logger; } public Task OnExceptionAsync(ExceptionContext context) { //context.Exception代表异常信息对象 //如果给context.ExceptionHandled赋值为true，则其他ExceptionFilter不会再执行 //context.Resul的值会被输出给客户端 var exception = context.Exception; // 这里可以记录日志，发送通知等 // Console.WriteLine($\u0026#34;Exception: {exception.Message}\u0026#34;); _logger.LogError(context.Exception.Message); // 设置响应状态码和消息 context.Result = new ObjectResult(new { error = true, message = exception.Message }) { StatusCode = 500 }; // 标记异常已处理（标记已经处理后，后面的异常过滤器就不会对异常进行处理了，也不回执行后面的异常过滤器） context.ExceptionHandled = true; return Task.CompletedTask; } } 自定义异常处理中间件\n中间件执行顺序\nhttps://www.cnblogs.com/lucky_hu/p/12444832.html\nActionFilter 例，编写一个事物的过滤器\n// 也可编写特性，放在需要开启事物的方法下 public class TransactionAttribute :ActionFilterAttribute { public override async Task OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next) { using (TransactionScope tx = new TransactionScope(TransactionScopeAsyncFlowOption.Suppress)) { // var result = await next(); // 执行之后进行判断。如果没有出现异常，就提交事物，没有提交事物（执行Complete()），默认不提交，也就无法保存成功 if (result.Exception == null) { tx.Complete(); } } } } 中间件 ","permalink":"https://www.heiok.top/posts/tutorial/net-core-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","summary":"\u003ch3 id=\"依赖注入\"\u003e依赖注入\u003c/h3\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://file.heiok.top/note/202408142231236.png\" alt=\"*\"  /\u003e\n\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e缓存（客户端缓存和服务器端缓存）\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://file.heiok.top/note/202408142259968.png\" alt=\"image-20240814225929798\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://file.heiok.top/note/202408142337527.png\" alt=\"image-20240814233757373\"  /\u003e\n\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e存储Iqueryable或者 IEnumerable等类型延迟加载的对象到缓存中，可能会出现一些问题\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"分布式缓存\"\u003e分布式缓存\u003c/h3\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://file.heiok.top/note/202408152342134.png\" alt=\"image-20240815234211742\"  /\u003e\n\u003c/p\u003e\n\u003ch3 id=\"配置文件读取\"\u003e配置文件读取\u003c/h3\u003e\n\u003cp\u003e加载顺序\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://file.heiok.top/note/202408162308803.png\" alt=\"image-20240816230811595\"  /\u003e\n\u003c/p\u003e\n\u003ch3 id=\"efcore使用数据库使用的mysql\"\u003eEfcore使用（数据库使用的Mysql）\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e创建实体类模块\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://file.heiok.top/note/202408172301382.png\" alt=\"image-20240817230110287\"  /\u003e\n\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e安装依赖包（Microsoft.EntityFrameworkCore.Relational）\u003c/li\u003e\n\u003c/ol\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eMicrosoft.EntityFrameworkCore.Relational\u003c/code\u003e 是 Entity Framework Core (EF Core) 的一部分，它提供了一些与关系型数据库（如 SQL Server、PostgreSQL、MySQL 等）交互的基础设施和功能。\u003c/p\u003e","title":".NET Core 学习记录"},{"content":"单元测试 单元测试（Unit Testing）是针对程序弄块（软件设计的最小单位）来进行正确性检验的测试工作。单元测试通常由软件开发人员编写，用于确保他们了所写的代码匹配软件需求和遵循开发目标。\n单元测试的优点：\n适应变更。允许程序员在未来重构代码，并确保模块依然工作正确。 简化集成。采用自底向上的测试路径，消除程序单元的不可靠，使集成测试变得更简单。 文档记录。借助于查看单元测试提供的功能和单元测试中如何使用程序单元，开发人员可以直观的理解程序单元的基础API。 表达设计。在测试驱动开发的软件实践中，单元测试可以取代正式的设计。开发人员编写单元测试用于展示软件需求或者软件缺陷，然后，开发人员遵循测试要求编写最简单的代码去满足它，直到测试得以通过。 ####NUnit测试框架\n.Net平台下有多种测试工具，NUnit为C#开发的开源测试框架，广泛用于.Net平台的单元测试和回归测试中。\n详细的使用方法可以参考：https://github.com/nunit/docs/wiki\n下面介绍在Visual Studio中的最轻量级的使用方法。\n#####1.安装\n在Visual Studio菜单栏 \u0026ldquo;工具\u0026mdash;\u0026mdash;\u0026gt;扩展和更新\u0026mdash;\u0026mdash;\u0026gt;联机\u0026rdquo;，搜索\u0026quot;nunit\u0026quot;，结果如下。安装NUnit 3 Test Adapter、NUnit VS Templates和Test Generator NUnit extension三个扩展。\n2.创建测试项目 一开始需要在已有的解决方案中创建新的测试项目，因为不想把任何测试与生产的代码一起发布。菜单栏点击\u0026quot;文件 \u0026mdash;\u0026mdash;\u0026gt; 添加 \u0026mdash;\u0026mdash;\u0026gt; 新建项目 \u0026mdash;\u0026mdash;\u0026gt; Visual C# \u0026mdash;\u0026mdash;\u0026gt; 测试\u0026quot;。\n在项目的引用栏中添加nunit.framework引用。\n以类为单位创建测试文件，对于MVP的设计模式，可以对View的接口进行Mock，可以参考教程An Introduction to testing with the Model-View-Presenter pattern for Web Forms Development。\n典型的测试文件格式如下所示。\nnamespace JMelt.Tests { using JMelt.Models; [TestFixture] public class TestMyCustom { [SetUp] public void Initialize() { //这里写运行每一个测试用例时需要初始化的代码 } /// \u0026lt;summary\u0026gt; /// 测试 custom.ini 配置信息的读取 /// \u0026lt;/summary\u0026gt; [Test] public void TestReadIniFile() { var length = MyCustom.CustomConfig.Count; Assert.That(length, Is.EqualTo(10), \u0026#34;custom.ini read error\u0026#34;); } 属性解释：\n[TestFixture]: 标识测试类。\n[SetUp]: 标识测试用例初始化函数，每个测试用例运行都会执行一次。\n[Test]: 标识测试用例。\n[TearDown]: 标识测试用例资源释放函数。\n3.运行测试 在菜单栏打开\u0026quot;测试 \u0026mdash;\u0026mdash;\u0026gt; 窗口 \u0026mdash;\u0026mdash;\u0026gt; 测试资源管理器\u0026quot;，在测试资源管理器中可以运行所有的测试用例。\n参考资料\nhttps://zh.wikipedia.org/wiki/单元测试 https://www.cnblogs.com/zwt-blog/p/5788222.html http://www.51testing.com/html/54/n-3725154.html https://github.com/nunit/docs/wiki/NUnit-Documentation ","permalink":"https://www.heiok.top/posts/tutorial/c%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%8F%8Anunit%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/","summary":"\u003ch4 id=\"单元测试\"\u003e单元测试\u003c/h4\u003e\n\u003cp\u003e单元测试（Unit Testing）是针对程序弄块（软件设计的最小单位）来进行正确性检验的测试工作。单元测试通常由软件开发人员编写，用于确保他们了所写的代码匹配软件需求和遵循开发目标。\u003c/p\u003e\n\u003cp\u003e单元测试的优点：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e适应变更。允许程序员在未来重构代码，并确保模块依然工作正确。\u003c/li\u003e\n\u003cli\u003e简化集成。采用自底向上的测试路径，消除程序单元的不可靠，使集成测试变得更简单。\u003c/li\u003e\n\u003cli\u003e文档记录。借助于查看单元测试提供的功能和单元测试中如何使用程序单元，开发人员可以直观的理解程序单元的基础API。\u003c/li\u003e\n\u003cli\u003e表达设计。在测试驱动开发的软件实践中，单元测试可以取代正式的设计。开发人员编写单元测试用于展示软件需求或者软件缺陷，然后，开发人员遵循测试要求编写最简单的代码去满足它，直到测试得以通过。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e####NUnit测试框架\u003c/p\u003e","title":"【C#】单元测试及NUnit的基本用法"},{"content":"设计一个缓存系统，不得不要考虑的问题就是：缓存穿透、缓存击穿与失效时的雪崩效应。\n前台请求，后台先从缓存中取数据，取到直接返回结果，取不到时从数据库中取，数据库取到更新缓存，并返回结果，数据库也没取到，那直接返回空结果。\n缓存穿透 描述：\n缓存穿透是指缓存和数据库中都没有的数据，而用户不断发起请求。由于缓存是不命中时被动写的，并且出于容错考虑，如果从存储层查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到存储层去查询，失去了缓存的意义。\n在流量大时，可能DB就挂掉了，要是有人利用不存在的key频繁攻击我们的应用，这就是漏洞。\n如发起为id为\u0026quot;-1\u0026quot;的数据或id为特别大不存在的数据。这时的用户很可能是攻击者，攻击会导致数据库压力过大。\n解决方案：\n|\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;| | 接口层增加校验，如用户鉴权校验，id做基础校验，id\u0026lt;=0的直接拦截； | | 从缓存取不到的数据，在数据库中也没有取到，这时也可以将key-value对写为key-null ，缓存有效时间可以设置短点，如30秒（设置太长会导致正常情况也没法使用）。这样可以防止攻击用户反复用同一个id暴力攻击 | | |\n缓存击穿 描述：\n缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力。\n解决方案：\n1、设置热点数据永远不过期。\n**2、接口限流与熔断，降级。**重要的接口一定要做好限流策略，防止用户恶意刷接口，同时要降级准备，当接口中的某些 服务 不可用时候，进行熔断，失败快速返回机制。\n3、布隆过滤器 **。**bloomfilter就类似于一个hash set，用于快速判某个元素是否存在于集合中，其典型的应用场景就是快速判断一个key是否存在于某容器，不存在就直接返回。布隆过滤器的关键就在于hash算法和容器大小，\n4、加互斥锁，互斥锁参考代码如下：\n说明：\n1）缓存中有数据，直接走上述代码13行后就返回结果了\n2）缓存中没有数据，第1个进入的线程，获取锁并从数据库去取数据，没释放锁之前，其他并行进入的线程会等待100ms，再重新去缓存取数据。这样就防止都去数据库重复取数据，重复往缓存中更新数据情况出现。\n3）当然这是简化处理，理论上如果能根据key值加锁就更好了，就是线程A从数据库取key1的数据并不妨碍线程B取key2的数据，上面代码明显做不到这点。\n缓存雪崩 描述：\n缓存雪崩是指缓存中数据大批量到过期时间，而查询数据量巨大，引起数据库压力过大甚至down机。和缓存击穿不同的是， 缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查数据库。\n解决方案：\n缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。 如果缓存数据库是分布式部署，将热点数据均匀分布在不同搞得缓存数据库中。 设置热点数据永远不过期。 缓存穿透、缓存击穿、缓存雪崩区别和解决方案\nhttps://blog.csdn.net/kongtiao5/article/details/82771694\nRedis缓存穿透、缓存雪崩、redis并发问题分析\nhttps://blog.csdn.net/fanrenxiang/article/details/80542580\n缓存穿透，缓存击穿，缓存雪崩解决方案分析{#activity-name}\n","permalink":"https://www.heiok.top/posts/tutorial/%E9%9D%A2%E8%AF%95redis%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E5%8C%BA%E5%88%AB%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","summary":"\u003cp\u003e设计\u003ca href=\"http://mp.weixin.qq.com/s?__biz=MzU5NTAzNjM0Mw==\u0026amp;mid=2247485849\u0026amp;idx=2\u0026amp;sn=a85a71485fc64bf34e5f1e4971dc2469\u0026amp;chksm=fe795841c90ed157f347ef6b0bccdb7aa5e49cade80eb9a5be96329cd8f813d06e4b335cfdac\u0026amp;scene=21#wechat_redirect\"\u003e一个缓存系统\u003c/a\u003e，不得不要考虑的问题就是：缓存穿透、缓存击穿与失效时的雪崩效应。\u003c/p\u003e\n\u003cp\u003e前台请求，后台先从缓存中取数据，取到直接返回结果，取不到时从数据库中取，数据库取到更新缓存，并返回结果，数据库也没取到，那直接返回空结果。\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://img-blog.csdn.net/20180919143214712?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tvbmd0aWFvNQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003ch4 id=\"content_views\"\u003e\u003cstrong\u003e缓存穿透\u003c/strong\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003e描述：\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e缓存穿透是指\u003cstrong\u003e缓存和数据库中都没有的数据\u003c/strong\u003e，而用户不断发起请求。由于缓存是不命中时被动写的，并且出于容错考虑，如果从存储层查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到存储层去查询，失去了缓存的意义。\u003c/p\u003e","title":"【面试】redis缓存穿透、缓存击穿、缓存雪崩区别和解决方案"},{"content":"API接口测试设计指南 本文档介绍了如何使用pytest和YAML配置文件设计和实现参数化的API接口测试。\n1. 测试架构概述 我们的API测试架构采用以下模式：\n数据驱动：测试数据与测试逻辑分离，存储在YAML文件中 参数化测试：通过参数化来复用测试代码 环境隔离：支持在不同环境(开发、测试、生产)中运行测试 模块化设计：将测试功能拆分为可复用的组件 2. 测试数据结构 测试数据存储在YAML文件中，采用以下结构：\napi_tests: # 基础配置 base_urls: dev: \u0026#34;https://dev-api.example.com\u0026#34; test: \u0026#34;https://test-api.example.com\u0026#34; # 测试用例 test_cases: - name: \u0026#34;测试名称\u0026#34; description: \u0026#34;测试描述\u0026#34; method: \u0026#34;GET\u0026#34; # HTTP方法 endpoint: \u0026#34;/api/users/{user_id}\u0026#34; # 请求路径 path_params: # 路径参数 user_id: \u0026#34;12345\u0026#34; query_params: # 查询参数 include_details: \u0026#34;true\u0026#34; headers: # 请求头 Authorization: \u0026#34;Bearer {token}\u0026#34; body: # 请求体 name: \u0026#34;测试产品\u0026#34; price: 99.99 expected: # 期望结果 status_code: 200 json_contains: id: \u0026#34;12345\u0026#34; 3. 如何组织测试用例 3.1 按资源类型组织 推荐按照API资源类型来组织测试用例，例如：\ntest_cases: # 用户API测试 - name: \u0026#34;获取用户信息\u0026#34; endpoint: \u0026#34;/api/users/{user_id}\u0026#34; # ... # 产品API测试 - name: \u0026#34;创建新产品\u0026#34; endpoint: \u0026#34;/api/products\u0026#34; # ... 3.2 按测试类型组织 可以在名称或描述中标明测试类型：\n基本功能测试：基本的CRUD操作 边界条件测试：测试极限值和边界情况 异常情况测试：测试错误处理 安全测试：权限验证、认证等 性能测试：响应时间等 4. 参数化URL和请求参数的方法 4.1 基础URL参数化 通过环境变量参数化基础URL：\nbase_urls: dev: \u0026#34;https://dev-api.example.com\u0026#34; test: \u0026#34;https://test-api.example.com\u0026#34; prod: \u0026#34;https://api.example.com\u0026#34; 在测试中使用：\n@pytest.fixture(scope=\u0026#34;session\u0026#34;) def base_url(api_test_data, test_env): return api_test_data[\u0026#34;base_urls\u0026#34;][test_env] 4.2 路径参数参数化 在URL路径中使用占位符：\nendpoint: \u0026#34;/api/users/{user_id}\u0026#34; path_params: user_id: \u0026#34;12345\u0026#34; 在测试中处理：\nfor name, value in path_params.items(): endpoint = endpoint.replace(f\u0026#34;{{{name}}}\u0026#34;, str(value)) 4.3 查询参数参数化 在YAML中定义查询参数：\nquery_params: page: 1 limit: 10 sort: \u0026#34;name\u0026#34; 在测试中使用：\nresponse = requests.get(url, params=query_params) 4.4 请求体参数化 在YAML中定义请求体：\nbody: name: \u0026#34;测试产品\u0026#34; price: 99.99 category: \u0026#34;electronics\u0026#34; 在测试中使用：\nresponse = requests.post(url, json=body) 5. 测试断言和验证 5.1 状态码验证 expected: status_code: 200 5.2 响应内容验证 expected: json_contains: id: \u0026#34;12345\u0026#34; name: \u0026#34;测试用户\u0026#34; 5.3 响应时间验证 expected: response_time_max: 500 # 毫秒 5.4 使用JSON Schema验证 expected: json_schema: \u0026#34;user_schema.json\u0026#34; 5.5 高级内容验证 使用特殊语法验证字段类型和格式：\njson_contains: id: \u0026#39;{type: string, regex: \u0026#34;^PRD\\\\d{6}$\u0026#34;}\u0026#39; total: \u0026#39;{type: integer, min: 1}\u0026#39; items: \u0026#39;{type: array, min_items: 1}\u0026#39; 6. 运行测试 6.1 运行所有测试 pytest test_api.py -v 6.2 指定环境运行 pytest test_api.py --env=test -v 6.3 运行特定测试 pytest test_api.py::TestUserAPI::test_get_user_success -v 6.4 运行特定测试用例 pytest test_api.py::test_api_endpoint -v 7. 最佳实践 保持测试数据独立：测试数据应该独立于测试代码 使用有意义的名称：为测试用例和期望结果使用描述性名称 测试覆盖正常和异常情况：测试成功路径和失败路径 使用模拟数据进行测试：在开发阶段使用模拟数据，减少对实际API的依赖 记录详细的测试日志：包括请求和响应的详细信息 按资源分组测试：将相关API测试分组到一起 为测试添加超时：避免测试因网络问题而无限期挂起 8. 进阶技巧 动态生成测试数据：使用工厂或faker库生成测试数据 测试依赖管理：处理API之间的依赖关系 并行测试执行：使用pytest-xdist加速测试 测试报告生成：使用pytest-html或allure生成报告 持续集成：将API测试集成到CI/CD流程中 ","permalink":"https://www.heiok.top/posts/tutorial/api%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E8%AE%BE%E8%AE%A1%E6%8C%87%E5%8D%97/","summary":"\u003ch1 id=\"api接口测试设计指南\"\u003eAPI接口测试设计指南\u003c/h1\u003e\n\u003cp\u003e本文档介绍了如何使用pytest和YAML配置文件设计和实现参数化的API接口测试。\u003c/p\u003e\n\u003ch2 id=\"1-测试架构概述\"\u003e1. 测试架构概述\u003c/h2\u003e\n\u003cp\u003e我们的API测试架构采用以下模式：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e数据驱动\u003c/strong\u003e：测试数据与测试逻辑分离，存储在YAML文件中\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e参数化测试\u003c/strong\u003e：通过参数化来复用测试代码\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e环境隔离\u003c/strong\u003e：支持在不同环境(开发、测试、生产)中运行测试\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e模块化设计\u003c/strong\u003e：将测试功能拆分为可复用的组件\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-测试数据结构\"\u003e2. 测试数据结构\u003c/h2\u003e\n\u003cp\u003e测试数据存储在YAML文件中，采用以下结构：\u003c/p\u003e","title":"API接口测试设计指南"},{"content":"https://www.cnblogs.com/shenghuotaiai/p/16144277.html\n","permalink":"https://www.heiok.top/posts/tutorial/autofac/","summary":"\u003cp\u003e\u003ca href=\"https://www.cnblogs.com/shenghuotaiai/p/16144277.html\"\u003ehttps://www.cnblogs.com/shenghuotaiai/p/16144277.html\u003c/a\u003e\u003c/p\u003e","title":"Autofac"},{"content":"C# 标识符命名规则和约定 标识符是分配给类型（类、接口、结构、委托或枚举）、成员、变量或命名空间的名称。\n命名规则 标识符必须以字母或下划线 (_) 开头。 注意：可以在标识符上使用 @ 前缀来声明与 C# 关键字匹配的标识符。 @ 不是标识符名称的一部分。 例如，@if 声明名为 if 的标识符。 这些逐字标识符主要用于与使用其他语言声明的标识符的互操作性。\n命名约定 按照约定，C# 程序对类型名称、命名空间和所有公共成员使用 PascalCase。\n接口名称以大写字母 I 开头。 public interface IUserQueue { } 属性类型以单词 Attribute 结尾。\n枚举类型对非标记使用单数名词，对标记使用复数名词。\n标识符不应包含两个连续的下划线 (_) 字符。 这些名称保留给编译器生成的标识符。\n对变量、方法和类使用有意义的描述性名称。\n清晰胜于简洁。。\n将 PascalCase 用于类名和方法名称。\n对方法参数和局部变量使用驼峰式大小写。\n将 PascalCase 用于常量名，包括字段和局部常量。\n专用实例字段以下划线 (_) 开头，其余文本为驼峰式大小写。\n静态字段以 s_ 开头。 此约定不是默认的 Visual Studio 行为，也不是框架设计准则的一部分，但在 editorconfig 中可配置。\n避免在名称中使用缩写或首字母缩略词，但广为人知和广泛接受的缩写除外。\n使用遵循反向域名表示法的有意义的描述性命名空间。\n选择表示程序集主要用途的程序集名称。\n避免使用单字母名称，但简单循环计数器除外。 此外，描述 C# 构造的语法示例通常使用与 C# 语言规范中使用的约定相匹配的以下单字母名称。 语法示例是规则的例外。\n将 S 用于结构，将 C 用于类。\n将 M 用于方法。\n将 v 用于变量，将 p 用于参数。\n将 r 用于 ref 参数。\nPascal 大小写 在命名 class、interface、struct 或 delegate 类型时，使用 Pascal 大小写\npublic class DataService { } public record PhysicalAddress( string Street, string City, string StateOrProvince, string ZipCode); public struct ValueCoordinate { } public delegate void DelegateType(string message); 命名 interface 时，使用 pascal 大小写并在名称前面加上前缀 I。 此前缀可以清楚地向使用者表明这是 interface。\npublic interface IWorkerQueue { } 在命名字段、属性和事件等类型的 public 成员时，使用 pascal 大小写。 此外，对所有方法和本地函数使用 pascal 大小写。\npublic class ExampleEvents { // A public field, these should be used sparingly public bool IsValid; // An init-only property public IWorkerQueue WorkerQueue { get; init; } // An event public event Action EventProcessing; // Method public void StartEventProcessing() { // Local function static int CountQueueItems() =\u0026gt; WorkerQueue.Count; // ... } } 编写位置记录时，对参数使用 pascal 大小写，因为它们是记录的公共属性。\nC#\npublic record PhysicalAddress( string Street, string City, string StateOrProvince, string ZipCode); 驼峰式大小写 命名 私有或者 internal字段时，使用驼峰命名，并添加_作为前缀，命名局部变量（包括委托类型的实例）时，也使用驼峰式大小写。\npublic class DataService { private IWorkerQueue _workerQueue; } static 字段 使用s _或者 静态线程使用t _\npublic class DataService { private static IWorkerQueue s_workerQueue; [ThreadStatic] private static TimeSpan t_timeSpan; } 编写方法参数时，请使用驼峰式大小写。\npublic T SomeMethod(int someNumber, bool isValid) { } 类型参数命名指南(泛型) 注意：以上内容来自微软官方文档，只是用来记录，做一个学习笔记\nc#编码约定 字符串 使用字符串内插来连接短字符串，如下面的代码所示。 string displayName = $\u0026#34;{nameList[n].LastName}, {nameList[n].FirstName}\u0026#34;; 若要在循环中追加字符串，尤其是在使用大量文本时，请使用 System.Text.StringBuilder 对象。（why？） String 类：\n1.不可变性：字符串是不可变的，每次对字符串进行修改（如拼接、替换等）时，都会创建一个新的字符串实例。 2.内存分配：由于不可变性，每次字符串操作都需要在内存堆中为新字符串分配空间，这会导致频繁的内存分配和垃圾回收。 3.性能：对于单个或少量的字符串操作，性能影响可能不大。但在大量或频繁的字符串连接操作（尤其是循环中），会产生大量的中间字符串，严重影响性能。\nStringBuilder 类：\n1.可变性：StringBuilder 是可变的，可以在原对象上直接修改内容，不会生成新的对象。 2.内存效率：它预先分配了一定大小的缓冲区，并且可以根据需要动态扩展容量，减少了内存分配次数，从而提高了内存使用效率。 3.性能：适用于处理多个字符串拼接的情况，尤其是在循环或其他需要多次修改字符串的场景下，其性能远优于 String 类。\nvar phrase = \u0026#34;lalalalalalalalalalalalalalalalalalalalalalalalalalalalalala\u0026#34;; var manyPhrases = new StringBuilder(); for (var i = 0; i \u0026lt; 10000; i++) { manyPhrases.Append(phrase); } //Console.WriteLine(\u0026#34;tra\u0026#34; + manyPhrases); ","permalink":"https://www.heiok.top/posts/tutorial/c-%E6%A0%87%E8%AF%86%E7%AC%A6%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99%E5%92%8C%E7%BA%A6%E5%AE%9A/","summary":"\u003ch2 id=\"c-标识符命名规则和约定\"\u003eC# 标识符命名规则和约定\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e标识符是分配给类型（类、接口、结构、委托或枚举）、成员、变量或命名空间的名称。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"命名规则\"\u003e命名规则\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e标识符必须以字母或下划线 (\u003ccode\u003e_\u003c/code\u003e) 开头。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e注意：可以在标识符上使用 @ 前缀来声明与 C# 关键字匹配的标识符。 @ 不是标识符名称的一部分。 例如，@if 声明名为 if 的标识符。 这些逐字标识符主要用于与使用其他语言声明的标识符的互操作性。\u003c/p\u003e","title":"C# 标识符命名规则和约定"},{"content":"public class RefTest1 { // 反射获取所有属性 公共的字段 [Test] public void Test1() { var propertyInfos = typeof(StudentInfo).GetProperties(); foreach (var propertyInfo in propertyInfos) { Console.WriteLine($\u0026#34;属性名：{propertyInfo.Name}, 属性类型：{propertyInfo.PropertyType}\u0026#34;); } } // 利用反射获取所有字段 // 字段其实就是封装了属性 [Test] public void Test2() { // 获取类型 var type = typeof(StudentInfo); var fieldInfos = type.GetFields(BindingFlags.NonPublic | BindingFlags.Instance); foreach (var fieldInfo in fieldInfos) { Console.WriteLine($\u0026#34;字段名：{fieldInfo.Name} 字段类型：{fieldInfo.FieldType}\u0026#34;); } // 获取单个字段 var field = type.GetField(\u0026#34;Address\u0026#34;, BindingFlags.Instance | BindingFlags.NonPublic); Console.WriteLine($\u0026#34;字段名：{field.Name} 字段类型：{field.FieldType}\u0026#34;); } // 利用反射获取全类名 [Test] public void FullName() { var type = typeof(StudentInfo); Console.WriteLine($\u0026#34;命名空间：{type.Namespace}\u0026#34;); var typeFullName = type.FullName; Console.WriteLine($\u0026#34;全类名：{typeFullName}\u0026#34;); Console.WriteLine($\u0026#34;基类名：{type.BaseType}\u0026#34;); } // 利用反射创建对象 [Test] public void CreateInstance() { var type = typeof(StudentInfo); // 创建对象底层实际就是调用无参构造参数 var studentInfo = Activator.CreateInstance(type) as StudentInfo; // 调用属性 // studentInfo.Name = \u0026#34;张三\u0026#34;; // Console.WriteLine($\u0026#34;{studentInfo.Name}\u0026#34;); } // 操作属性 [Test] public void Test3() { //1. 获取类型 var type = typeof(StudentInfo); //2. 获取一个属性 var fieldInfo = type.GetProperty(\u0026#34;Name\u0026#34;); //3. 通过属性创建对象 var obj = Activator.CreateInstance(type); fieldInfo.SetValue(obj, \u0026#34;ljw\u0026#34;); // 属性赋值 var value = fieldInfo.GetValue(obj); // 获取属性值 Console.WriteLine(value); } // 操作字段 [Test] public void Test4() { // 1. 获取类型 var type = typeof(StudentInfo); // 获取字段 var address = type.GetField(\u0026#34;Address\u0026#34;, BindingFlags.Instance | BindingFlags.NonPublic); // 创建对象 var obj = Activator.CreateInstance(type); address.SetValue(obj, \u0026#34;北京\u0026#34;); Console.WriteLine($\u0026#34;字段的值： {address.GetValue(obj)}\u0026#34;); } // 利用反射加载程序集，创建对象等 [Test] public void LoadingAnAssembly() { // 当当前程序集引用其他程序集时，可以通过程序集名称来加载程序集，并且创建对象 // var assembly = Assembly.Load(\u0026#34;Step.Unit2\u0026#34;); // var instance = assembly.CreateInstance(\u0026#34;Step.Unit2.MyTest\u0026#34;,false); // var myTest = instance as MyTest; // myTest.run(); // 在当前程序集没有引用其他程序集的情况下，可以使用程序集路径创建对象 var unit2 = Assembly.LoadFile(@\u0026#34;E:\\c#\\high-Csharp\\Step.Unit2\\bin\\Debug\\net6.0\\Step.Unit2.dll\u0026#34;); var instance = unit2.CreateInstance(\u0026#34;Step.Unit2.MyTest\u0026#34;, false); var type = instance.GetType(); var methodInfos = type.GetMethods(); foreach (var methodInfo in methodInfos) { Console.WriteLine(methodInfo.Name); } //获取程序集完整路径 string location = Assembly.GetExecutingAssembly().Location; //获取当前程序集名称 string file = Assembly.GetExecutingAssembly().GetName().Name; //获取程序集版本号 string version = Assembly.GetExecutingAssembly().GetName().Version.ToString(); } ","permalink":"https://www.heiok.top/posts/tutorial/c%E9%AB%98%E7%BA%A7%E4%B9%8B%E5%8F%8D%E5%B0%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eRefTest1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 反射获取所有属性  公共的字段\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Test1()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e propertyInfos = \u003cspan style=\"color:#66d9ef\"\u003etypeof\u003c/span\u003e(StudentInfo).GetProperties();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eforeach\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e propertyInfo \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e propertyInfos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e$\u0026#34;属性名：{propertyInfo.Name}, 属性类型：{propertyInfo.PropertyType}\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 利用反射获取所有字段\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 字段其实就是封装了属性\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Test2()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 获取类型\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e type = \u003cspan style=\"color:#66d9ef\"\u003etypeof\u003c/span\u003e(StudentInfo);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e fieldInfos = type.GetFields(BindingFlags.NonPublic | BindingFlags.Instance);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eforeach\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e fieldInfo \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e fieldInfos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e$\u0026#34;字段名：{fieldInfo.Name} 字段类型：{fieldInfo.FieldType}\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 获取单个字段\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e field = type.GetField(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Address\u0026#34;\u003c/span\u003e, BindingFlags.Instance | BindingFlags.NonPublic);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e$\u0026#34;字段名：{field.Name} 字段类型：{field.FieldType}\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 利用反射获取全类名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e FullName()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e type = \u003cspan style=\"color:#66d9ef\"\u003etypeof\u003c/span\u003e(StudentInfo);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e$\u0026#34;命名空间：{type.Namespace}\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e typeFullName = type.FullName;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e$\u0026#34;全类名：{typeFullName}\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e$\u0026#34;基类名：{type.BaseType}\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 利用反射创建对象\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e CreateInstance()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e type = \u003cspan style=\"color:#66d9ef\"\u003etypeof\u003c/span\u003e(StudentInfo);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 创建对象底层实际就是调用无参构造参数\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e studentInfo = Activator.CreateInstance(type) \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e StudentInfo;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 调用属性\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// studentInfo.Name = \u0026#34;张三\u0026#34;;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Console.WriteLine($\u0026#34;{studentInfo.Name}\u0026#34;);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 操作属性\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Test3()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//1. 获取类型\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e type = \u003cspan style=\"color:#66d9ef\"\u003etypeof\u003c/span\u003e(StudentInfo);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//2. 获取一个属性\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e fieldInfo = type.GetProperty(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Name\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//3. 通过属性创建对象\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e obj = Activator.CreateInstance(type);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        fieldInfo.SetValue(obj, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ljw\u0026#34;\u003c/span\u003e); \u003cspan style=\"color:#75715e\"\u003e// 属性赋值\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evalue\u003c/span\u003e = fieldInfo.GetValue(obj); \u003cspan style=\"color:#75715e\"\u003e// 获取属性值\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(\u003cspan style=\"color:#66d9ef\"\u003evalue\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 操作字段\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Test4()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 1. 获取类型\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e type = \u003cspan style=\"color:#66d9ef\"\u003etypeof\u003c/span\u003e(StudentInfo);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 获取字段\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e address = type.GetField(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Address\u0026#34;\u003c/span\u003e, BindingFlags.Instance | BindingFlags.NonPublic);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 创建对象\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e obj = Activator.CreateInstance(type);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        address.SetValue(obj, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;北京\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e$\u0026#34;字段的值： {address.GetValue(obj)}\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 利用反射加载程序集，创建对象等\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e LoadingAnAssembly()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 当当前程序集引用其他程序集时，可以通过程序集名称来加载程序集，并且创建对象\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// var assembly = Assembly.Load(\u0026#34;Step.Unit2\u0026#34;);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// var instance = assembly.CreateInstance(\u0026#34;Step.Unit2.MyTest\u0026#34;,false);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// var myTest = instance as MyTest;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// myTest.run();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 在当前程序集没有引用其他程序集的情况下，可以使用程序集路径创建对象\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e unit2 = Assembly.LoadFile(\u003cspan style=\"color:#e6db74\"\u003e@\u0026#34;E:\\c#\\high-Csharp\\Step.Unit2\\bin\\Debug\\net6.0\\Step.Unit2.dll\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e instance = unit2.CreateInstance(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Step.Unit2.MyTest\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e type = instance.GetType();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e methodInfos = type.GetMethods();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eforeach\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e methodInfo \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e methodInfos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(methodInfo.Name);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//获取程序集完整路径\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e location = Assembly.GetExecutingAssembly().Location;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//获取当前程序集名称\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e file = Assembly.GetExecutingAssembly().GetName().Name;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//获取程序集版本号\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e version = Assembly.GetExecutingAssembly().GetName().Version.ToString();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"c#高级之反射常见操作"},{"content":"一 、基础知识 值类型 vs 引用类型 追问：int、struct和class在内存分配上的区别？什么是装箱拆箱？如何避免装箱带来的性能问题？\n异常处理机制 追问：catch (Exception ex)和finally的执行顺序？using语句在底层如何保证资源释放？\n多线程与异步 追问：async/await和Task.Run()的本质区别是什么？lock关键字底层如何实现？什么是死锁场景？ 字符串与性能\n问题：string 和 StringBuilder 的区别？在循环中拼接字符串时为什么优先用 StringBuilder？ 追问：ReadOnlySpan 和 string 在内存分配上的区别？\n集合与泛型 问题：List 和 Array 的适用场景？Dictionary\u0026lt;TKey, TValue\u0026gt; 的哈希冲突如何解决？ 追问：IEnumerable 和 IQueryable 的区别？LINQ 的延迟执行是什么？\n委托与事件 问题：如何定义一个事件？Action、Func 和 Predicate 的区别？ 追问：事件为什么通常用 EventHandler 模式？如何避免事件订阅导致的内存泄漏？\nGC 与内存管理 问题：什么是 Generation 0/1/2 内存回收？GC.Collect() 可以随意调用吗？ 追问：IDisposable 接口的作用？如何实现一个资源释放安全的类？\n接口与抽象类 问题：什么情况下用接口而不是抽象类？接口的显式实现（Explicit Interface）有什么用途？\n二、开发场景实战 数据库性能问题 场景：EF Core查询一个包含10万条记录的Users表时速度缓慢，如何优化？ 追问：什么是N+1查询问题？如何通过Include()和延迟加载优化？\n依赖注入设计 场景：在ASP.NET Core中，为什么要避免在构造函数中直接new对象？如何通过IServiceCollection注册生命周期（Scoped vs Singleton）？\n并发冲突处理 场景：两个线程同时修改同一个文件导致数据覆盖，如何用Mutex或Semaphore解决？乐观锁在数据库中的实现方式是什么\n场景 1：Web API 开发 问题：设计一个用户注册接口时，如何保证密码安全性？如何防止接口被恶意频繁调用？ 追问：密码存储是否应该加密？使用哪种哈希算法（如BCrypt）？ 如何用 Redis + 滑动窗口限制同一IP的请求频率？\n场景 2：数据库设计 问题：订单表（Order）和订单详情表（OrderItem）如何设计关联？如何用 EF Core 实现级联删除？ 追问： 如果订单表有百万级数据，分页查询 Skip(100000).Take(20) 为什么慢？如何优化？ 分库分表时如何保证订单ID全局唯一？\n场景 3：缓存与一致性 问题：商品详情页需要高并发读取，如何用缓存（如Redis）提升性能？如何解决缓存穿透和雪崩问题？ 追问： 缓存更新策略（Cache-Aside、Write-Through、Write-Behind）的优缺点？ 如何用 RedLock 实现分布式锁？\n场景 4：身份认证与授权 问题：在 ASP.NET Core 中如何实现 JWT 认证？如何控制不同角色（Role）对 API 的访问权限？ 追问： [Authorize(Policy = \u0026ldquo;AdminOnly\u0026rdquo;)] 中的 Policy 如何自定义？ 如何实现 OAuth 2.0 的授权码模式？\n场景 5：分布式系统问题 问题：支付服务调用第三方接口超时，如何设计重试机制？如何保证接口的幂等性（Idempotency）？ 追问：什么是幂等键（Idempotency Key）？如何用数据库唯一索引实现？ 如何用 Polly 实现熔断（Circuit Breaker）策略？\n三、调试与架构思维 内存泄漏排查 场景：程序运行一段时间后内存飙升，如何用dotMemory或Windbg分析未释放的EventHandler引用？\n设计模式应用 场景：如何用观察者模式实现一个日志系统？工厂方法模式在DI框架中的作用是什么？\n四、开放性问题 技术决策 问题：在旧项目中遇到大量static类和方法，你会如何推动重构？如何评估重构风险？\n学习与成长 问题：过去一年你遇到的最高技术挑战是什么？未来半年计划深入哪个技术方向（如微服务、性能优化等）？\n五、陷阱问题（考察细节） 隐式类型转换 问题：var list = new ArrayList(); list.Add(1); list.Add(\u0026ldquo;2\u0026rdquo;); 这段代码是否安全？为什么？ LINQ 的延迟执行 问题：以下代码会抛出异常吗？为什么？ var numbers = new List\u0026lt;int\u0026gt; { 1, 2, 3 }; var query = numbers.Where(x =\u0026gt; x \u0026gt; 0); numbers.Add(4); Console.WriteLine(query.Count()); // 输出是3还是4？ 评价标准 基础扎实性：能否清晰解释IL、CLR等底层概念？ 代码质量：变量命名、异常处理边界是否严谨？ 实战经验：是否在回答中关联真实项目（如“我曾在XX项目中用Redis解决缓存穿透”）？ 逻辑表达：能否用“问题-方案-结果”结构化描述技术决策？\n","permalink":"https://www.heiok.top/posts/tutorial/c%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%E5%88%86%E4%BA%AB/","summary":"\u003ch2 id=\"一-基础知识\"\u003e一 、基础知识\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e值类型 vs 引用类型\n追问：int、struct和class在内存分配上的区别？什么是装箱拆箱？如何避免装箱带来的性能问题？\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e异常处理机制\n追问：catch (Exception ex)和finally的执行顺序？using语句在底层如何保证资源释放？\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e多线程与异步\n追问：async/await和Task.Run()的本质区别是什么？lock关键字底层如何实现？什么是死锁场景？\n字符串与性能\u003c/p\u003e","title":"c#基础知识+业务场景分享"},{"content":"###1、在centOS7上安装Tailscale客户端 {#content_views}\n#安装命令所在官网位置：https://tailscale.com/download/linux #具体命令为： curl -fsSL https://tailscale.com/install.sh | sh #命令执行后如下图所示 2、设置允许IP转发和IP伪装。 安装后，您可以启动（或重新启动）Tailscale 作为子网路由器：此功能需要启用 IP 转发。\n执行下面命令启用IP转发 ：\necho \u0026#39;net.ipv4.ip_forward = 1\u0026#39; | sudo tee -a /etc/sysctl.d/99-tailscale.conf echo \u0026#39;net.ipv6.conf.all.forwarding = 1\u0026#39; | sudo tee -a /etc/sysctl.d/99-tailscale.conf sudo sysctl -p /etc/sysctl.d/99-tailscale.conf 执行以下命令启用IP伪装(重要)：\nfirewall-cmd --permanent --add-masquerade 3、通告子网路由 sudo tailscale up --advertise-routes=192.168.0.0/24,192.168.1.0/24 #如果只有一个子网就只写一个 sudo tailscale up --accept-routes --advertise-routes=192.168.0.0/24 将上例中的子网替换为适合您的网络的子网。支持 IPv4 和 IPv6 子网。\n上面命令执行后会打印登录地址：\n###4、登录成功后从管理控制台启用子网路由 ，启用后就可以通过内网地址进行访问了。\n","permalink":"https://www.heiok.top/posts/tutorial/centos7-%E5%AE%89%E8%A3%85tailscale%E5%B9%B6%E5%90%AF%E7%94%A8%E5%AD%90%E7%BD%91%E8%B7%AF%E7%94%B1/","summary":"\u003cp\u003e###1、在centOS7上安装Tailscale客户端 {#content_views}\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-gdscript3\" data-lang=\"gdscript3\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#安装命令所在官网位置：https://tailscale.com/download/linux\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#具体命令为：\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003efsSL https:\u003cspan style=\"color:#f92672\"\u003e//\u003c/span\u003etailscale\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecom\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003einstall\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esh \u003cspan style=\"color:#f92672\"\u003e|\u003c/span\u003e sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#命令执行后如下图所示\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://img-blog.csdnimg.cn/direct/7dd0f7db0e9d4e47ba9cb6a37fd558ae.png\" alt=\"在这里插入图片描述\"  /\u003e\n\u003cbr\u003e\n\u003cimg loading=\"lazy\" src=\"https://img-blog.csdnimg.cn/direct/5c69dc10271c4301aca2a1cbcdd5fac4.png\" alt=\"在这里插入图片描述\"  /\u003e\n\u003c/p\u003e\n\u003ch3 id=\"2设置允许ip转发和ip伪装\"\u003e2、设置允许IP转发和IP伪装。\u003c/h3\u003e\n\u003cp\u003e安装后，您可以启动（或重新启动）Tailscale 作为子网路由器：此功能需要启用 IP 转发。\u003c/p\u003e\n\u003cp\u003e执行下面命令启用IP转发 ：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u0026#39;net.ipv4.ip_forward = 1\u0026#39; | sudo tee -a /etc/sysctl.d/99-tailscale.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u0026#39;net.ipv6.conf.all.forwarding = 1\u0026#39; | sudo tee -a /etc/sysctl.d/99-tailscale.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo sysctl -p /etc/sysctl.d/99-tailscale.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e执行以下命令启用IP伪装(\u003cstrong\u003e重要\u003c/strong\u003e)：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efirewall-cmd --permanent --add-masquerade\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"3通告子网路由\"\u003e3、通告子网路由\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo tailscale up \u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003eadvertise\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eroutes\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e192.\u003cspan style=\"color:#a6e22e\"\u003e168\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e0\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e24,192.\u003cspan style=\"color:#a6e22e\"\u003e168\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e1\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e24\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e#\u003c/span\u003e如果只有一个子网就只写一个\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo tailscale up \u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003eaccept\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eroutes \u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003eadvertise\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eroutes\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e192.\u003cspan style=\"color:#a6e22e\"\u003e168\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e0\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e24\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e将上例中的子网替换为适合您的网络的子网。支持 IPv4 和 IPv6 子网。\u003c/p\u003e","title":"centOS7 安装tailscale并启用子网路由"},{"content":"官方文档入门 入口\n学习过程 制定学习计划：制定一个详细的学习计划（比如每天学习一个C#/.NET知识点、小技能），这将有助于你更好地组织学习过程。 学习路程 最后 文档资料\n","permalink":"https://www.heiok.top/posts/tutorial/csharp-%E4%BB%8E%E7%8E%B0%E5%9C%A8%E5%BC%80%E5%A7%8B/","summary":"\u003ch1 id=\"官方文档入门\"\u003e官方文档入门\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/tour-of-csharp/tips-for-java-developers\"\u003e入口\u003c/a\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e学习过程\n制定学习计划：制定一个详细的学习计划（比如每天学习一个C#/.NET知识点、小技能），这将有助于你更好地组织学习过程。\n学习路程\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://img2024.cnblogs.com/blog/1336199/202402/1336199-20240204195938102-801439897.png\" alt=\"学习路线\"  /\u003e\n\u003c/p\u003e\n\u003ch1 id=\"最后\"\u003e最后\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://www.cnblogs.com/Can-daydayup/p/18006914#_label1\"\u003e文档资料\u003c/a\u003e\u003c/p\u003e","title":"Csharp 从现在开始"},{"content":"static void Main(string[] args) { int[] nums = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 }; int[] result = GetMaxMinSumAvg(nums); Console.WriteLine(\u0026#34;Max-{0}，Min-{1}，Sum-{2}，Avg-{3}\u0026#34;, result[0], result[1], result[2], result[3]); Console.ReadKey(); } //返回数组中最大值，最小值，总和，平均值，此时4个返回值所以声明一个数组 public static int[] GetMaxMinSumAvg(int[] nums) { //假设res[0]最大值，res[1]最小值，res[2]总和，res[3]平均值 int[] res = new int[4]; res[0] = nums[0];//max res[1] = nums[0];//min res[2] = 0;//sum for (int i = 0; i \u0026lt; nums.Length; i++) { if (nums[i] \u0026gt; res[0]) { res[0] = nums[i]; } if (nums[i] \u0026lt; res[1]) { res[1] = nums[i]; } res[2] += nums[i]; } res[3] = res[2] / nums.Length; return res; } 2.Out示例1 返回值类型不同时怎么办？\nout参数：返回值多个，不限类型\n注意事项：\n调用方法之前，对out参数传递的变量只需声明，可以赋值也可以不赋值，赋值也会在方法中被覆盖掉 使用out参数传递变量时，必须在方法内为其赋值，否则return的返回值没有意义 方法的参数使用out修饰时，调用该方法时也要加上out关键字 使用out修饰的变量不需要return static void Main(string[] args) { int[] nums = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 }; int max; int min; int sum; int avg; string s; Test(nums, out max, out min, out sum, out avg, out s); Console.WriteLine(max); Console.WriteLine(min); Console.WriteLine(sum); Console.WriteLine(avg); Console.WriteLine(s); Console.ReadKey(); } public static void Test(int[] nums, out int max, out int min, out int sum, out int avg, out string s)//5个out参数修饰的是多余的返回值 { //out参数必须在方法内部为其赋值，否则返回去没有意义 max = nums[0]; min = nums[0]; sum = 0; for (int i = 0; i \u0026lt; nums.Length; i++) { if (nums[i] \u0026gt; max) { max = nums[i]; } if (nums[i] \u0026lt; min) { min = nums[i]; } sum += nums[i]; } avg = sum / nums.Length; //此方法void无返回值，无需写return s = \u0026#34;Test_Result\u0026#34;; } static void Main(string[] args) { int n; bool b = MyTryParse(\u0026#34;123\u0026#34;, out n); Console.WriteLine(b); Console.WriteLine(n); Console.ReadKey(); } public static bool MyTryParse(string s, out int result) { result = 0; try { result = Convert.ToInt32(s); return true; } catch { return false; } } ","permalink":"https://www.heiok.top/posts/tutorial/csharp%E5%85%B3%E9%94%AE%E5%AD%97-out/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Main(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e[] args)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[] nums = { \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[] result = GetMaxMinSumAvg(nums);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Max-{0}，Min-{1}，Sum-{2}，Avg-{3}\u0026#34;\u003c/span\u003e, result[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e], result[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e], result[\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e], result[\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e]);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.ReadKey();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//返回数组中最大值，最小值，总和，平均值，此时4个返回值所以声明一个数组\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[] GetMaxMinSumAvg(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[] nums)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e//假设res[0]最大值，res[1]最小值，res[2]总和，res[3]平均值\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[] res = \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            res[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e] = nums[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e];\u003cspan style=\"color:#75715e\"\u003e//max\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            res[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e] = nums[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e];\u003cspan style=\"color:#75715e\"\u003e//min\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            res[\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e] = \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\u003cspan style=\"color:#75715e\"\u003e//sum\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e i = \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e; i \u0026lt; nums.Length; i++)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (nums[i] \u0026gt; res[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    res[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e] = nums[i];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (nums[i] \u0026lt; res[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    res[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e] = nums[i];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                res[\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e] += nums[i];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            res[\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e] = res[\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e] / nums.Length;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e res;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"2out示例1\"\u003e2.Out示例1\u003c/h2\u003e\n\u003cp\u003e返回值类型不同时怎么办？\u003c/p\u003e\n\u003cp\u003eout参数：返回值多个，不限类型\u003c/p\u003e\n\u003cp\u003e注意事项：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e调用方法之前，对out参数传递的变量只需声明，可以赋值也可以不赋值，赋值也会在方法中被覆盖掉\u003c/li\u003e\n\u003cli\u003e使用out参数传递变量时，必须在方法内为其赋值，否则return的返回值没有意义\u003c/li\u003e\n\u003cli\u003e方法的参数使用out修饰时，调用该方法时也要加上out关键字\u003c/li\u003e\n\u003cli\u003e使用out修饰的变量不需要return\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Main(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e[] args)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[] nums = { \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e max;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e min;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e sum;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e avg;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e s;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Test(nums, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e max, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e min, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e sum, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e avg, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e s);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(max);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(min);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(sum);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(avg);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(s);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.ReadKey();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Test(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e[] nums, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e max, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e min, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e sum, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e avg, \u003cspan style=\"color:#66d9ef\"\u003eout\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e s)\u003cspan style=\"color:#75715e\"\u003e//5个out参数修饰的是多余的返回值\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e//out参数必须在方法内部为其赋值，否则返回去没有意义\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            max = nums[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            min = nums[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            sum = \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e i = \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e; i \u0026lt; nums.Length; i++)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (nums[i] \u0026gt; max)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    max = nums[i];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (nums[i] \u0026lt; min)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    min = nums[i];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                sum += nums[i];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            avg = sum / nums.Length;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e//此方法void无返回值，无需写return\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            s = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Test_Result\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estatic void Main(string[] args)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            int n;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            bool b = MyTryParse(\u0026#34;123\u0026#34;, out n);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(b);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.WriteLine(n);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Console.ReadKey();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        public static bool MyTryParse(string s, out int result)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            result = 0;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            try\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                result = Convert.ToInt32(s);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                return true;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            catch\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                return false;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"CSharp关键字-Out"},{"content":".NET6.0的变化 C# 标识符命名规则和约定 ","permalink":"https://www.heiok.top/posts/tutorial/csharp%E5%87%BD%E6%95%B0%E4%B8%8E%E5%BE%AA%E7%8E%AF/","summary":"\u003ch3 id=\"net60的变化\"\u003e\u003ca href=\"https://learn.microsoft.com/zh-cn/dotnet/core/tutorials/top-level-templates\"\u003e.NET6.0的变化\u003c/a\u003e\u003c/h3\u003e\n\u003ch3 id=\"c-标识符命名规则和约定\"\u003e\u003ca href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/coding-style/identifier-names\"\u003eC# 标识符命名规则和约定\u003c/a\u003e\u003c/h3\u003e","title":"CSharp函数与循环"},{"content":"C# 扩展方法详解 扩展方法是 C# 3.0 引入的一种特性，允许您向现有类型\u0026quot;添加\u0026quot;方法，而无需修改原始类型、创建新的派生类型、重新编译或以其他方式修改原始类型。扩展方法特别有用于扩展不能修改的类型，如密封类或来自第三方库的类型。\n目录 定义扩展方法 使用扩展方法 扩展方法的约束 常见应用场景 LINQ 与扩展方法 最佳实践 高级使用技巧 定义扩展方法 扩展方法必须满足以下条件：\n在静态类中定义 方法必须是静态的 方法的第一个参数必须使用 this 关键字修饰，表示扩展的目标类型 基本语法 namespace ExtensionMethods { public static class MyExtensions { public static int WordCount(this string str) { return str.Split(new[] { \u0026#39; \u0026#39;, \u0026#39;.\u0026#39;, \u0026#39;?\u0026#39; }, StringSplitOptions.RemoveEmptyEntries).Length; } } } 上述代码为 string 类型添加了一个名为 WordCount 的扩展方法，用于计算字符串中的单词数量。\n使用扩展方法 要使用扩展方法，需要导入包含扩展方法的命名空间。然后可以像调用实例方法一样调用扩展方法。\nusing ExtensionMethods; class Program { static void Main() { string text = \u0026#34;Hello Extension Methods\u0026#34;; // 使用扩展方法 int wordCount = text.WordCount(); Console.WriteLine($\u0026#34;Word count: {wordCount}\u0026#34;); // 输出: Word count: 3 } } 扩展方法的约束 不能覆盖实例方法：如果类型已经有相同签名的实例方法，该实例方法将优先于扩展方法。\n访问限制：扩展方法只能访问被扩展类型的公共成员。\n无法扩展静态类：不能为静态类创建扩展方法。\n不能使用 base 关键字：扩展方法无法访问基类成员。\n常见应用场景 1. 扩展框架类型 public static class DateTimeExtensions { public static bool IsWeekend(this DateTime date) { return date.DayOfWeek == DayOfWeek.Saturday || date.DayOfWeek == DayOfWeek.Sunday; } } // 使用 DateTime today = DateTime.Now; if (today.IsWeekend()) { Console.WriteLine(\u0026#34;It\u0026#39;s weekend!\u0026#34;); } 2. 扩展接口 public static class EnumerableExtensions { public static void ForEach\u0026lt;T\u0026gt;(this IEnumerable\u0026lt;T\u0026gt; source, Action\u0026lt;T\u0026gt; action) { foreach (T item in source) { action(item); } } } // 使用 List\u0026lt;string\u0026gt; names = new List\u0026lt;string\u0026gt; { \u0026#34;John\u0026#34;, \u0026#34;Jane\u0026#34;, \u0026#34;Alice\u0026#34; }; names.ForEach(name =\u0026gt; Console.WriteLine(name)); 3. 流式接口（Fluent Interface） public static class StringBuilderExtensions { public static StringBuilder AppendWithNewLine(this StringBuilder builder, string value) { return builder.Append(value).Append(Environment.NewLine); } } // 使用 StringBuilder sb = new StringBuilder(); sb.AppendWithNewLine(\u0026#34;Line 1\u0026#34;) .AppendWithNewLine(\u0026#34;Line 2\u0026#34;) .AppendWithNewLine(\u0026#34;Line 3\u0026#34;); LINQ 与扩展方法 LINQ（Language Integrated Query）是建立在扩展方法基础上的。许多 LINQ 方法都是针对 IEnumerable\u0026lt;T\u0026gt; 的扩展方法。\n// LINQ 扩展方法 var numbers = new[] { 1, 2, 3, 4, 5 }; var evenNumbers = numbers.Where(n =\u0026gt; n % 2 == 0); 最佳实践 命名一致性：扩展方法的名称应该反映它们的功能，并与被扩展类型已有方法的命名风格保持一致。\n合理分组：将相关的扩展方法组织在专门的静态类中。\n单一职责：每个扩展方法应该只做一件事，并做好这件事。\n考虑性能：扩展方法的性能与实例方法相同，但设计不当的扩展方法可能会导致性能问题。\n文档化：为扩展方法提供适当的 XML 文档注释。\n高级使用技巧 扩展泛型类型 public static class GenericExtensions { public static bool IsNull\u0026lt;T\u0026gt;(this T value) where T : class { return value == null; } } 扩展带约束的泛型类型 public static class ComparableExtensions { public static bool IsBetween\u0026lt;T\u0026gt;(this T value, T min, T max) where T : IComparable\u0026lt;T\u0026gt; { return value.CompareTo(min) \u0026gt;= 0 \u0026amp;\u0026amp; value.CompareTo(max) \u0026lt;= 0; } } // 使用 int value = 5; if (value.IsBetween(1, 10)) { Console.WriteLine(\u0026#34;Value is between 1 and 10\u0026#34;); } 递归扩展方法 public static class DirectoryInfoExtensions { public static IEnumerable\u0026lt;FileInfo\u0026gt; GetAllFiles(this DirectoryInfo directory) { foreach (var file in directory.GetFiles()) { yield return file; } foreach (var subdirectory in directory.GetDirectories()) { foreach (var file in subdirectory.GetAllFiles()) // 递归调用扩展方法 { yield return file; } } } } 结合表达式树使用 public static class QueryableExtensions { public static IQueryable\u0026lt;T\u0026gt; WhereIf\u0026lt;T\u0026gt;(this IQueryable\u0026lt;T\u0026gt; source, bool condition, Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate) { return condition ? source.Where(predicate) : source; } } // 使用 var query = dbContext.Users.WhereIf(userFilter.HasAgeFilter, u =\u0026gt; u.Age \u0026gt; userFilter.MinAge); 扩展方法是 C# 中非常强大的功能，它使代码更加模块化、可读性更强，并可以为现有类型添加功能而不改变原始代码。通过合理使用扩展方法，可以使您的代码更清晰、更具表现力和更易于维护。\n","permalink":"https://www.heiok.top/posts/tutorial/csharp%E5%9F%BA%E7%A1%80-%E6%8B%93%E5%B1%95%E6%96%B9%E6%B3%95/","summary":"\u003ch1 id=\"c-扩展方法详解\"\u003eC# 扩展方法详解\u003c/h1\u003e\n\u003cp\u003e扩展方法是 C# 3.0 引入的一种特性，允许您向现有类型\u0026quot;添加\u0026quot;方法，而无需修改原始类型、创建新的派生类型、重新编译或以其他方式修改原始类型。扩展方法特别有用于扩展不能修改的类型，如密封类或来自第三方库的类型。\u003c/p\u003e\n\u003ch2 id=\"目录\"\u003e目录\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%AE%9A%E4%B9%89%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95\"\u003e定义扩展方法\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E4%BD%BF%E7%94%A8%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95\"\u003e使用扩展方法\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95%E7%9A%84%E7%BA%A6%E6%9D%9F\"\u003e扩展方法的约束\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"\u003e常见应用场景\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#linq-%E4%B8%8E%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95\"\u003eLINQ 与扩展方法\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5\"\u003e最佳实践\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7\"\u003e高级使用技巧\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"定义扩展方法\"\u003e定义扩展方法\u003c/h2\u003e\n\u003cp\u003e扩展方法必须满足以下条件：\u003c/p\u003e","title":"CSharp基础-拓展方法"},{"content":"面向对象的编程（继承（以及封装和多态性）是面向对象的编程的三个主要特征） C# 中的类、结构和记录概述 封装 封装有时称为面向对象的编程的第一支柱或原则。 类或结构可以指定自己的每个成员对外部代码的可访问性。 可以隐藏不得在类或程序集外部使用的方法和变量，以限制编码错误或恶意攻击发生的可能性。 有关详细信息，请参阅面向对象的编程教程。\n成员 类型的成员包括所有方法、字段、常量、属性和事件。 C# 没有全局变量或方法，这一点其他某些语言不同。 即使是编程的入口点（Main 方法），也必须在类或结构中声明（使用顶级语句时，隐式声明）。\n下面列出了所有可以在类、结构或记录中声明的各种成员。\n字段 常量 属性 方法 构造函数 事件 终结器 索引器 运算符 嵌套类型 可访问性 可访问性级别 一些方法和属性可供类或结构外部的代码（称为“客户端代码”）调用或访问。 另一些方法和属性只能在类或结构本身中使用。 请务必限制代码的可访问性，仅供预期的客户端代码进行访问。 需要使用以下访问修饰符指定类型及其成员对客户端代码的可访问性：\npublic 公共访问是允许的最高访问级别。 对访问公共成员没有限制\n受保护 只有在通过派生类类型进行访问时，基类的受保护成员在派生类中才是可访问的\ninternal 只有在同一程序集的文件中，才能访问内部类型或成员\nprotected internal private 专用受保护。 可访问性的默认值为 private。\n扩展方法 扩展方法使你能够向现有类型“添加”方法，而无需创建新的派生类型、重新编译或以其他方式修改原始类型。 扩展方法是一种静态方法，但可以像扩展类型上的实例方法一样进行调用\n扩展方法被定义为静态方法，但它们是通过实例方法语法进行调用的。 它们的第一个参数指定方法操作的类型。 该参数位于 this 修饰符之后。 仅当你使用 using 指令将命名空间显式导入到源代码中之后，扩展方法才位于范围中。\n下面的示例演示为 System.String 类定义的一个扩展方法。 它是在非嵌套的、非泛型静态类内部定义的：\nnamespace ExtensionMethods { public static class MyExtensions { public static int WordCount(this string str) { return str.Split(new char[] { \u0026#39; \u0026#39;, \u0026#39;.\u0026#39;, \u0026#39;?\u0026#39; }, StringSplitOptions.RemoveEmptyEntries).Length; } } } 对象 创建类型的实例\n继承 唯一性，一个类只能有一个基类 继承时可传递的，a继承自b，b继承自c，a将继承c中声明的成员 注 ：结构不支持继承，但它们可以实现接口。 抽象方法和虚方法 基类将方法声明为 virtual 时，派生类可以使用其自己的实现override该方法。 如果基类将成员声明为 abstract，则必须在直接继承自该类的任何非抽象类中重写该方法。 如果派生类本身是抽象的，则它会继承抽象成员而不会实现它们。 抽象和虚拟成员是多形性（面向对象的编程的第二个主要特征）的基础。 有关详细信息，请参阅多态性。\n抽象基类 如果要通过使用 new 运算符来防止直接实例化，则可以将类声明为抽象。 只有当一个新类派生自该类时，才能使用抽象类。 抽象类可以包含一个或多个本身声明为抽象的方法签名。 这些签名指定参数和返回值，但没有任何实现（方法体）。 抽象类不必包含抽象成员；但是，如果类包含抽象成员，则类本身必须声明为抽象。 本身不抽象的派生类必须为来自抽象基类的任何抽象方法提供实现。\n","permalink":"https://www.heiok.top/posts/tutorial/csharp%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BC%96%E7%A8%8B/","summary":"\u003ch2 id=\"面向对象的编程继承以及封装和多态性是面向对象的编程的三个主要特征\"\u003e面向对象的编程（继承（以及封装和多态性）是面向对象的编程的三个主要特征）\u003c/h2\u003e\n\u003ch3 id=\"c-中的类结构和记录概述\"\u003eC# 中的类、结构和记录概述\u003c/h3\u003e\n\u003ch4 id=\"封装\"\u003e封装\u003c/h4\u003e\n\u003cp\u003e\u003cem\u003e封装\u003c/em\u003e有时称为面向对象的编程的第一支柱或原则。 类或结构可以指定自己的每个成员对外部代码的可访问性。 可以隐藏不得在类或程序集外部使用的方法和变量，以限制编码错误或恶意攻击发生的可能性。 有关详细信息，请参阅\u003ca href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/tutorials/oop\"\u003e面向对象的编程\u003c/a\u003e教程。\u003c/p\u003e\n\u003ch4 id=\"成员\"\u003e成员\u003c/h4\u003e\n\u003cp\u003e类型的成员包括所有方法、字段、常量、属性和事件。 C# 没有全局变量或方法，这一点其他某些语言不同。 即使是编程的入口点（\u003ccode\u003eMain\u003c/code\u003e 方法），也必须在类或结构中声明（使用\u003ca href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/program-structure/top-level-statements\"\u003e顶级语句\u003c/a\u003e时，隐式声明）。\u003c/p\u003e","title":"CSharp面向对象的编程"},{"content":"析构元组和其他类型 元组提供一种从方法调用中检索多个值的轻量级方法。 但是，一旦检索到元组，就必须处理它的各个元素。\npublic class Example { public static void Main() { var result = QueryCityData(\u0026#34;New York City\u0026#34;); var city = result.Item1; var pop = result.Item2; var size = result.Item3; // Do something with the data. } private static (string, int, double) QueryCityData(string name) { if (name == \u0026#34;New York City\u0026#34;) return (name, 8175133, 468.48); return (\u0026#34;\u0026#34;, 0, 0); } } 从对象检索多个字段值和属性值可能同样麻烦：必须按成员逐个将字段值或属性值赋给一个变量。\n可从元组中检索多个元素，或者在单个析构操作中从对象检索多个字段值、属性值和计算值。 若要析构元组，请将其元素分配给各个变量。 析构对象时，将选定值分配给各个变量。\n元组 有三种方法可用于析构元组：\n可以在括号内显式声明每个字段的类型。 以下示例使用此方法来析构由 QueryCityData 方法返回的三元组。 public static void Main() { (string city, int population, double area) = QueryCityData(\u0026#34;New York City\u0026#34;); // Do something with the data. } 可使用 var 关键字，以便 C# 推断每个变量的类型。 将 var 关键字放在括号外。 以下示例在析构由 QueryCityData 方法返回的三元组时使用类型推理。 public static void Main() { var (city, population, area) = QueryCityData(\u0026#34;New York City\u0026#34;); // Do something with the data. } 还可在括号内将 var 关键字单独与任一或全部变量声明结合使用。 public static void Main() { (string city, var population, var area) = QueryCityData(\u0026#34;New York City\u0026#34;); // Do something with the data. } public static void Main() { string city = \u0026#34;Raleigh\u0026#34;; int population = 458880; double area = 144.8; (city, population, area) = QueryCityData(\u0026#34;New York City\u0026#34;); // Do something with the data. } 使用弃元的元组元素 析构元组时，通常只需要关注某些元素的值。 可以利用 C# 对弃元的支持，弃元是一种仅能写入的变量，且其值将被忽略。 在赋值中，通过下划线字符 (_) 指定弃元。 可弃元任意数量的值，且均由单个弃元 _ 表示。\nusing System; public class ExampleDiscard { public static void Main() { var (_, _, _, pop1, _, pop2) = QueryCityDataForYears(\u0026#34;New York City\u0026#34;, 1960, 2010); Console.WriteLine($\u0026#34;Population change, 1960 to 2010: {pop2 - pop1:N0}\u0026#34;); } private static (string, double, int, int, int, int) QueryCityDataForYears(string name, int year1, int year2) { int population1 = 0, population2 = 0; double area = 0; if (name == \u0026#34;New York City\u0026#34;) { area = 468.48; if (year1 == 1960) { population1 = 7781984; } if (year2 == 2010) { population2 = 8175133; } return (name, area, year1, population1, year2, population2); } return (\u0026#34;\u0026#34;, 0, 0, 0, 0, 0); } } // The example displays the following output: // Population change, 1960 to 2010: 393,149 ","permalink":"https://www.heiok.top/posts/tutorial/csharp%E6%9E%90%E6%9E%84%E5%85%83%E7%BB%84/","summary":"\u003ch2 id=\"析构元组和其他类型\"\u003e析构元组和其他类型\u003c/h2\u003e\n\u003cp\u003e元组提供一种从方法调用中检索多个值的轻量级方法。 但是，一旦检索到元组，就必须处理它的各个元素。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eExample\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Main()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e result = QueryCityData(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;New York City\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e city = result.Item1;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e pop = result.Item2;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e size = result.Item3;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e         \u003cspan style=\"color:#75715e\"\u003e// Do something with the data.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003edouble\u003c/span\u003e) QueryCityData(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e name)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (name == \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;New York City\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e (name, \u003cspan style=\"color:#ae81ff\"\u003e8175133\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e468.48\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e (\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e从对象检索多个字段值和属性值可能同样麻烦：必须按成员逐个将字段值或属性值赋给一个变量。\u003c/p\u003e","title":"CSharp析构元组"},{"content":"类型系统 C# 是一种强类型语言。 每个变量和常量都有一个类型，每个求值的表达式也是如此。 每个方法声明都为每个输入参数和返回值指定名称、类型和种类（值、引用或输出）\n主要类别 值类型和引用类型是 C# 类型的两个主要类别。 值类型的变量包含类型的实例。 它不同于引用类型的变量，后者包含对类型实例的引用。\n1.值类型 所谓值类型就是包含一个实际数据的量。当定义一个值类型的变量是，C#会根据他所声明的类型，以堆栈方式分配一块大小相适应的存储区域给这个变量，随后对这个变量的读写操作就直接在这块内存区域进行。\nC#中的值类型包括：简单类型、枚举类型和结构类型。废话不多说，一张表胜过千言万语。\n2.引用类型 一个引用类型的变量不存储它们所代表的实际数据，而是存储实际数据的引用。引用类型包括类、接口、数组、object、string ，委托。直接上图。\n注：object是C#中所有类型的根类，string类型是一个从object类直接继承的密封类型。\n描述 类 创建对象 虽然它们有时可以互换使用，但类和对象是不同的概念。 类定义对象类型，但不是对象本身。 对象是基于类的具体实体，有时称为类的实例。\n可通过使用 new 关键字，后跟类的名称来创建对象，如下所示：\nCustomer object1 = new Customer(); 创建类的实例后，会将一个该对象的引用传递回程序员。 在上一示例中，object1 是对基于 Customer 的对象的引用。 该引用指向新对象，但不包含对象数据本身。 事实上，可以创建对象引用，而完全无需创建对象本身\n构造函数和初始化 创建类型的实例时，需要确保其字段和属性已初始化为有用的值。 可通过多种方式初始化值：\n接受默认值 字段初始化表达式 构造函数参数 对象初始值设定项 类继承 类完全支持继承，这是面向对象的编程的基本特点。 创建类时，可以从其他任何未定义为 sealed （sealed 修饰符可阻止其他类继承自该类）的类继承。 其他类可以从你的类继承并替代类虚拟方法。 此外，你可以实现一个或多个接口。\npublic class Manager : Employee { // Employee fields, properties, methods and events are inherited // New Manager fields, properties, methods and events go here... } 类声明包括基类时，它会继承基类除构造函数外的所有成员\nC# 中的类只能直接从基类继承。 但是，因为基类本身可能继承自其他类，因此类可能间接继承多个基类。 此外，类可以支持实现一个或多个接口。 有关详细信息，请参阅接口。\n类可以声明为 abstract。 抽象类包含抽象方法，抽象方法包含签名定义但不包含实现。 抽象类不能实例化。 只能通过可实现抽象方法的派生类来使用该类。 与此相反，密封类不允许其他类继承。 有关详细信息，请参阅抽象类、密封类和类成员。\n记录 接口 泛型类和方法 ","permalink":"https://www.heiok.top/posts/tutorial/csharp%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/","summary":"\u003ch2 id=\"类型系统\"\u003e类型系统\u003c/h2\u003e\n\u003cp\u003eC# 是一种强类型语言。 每个变量和常量都有一个类型，每个求值的表达式也是如此。 每个方法声明都为每个输入参数和返回值指定名称、类型和种类（值、引用或输出）\u003c/p\u003e\n\u003ch3 id=\"主要类别\"\u003e主要类别\u003c/h3\u003e\n\u003cp\u003e值类型和引用类型是 C# 类型的两个主要类别。 值类型的变量包含类型的实例。 它不同于引用类型的变量，后者包含对类型实例的引用。\u003c/p\u003e\n\u003ch4 id=\"1值类型\"\u003e1.值类型\u003c/h4\u003e\n\u003cp\u003e所谓值类型就是包含一个实际数据的量。当定义一个值类型的变量是，C#会根据他所声明的类型，以堆栈方式分配一块大小相适应的存储区域给这个变量，随后对这个变量的读写操作就直接在这块内存区域进行。\u003c/p\u003e","title":"Csharp中的类型系统"},{"content":"委托和lambda 委托定义了一种引用类型，表示对具有特定参数列表和返回类型的方法的引用。 其参数列表和返回类型匹配的方法（静态或实例）分配给该类型的变量，然后（使用适当参数）直接调用该方法，或将其作为参数本身传递给另一方法再进行调用。 以下示例演示了委托的用法。\nusing System; using System.Linq; public class Program { public delegate string Reverse(string s); static string ReverseString(string s) { return new string(s.Reverse().ToArray()); } static void Main(string[] args) { Reverse rev = ReverseString; Console.WriteLine(rev(\u0026#34;a string\u0026#34;)); } } public delegate string Reverse(string s); 行创建某种方法的委托类型，即接受字符串参数并返回字符串参数的方法。 static string ReverseString(string s) 方法与定义的委托类型具有完全相同的参数和返回类型，用于实现委托。 Reverse rev = ReverseString; 行显示可将方法分配给相应委托类型的变量。 Console.WriteLine(rev(\u0026quot;a string\u0026quot;)); 行演示如何使用委托类型的变量来调用委托。 为简化开发过程，.NET 包含一组委托类型，程序员可重用这些类型而无需创建新类型。 这些类型是 Func\u0026lt;\u0026gt;、Action\u0026lt;\u0026gt; 和 Predicate\u0026lt;\u0026gt;，可以使用它们而无需定义新的委托类型。 这三种类型之间有一些区别，与它们的预期使用方式有关：\nAction\u0026lt;\u0026gt; 用于需要使用委托参数执行操作的情况。 它所封装的方法不返回值。（类似与java中的消费者函数） Func\u0026lt;\u0026gt; 通常用于现有转换的情况，也就是说需要将委托参数转换为其他结果时。 投影是一个很好的示例。 它所封装的方法返回指定值。 （类似与java中的function） Predicate\u0026lt;\u0026gt; 用于需要确定参数是否满足委托条件的情况。 它也可以编写为 Func\u0026lt;T, bool\u0026gt;，这意味着方法返回布尔值。（类似于断定型接口） [Test] public void TMain2() { List\u0026lt;int\u0026gt; dataList = new List\u0026lt;int\u0026gt;(); for (int i = 0; i \u0026lt; 101; i++) { dataList.Add(i); } // 使用匿名委托筛选出3的倍数 List\u0026lt;int\u0026gt; ints = dataList.FindAll(delegate(int no) { return no % 3 == 0; }); foreach (int item in ints) { Console.WriteLine(item); } Console.WriteLine(\u0026#34;使用lambda\u0026#34;); // 使用lambda List\u0026lt;int\u0026gt; all = dataList.FindAll(x=\u0026gt; x%3 ==0); foreach (int item in all) { Console.WriteLine(item); } } 如你所见，该委托的正文只是一组表达式，其他所有委托也是如此。 但它并非单独定义，而是在调用 List.FindAll 方法时临时引入。\n但是，即使使用此方法，仍有许多可以丢弃的代码。 此时就需要使用 lambda 表达式。 lambda 表达式（或简称“lambda”）在 C# 3.0 中作为语言集成查询 (LINQ) 的核心构建基块被引入。 这种表达式只是使用委托的更方便的语法。 它们将声明参数列表和方法正文，但在分配到委托之前没有自己的正式标识。 与委托不同，可将其作为事件注册的右侧内容或在各种 LINQ 子句和方法中直接分配。\n由于 lambda 表达式只是指定委托的另一种方式，因此应可重新编写上述示例，令其使用 lambda 表达式而不是匿名委托。\n","permalink":"https://www.heiok.top/posts/tutorial/csharp%E4%B8%AD%E7%9A%84%E5%A7%94%E6%89%98%E4%B8%8Elambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A6%82%E8%BF%B0/","summary":"\u003ch2 id=\"委托和lambda\"\u003e委托和lambda\u003c/h2\u003e\n\u003cp\u003e委托定义了一种\u003cstrong\u003e引用类型\u003c/strong\u003e，表示对具有特定参数列表和返回类型的方法的引用。 其参数列表和返回类型匹配的方法（静态或实例）分配给该类型的变量，然后（使用适当参数）直接调用该方法，或将其作为参数本身传递给另一方法再进行调用。 以下示例演示了委托的用法。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e System;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e System.Linq;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eProgram\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edelegate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e Reverse(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e s);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e ReverseString(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e s)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e(s.Reverse().ToArray());\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Main(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e[] args)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Reverse rev = ReverseString;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(rev(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;a string\u0026#34;\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003epublic delegate string Reverse(string s);\u003c/code\u003e 行创建某种方法的委托类型，即接受字符串参数并返回字符串参数的方法。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estatic string ReverseString(string s)\u003c/code\u003e 方法与定义的委托类型具有完全相同的参数和返回类型，用于实现委托。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eReverse rev = ReverseString;\u003c/code\u003e 行显示可将方法分配给相应委托类型的变量。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eConsole.WriteLine(rev(\u0026quot;a string\u0026quot;));\u003c/code\u003e 行演示如何使用委托类型的变量来调用委托。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e为简化开发过程，.NET 包含一组委托类型，程序员可重用这些类型而无需创建新类型。 这些类型是 \u003ccode\u003eFunc\u0026lt;\u0026gt;\u003c/code\u003e、\u003ccode\u003eAction\u0026lt;\u0026gt;\u003c/code\u003e 和 \u003ccode\u003ePredicate\u0026lt;\u0026gt;\u003c/code\u003e，可以使用它们而无需定义新的委托类型。 这三种类型之间有一些区别，与它们的预期使用方式有关：\u003c/p\u003e","title":"CSharp中的委托与lambda表达式概述"},{"content":"position（定位） position \u0026mdash; 作为css属性三巨头（position、display、float ）之一，它的作用是用来决定元素在文档中的定位方式。其属性值有五种，分别是 \u0026mdash; static（正常定位）、relative（相对定位）、absolute（绝对定位）、fixed（固定定位）、sticky（粘性定位）。\nstatic（正常定位） static(正常定位) 是元素position属性的默认值，包含此属性的元素遵循常规流。\n正常定位呈现常规流的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;正常定位呈现常规流的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; * { margin: 12px; background-color: white; } .block { background-color: #f00; } .inline { display: inline; background-color: #ff0; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;block\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;block\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 正常定位呈现常规流的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/ddd2d2122e7f9aad765471eda3c22007.png)\n当元素的position属性值为static 时，元素的top、right、bottom、left、z-index属性都不会生效。\n元素正常定位未添加top、right、bottom、left属性的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;元素正常定位未添加top、right、bottom、left属性的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } div { width: 100px; height: 100px; background-color: #f00; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 元素正常定位未添加top、right、bottom、left属性的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/adba5c3d00e5d932fe21bc7ffe930236.png)\n元素正常定位且添加top、right、bottom、left属性的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;元素正常定位且添加top、right、bottom、left属性的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } div { top: 120px; right: 120px; bottom: 120px; left: 120px; width: 100px; height: 100px; background-color: #f00; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 元素正常定位且添加top、right、bottom、left属性的示例效果图：\n![[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-lYSF5k4E-1618034530223)(./assest/img2.png)\\ ] ](https: //i-blog.csdnimg.cn/blog_migrate/d8c44e1ab24a2611ee5c88ff82519d92.png) 元素正常定位下，无论有无添加top、right、bottom、left属性，红色背景的div元素相对于body元素的边框都没有任何的位置变化，由此可以说明当元素的position属性值为static时，元素的top、right、bottom、left属性值不会生效。\n正常定位的元素与相对定位的元素重叠的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;正常定位的元素与相对定位的元素重叠的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } div { width: 100px; height: 100px; } #static { position: static; background-color: #f00; z-index: 999; } #relative { position: relative; top: -100px; left: 0; background-color: #ff0; z-index: 1; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;static\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;relative\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 正常定位的元素与相对定位的元素重叠的示例效果图：\n![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/c07c65e723cf5e6e10581dd657023cf3.png)\nID为static的元素的z-index属性值明显高于ID为relative的元素。同理，在z轴，ID为static的元素应该比ID为relative的元素更靠近用户，事实上却是ID为relative的元素更靠近用户。\n正常定位的元素与相对定位的元素重叠，但相对定位的元素的z-index值小于0时的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;正常定位的元素与相对定位的元素重叠，但相对定位的元素的z-index值小于0时的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } div { width: 100px; height: 100px; } #static { position: static; background-color: #f00; z-index: 999; } #relative { position: relative; top: -100px; left: 0; background-color: #ff0; z-index: -1; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;static\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;relative\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 正常定位的元素与相对定位的元素重叠，但相对定位的元素的z-index值小于0时的示例效果图：\n![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/70a065ded81a40f0207447570b504a71.png)\n将ID为relative的元素的z-index属性值修改负数后，在z轴ID为static的元素比ID为relative的元素更靠近用户,结合ID为relative的元素的z-index属性值为正数的情况，得出position属性值为static时，元素的z-index是不会受到设置值影响的^ 2 {#fnref2 }^。\nrelative（相对定位） postion属性值为relative(相对定位) 的元素在不设置top、right、bottom、left 这些属性时，其自身在文档中的定位效果与static并无区别，但加上top、right、bottom、left 这些属性后，便会相对于自身在常规流中的位置进行定位。\n在上文中阐述static时用到的ID为relative的元素用的就是相对定位，从其对应的效果图可以看出，虽然元素中含有值为-100px的top属性，将元素显示的位置相对于自身在常规流中的位置往上移动了100像素，但其自身在常规流中的位置仍然保留。\nID为relative的元素在常规流中的位置仍然保留的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/4f32a189693ccfeac7192e08fa2358b7.png)\n相对定位的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;相对定位的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } div { width: 100px; height: 100px; position: relative; } #div1 { background-color: red; } #div2 { background-color: black; top: 100px; left: 100px; } #div3 { background-color: gray; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;div1\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;div2\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;div3\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 相对定位的示例效果图：\n![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/f8f9195ebd427989857e2d7c1aef17cd.png)\n这里三个元素盒子都是用的相对定位：红色盒子因为没有设置top、right、bottom、left属性，其定位在自身在常规流中的位置；黑色盒子因为包含值均为100px的top和left两属性，所以其定位在相对于自身在常规流先靠下100像素，再靠右100像素的位置上；灰色盒子和红色盒子一样，没有设置top、right、bottom、left属性，但因黑色盒子在常规流中的位置仍然保留，所以灰色盒子所占位置并没有紧靠在红色盒子的下方，而是出现在距离红色盒子底部100像素的位置上。\nabsolute（绝对定位） absolute（绝对定位）与relative（相对定位）之间的区别是：relative（相对定位）并没有脱离文档流，而absolute（绝对定位）脱离了文档流；relative（相对定位）相对于自身在常规流中的位置进行偏移定位，而absolute（绝对定位）相对于离自身最近的定位祖先元素的位置进行偏移定位。\n先解释何为脱离常规流，笔者将正常定位呈现常规流的示例html代码略作修改，得到：\n绝对定位脱离常规流的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;绝对定位脱离常规流的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; * { margin: 12px; background-color: white; } .block { background-color: #f00; } .inline { display: inline; background-color: #ff0; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;block\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;block\u0026#34; style=\u0026#34;position: absolute;\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34; style=\u0026#34;position: absolute;\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;inline\u0026#34;\u0026gt;Fatman\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 绝对定位脱离常规流的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/3e022cff1c6d26ce2778aeebb886c0fd.png) 从效果图中可以看出，添加了position属性值为absolute的块级元素并没有按预期独占一行，且同样添加了position属性值为absolute的行内元素也并没有按预期在每行中按从左至右的顺序依次排放元素。并且因为笔者没有给两个使用绝对定位的元素设置top、right、bottom、left属性，所以布局有种说不上来的诡异。\n再说何为定位祖先元素：比如相对定位的元素中是相对于在常规流中的位置进行偏移定位，top、right、bottom、left属性的参考系是元素在常规流中的位置，而在绝对定位的元素中的参考系就是定位祖先元素。拥有相对定位属性值的祖先元素可以充当拥有绝对定位属性值的子孙元素的定位祖先元素。如果子孙元素没有定位祖先元素，会一直回溯到body元素，使用body元素充当自己的定位祖先元素。\n相对定位元素充当绝对定位元素的定位祖先元素实现垂直水平居中的示例html代码：\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;相对定位元素充当绝对定位元素实现垂直水平居中的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } .parent { position: relative; width: 300px; height: 300px; background-color: #ff0; } .son { position: absolute; width: 100px; height: 100px; background-color: #f00; top: 50%; left: 50%; transform: translate(-50%, -50%); } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;parent\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;son\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 相对定位元素充当绝对定位元素的定位祖先元素实现垂直水平居中的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/499124a9a6e22c2cbcd9ae847794561c.png) 红色盒子（绝对定位元素）在其定位祖先元素黄色盒子（相对定位元素）中垂直水平居中。\nbody充当绝对定位元素的定位祖先元素实现垂直水平居中的示例html：\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;body充当绝对定位元素实现垂直水平居中的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } .center { position: absolute; width: 100px; height: 100px; background-color: #f00; top: 50%; left: 50%; transform: translate(-50%, -50%); } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;center\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; body充当绝对定位元素的定位祖先元素实现垂直水平居中的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/aa6ca6a02bf005b92d44050b0096b6a3.png) 红色盒子（绝对定位元素）在其定位祖先元素body中垂直水平居中。\nfixed（固定定位） fixed（固定定位）和absolute（绝对定位）很像，但也有两点不同：absolute（绝对定位）相对于定位祖先元素进行偏移定位，而fixed（固定定位）相对于窗口进行偏移定位；absolute（绝对定位）的定位祖先元素可以是相对定位的元素，而fixed（固定定位）的定位祖先元素只能是窗口。\n固定定位实现垂直水平居中的示例html代码：\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;固定定位实现垂直水平居中的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; height: 1000px; } .center { position: fixed; width: 100px; height: 100px; background-color: #f00; top: 50%; left: 50%; transform: translate(-50%, -50%); } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;center\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 固定定位实现垂直水平居中的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/21aba4a522c073812b029d01a8760e73.gif) 尽管上下滑动，却不会影响到红色盒子（固定定位元素）在视窗中垂直水平居中。\n相对定位元素企图充当固定定位元素的定位祖先元素实现垂直水平居中的示例html代码：\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;相对定位元素企图充当固定定位元素的定位祖先元素实现垂直水平居中的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 12px; } .parent { position: relative; width: 300px; height: 300px; background-color: #ff0; } .son { position: fixed; width: 100px; height: 100px; background-color: #f00; top: 50%; left: 50%; transform: translate(-50%, -50%); } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;parent\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;son\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 相对定位元素企图充当固定定位元素的定位祖先元素实现垂直水平居中的示例效果图：\n![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/30319891a66c51eba44cf62e998f0209.png) 相对定位元素并不能作为固定定位元素的参照物。\nsticky（粘性定位） sticky（粘性定位）类似relative和fixed的结合，当元素设置position属性为sticky时，如果top、right、bottom、left四个属性都不设置具体值，sticky（粘性定位）不会生效，其表现效果与static一致^ 3 {#fnref3 }^。 当在top、right、bottom、left四个属性中至少设置一个具体值时，元素具备两种状态 \u0026mdash; 类似relative（相对定位状态）和类似fixed（固定定位状态） 。以top: 10px为例 ：当元素相对于窗口顶部的距离大于10px时，元素处于类似relative（相对定位状态） ，一旦元素相对于窗口顶部的距离小于或等于10px时，元素立马切换到类似fixed（固定定位状态）\n粘性定位的示例html代码：\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta name=\u0026#34;charset\u0026#34; content=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;粘性定位的示例\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; body { border: 1px solid black; padding: 32px; margin: 32px; height: 1000px; } div { width: 100px; height: 100px; position: relative; } #div1 { background-color: red; } #div2 { background-color: black; position: sticky; top: 100px; left: 100px; padding: 0; margin: 0; } #div3 { background-color: gray; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;div1\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;div2\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;div3\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 粘性定位的示例效果图： ![在这里插入图片描述 ](https: //i-blog.csdnimg.cn/blog_migrate/ba009e5731c9c7338d0e5496a083bae1.gif) 在上下滚动视窗时，设置了粘性定位的黑色盒子会随着视窗一起滚动，直到触发条件top: 100px，便\u0026quot;粘住\u0026quot;在距离窗口顶部100像素的位置上。\n不过这里有两点需要注意： 1.当粘性定位的元素处于类似relative（相对定位状态）时，它并不是单纯的相对于自身在常规流中的位置进行的偏移定位； 2.当粘性定位的元素处于类似fixed（固定定位状态）时，它在常规流中的位置仍然保留。\n关于第一点，当粘性定位的示例中黑色盒子的left属性值小于等于65像素（32px + 32px + 1px）时，黑色盒子都位于其在常规流的位置上，而当粘性定位的示例中黑色盒子的left属性值大于65像素（32px + 32px + 1px）时,黑色盒子将相对于其在常规流的位置的（left设定值减去65像素）进行定位。 关于第二点，当黑色盒子\u0026quot;粘住\u0026quot;时，红色盒子与灰色盒子之间的间隙并没有消除，由此得出黑色盒子在常规流中的位置仍然保留。\n尾言 笔者才疏学浅，如有错误之处，还望不吝赐教。\n将窗体自上而下分成一行一行，块级元素独占一行、 行内元素在每行中按从左至右的顺序依次排放元素，当超过父布局最大宽度后自动换行。 ↩︎ 笔者推测这时的z-index应该是固定值 \u0026mdash; 0或1。 ↩︎ 当相对定位的元素的top、right、bottom、left四个属性都不设置具体值，其表现效果也与正常定位的元素一致。\n","permalink":"https://www.heiok.top/posts/tutorial/css%E8%AF%A6%E8%A7%A3position%E4%BA%94%E7%A7%8D%E5%B1%9E%E6%80%A7%E7%94%A8%E6%B3%95%E5%8F%8A%E5%85%B6%E5%90%AB%E4%B9%89/","summary":"\u003ch2 id=\"position定位\"\u003eposition（定位）\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eposition\u003c/strong\u003e \u0026mdash; 作为css属性三巨头（\u003cem\u003eposition、display、float\u003c/em\u003e ）之一，它的作用是用来决定元素在文档中的定位方式。其属性值有五种，分别是 \u0026mdash; static（正常定位）、relative（相对定位）、absolute（绝对定位）、fixed（固定定位）、sticky（粘性定位）。\u003c/p\u003e","title":"css详解position五种属性用法及其含义"},{"content":"有一说一DDD真tM抽象:看一遍真是看不懂。\n简单理解值对象和实体的区别： 实体具有唯一标识符，就是主键\n值对象无法单独存在，一定是依附于一个实体\n举个栗子, 地址的三个属性必须同时存在，缺少一个地址属性就没意义了。\nclass girlfriend { string height; string weight; string location; } class location { string country; string city; string street; } 那么深入一些：值对象存在的意义 是 把领域知识 放到类的定义中。\n实现方式有2种 1. \u0026ldquo;从属实体类型（owned entities）\u0026quot;：使用Fluent API中的OwnsOne等方法来配置。\n2、在EF Core中，实体的属性可以定义为枚举类型，枚举类型的属性在数据库中默认是以整数类型来保存的。对于直接操作数据库的人员来讲，0、1、2这样的值没有\u0026quot;CNY\u0026rdquo;（人民币）、\u0026ldquo;USD\u0026rdquo;（美元）、\u0026ldquo;NZD\u0026rdquo;（新西兰元）等这样的字符串类型值可读性更强。EF Core中可以在Fluent API中用HasConversion\u0026lt;string\u0026gt;()把枚举类型的值配置成保存为字符串。（看图二）\n方式2 建议：值对象 定义为 record类型\n​class ​是主要常用类型，属于引用类型，可以继承，可以多态，还可以定义抽象类。我们用的最多的。在进行两个类对象==操作时，默认比较的是对象的引用地址是否相等。\n​struct ​是很早C语言就开始使用的数据结构，一般用于简单的数据，不能继承和多态，属于值类型，比较时，默认是进行类型相同并且里面的字段值相等。可以对每个成员变量进行比特位的控制，用于与C程序库中的数据类型进行互相通信时会使用，比如PInvoke时候就常用。\n​​record ​​新增的类型，默认==操作是进行类型判断和成员值全部相等，也属于值类型。默认初始化之后，其成员数据是无法修改的。可以使用with快速方便的在复制一个副本时修改其中某些成员的值。但是其实现的复制是潜复制。\n方式1 栗子：将坐标（经纬度）定义为值对象，设置构造函数，好处是在构造中就可以进行校验\n这就是领域知识封装到一个类里面 ！因为其他人是不知道经纬度的合法数值的！ record Geo{ public double Longitude { get; init; } public double Latitude { get; init; } public Geo(double longitude, double latitude) { if(longitude\u0026lt;-180||longitude\u0026gt;180) throw new ArgumentException(\u0026#34;longitude invalid\u0026#34;); if (latitude \u0026lt; -90 || latitude \u0026gt; 90) throw new ArgumentException(\u0026#34;longitude invalid\u0026#34;); this.Longitude = longitude; this.Latitude = latitude; } 注意，Location是一个从属实体属性 ，所以需要配置\n看，配置完之后，数据库存储时候会将Location展开为2个列，并且附加到shop表内。\n再次复习一下为什么两个 构造器 一个private 一个public！ ","permalink":"https://www.heiok.top/posts/tutorial/dddabpef-core-%E5%AE%9E%E7%8E%B0%E5%80%BC%E5%AF%B9%E8%B1%A1value-object/","summary":"\u003cp\u003e有一说一DDD真tM抽象:看一遍真是看不懂。\u003c/p\u003e\n\u003ch3 id=\"简单理解值对象和实体的区别\"\u003e简单理解值对象和实体的区别：\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e实体具有\u003cstrong\u003e唯一标识符\u003c/strong\u003e，就是主键\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e值对象\u003cstrong\u003e无法单独存在\u003c/strong\u003e，一定是依附于一个实体\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e举个栗子, 地址的三个属性必须同时存在，缺少一个地址属性就没意义了。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cs\" data-lang=\"cs\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egirlfriend\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e height;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e weight;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e location;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elocation\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e country;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e city;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e street;    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cstrong\u003e那么深入一些：值对象存在的意义 是 把领域知识 放到类的定义中。\u003c/strong\u003e\u003c/p\u003e","title":"DDD/ABP/EF Core 实现值对象Value Object"},{"content":"\ndocker介绍及常用命令大全 Docker介绍 1.什么是Docker 2.Docker的特点 3.Docker与虚拟机的区别 Docker命令 1.docker基础命令 2.docker镜像命令 3.docker容器命令 Docker介绍 1.什么是Docker Docker是一个开源的应用容器引擎，它基于go语言开发，并遵从Apache2.0开源协议。使用Docker可以让开发者封装他们的应用以及依赖包到一个可移植的容器中，然后发布到任意的Linux机器上，也可以实现虚拟化。Docker容器完全使用沙箱机制，相互之间不会有任何接口，这保证了容器之间的安全性。\nDocker诞生于2013年初，目前有两个版本，Community Edition（CE，社区版）和Enterprise Edition（EE，企业版）。其中Docker社区版是免费开源的，对于个人和小团队来说是比较理想的选择；Docker企业版则是收费的，是专门为企业和大型IT团队提供的，用于要求比较严格的商业应用中。\n对于初学者而言，使用Docker社区版就足以满足需求。\n2.Docker的特点 在学习一项技术时，了解该技术的特点才能更好地实际运用。Docker作为当前主流的一个开源容器引擎，其主要特点如下。\n1．更快速的交付和部署\n开发者可以使用一个标准的Docker镜像来构建一套开发容器，开发完成之后，运维人员可以直接使用这个容器来部署代码。Docker可以快速创建容器以及快速迭代应用程序，并让整个过程全程可见，使团队中的其他成员更容易理解应用程序是如何创建和工作的。Docker容器轻，且启动速度快，可以大量地节约开发、测试和部署的时间。\n2．更高效的虚拟化\nDocker容器在运行时，不需要额外的虚拟机程序的支持。由于它是内核级的虚拟化，所以可以实现更高的性能和效率。\n3．更轻松的迁移和扩展\nDocker容器几乎可以在任意的平台上运行，包括物理机、虚拟机、公有云、私有云、个人电脑和服务器等。这种良好的兼容性可以让用户把一个应用程序从一个平台直接迁移到另外一个平台，十分有利于应用的迁移和扩展。\n4．更简单的管理\n使用Docker，只需要小小的修改，就可以替代以往大量的更新工作。所有的修改都以增量的方式被分发和更新，从而实现自动化并且高效的管理。\n除上述几个特点外，Docker还具职责的逻辑分离、适合与面向服务的架构配合使用等特点，这里就不做具体说明了，读者在学习过程中可以深入体会。\n3.Docker与虚拟机的区别 了解了Docker的概念和特点后，相信很多人对Docker与虚拟机的区别会产生疑惑，那么他们到底有什么不同呢？下面通过一张对比图来说明两者的主要区别，如图1所示。\n图1 Docker与虚拟机对比\n从图1的对比中可以看出，虚拟机是运行在每个应用层级的客户端操作系统上的，这是资源密集型的。由于产生的磁盘镜像和应用程序的操作系统设置相互交叉，所以导致虚拟机对系统的依赖性很强，一旦系统出现问题，虚拟机依赖的文件以及安全补丁等都可能会出现文件丢失的情况。\nDocker中的容器是基于进程的隔离 ，多个容器可以共享单个内核，并且创建Docker容器的镜像所需要的配置并不依赖于宿主机系统。正是因为容器直接配置的隔离性，容器之间就没有配置交叉，所以Docker的应用可以运行在任何地方。\nDocker命令 docker中的镜像就像是咱们java 中的Class ，而容器呢 是基于这个镜像构建出的实例 类似于咱java 中 根据Class构造出的一个个实例对象 ，理解有误还请见谅\u0026hellip;\n按我理解 简言之\ndocker 镜像： ----java中 class docker容器 ： ----java中 class new 出来的实例对象 本篇文章不仅仅是生硬的命令大全，也是我个人对docker学习使用的一步步总结，通过一个个示例来加深对docker相关命令的理解以及记忆。\n1.docker基础命令 启动docker\nsystemctl start docker 关闭docker\nsystemctl stop docker 重启docker\nsystemctl restart docker docker设置随服务启动而自启动\nsystemctl enable docker 查看docker 运行状态\n\u0026mdash;\u0026mdash;如果是在运行中输入命令后会看到绿色的active\nsystemctl status docker 查看docker 版本号信息\ndocker version docker info docker 帮助命令\n忘记了某些命令便可使用此进行查看与回顾\ndocker --help docker pull --help {#2docker_121}2.docker镜像命令 docker search 镜像id或name：在Docker Hub（或其他镜像仓库如阿里镜像）仓库中搜索关键字的镜像\ndocker pull 镜像id或name：从仓库中下载镜像，若要指定版本，则要在冒号后指定\ndocker images：列出已经下载的镜像，查看镜像\ndocker rmi 镜像id或name：删除本地镜像\ndocker rmi -f 镜像id或name: 删除镜像\ndocker build：构建镜像\n查看自己服务器中docker 镜像列表\ndocker images 搜索镜像\ndocker search 镜像名 docker search --filter=STARS=9000 mysql 搜索 STARS \u0026gt;9000的 mysql 镜像 拉取镜像 不加tag(版本号) 即拉取docker仓库中该镜像的最新版本latest，加:tag则是拉取指定版本\ndocker pull 镜像名 docker pull 镜像名:tag 拉取最新版 mysql（不指定版本号默认拉取最新版）\ndocker pull mysql 咱再来拉取一个指定版本号 镜像 至于版本号呢 可以在docker hub中查看\ndocker官方镜像搜索\n比如：拉取 mysql 5.7.40\ndocker pull mysql:5.7.40 运行镜像 \u0026mdash;-比如拉取一个tomcat 跑起来试一试\ndocker pull tomcat 如下图所示：拉取了tomcat最新版本\ndocker run 镜像名 docker run 镜像名:Tag 3.docker容器命令 docker ps：列出运行中的容器\ndocker ps -a ： 查看所有容器，包括未运行\ndocker stop 容器id或name：停止容器\ndocker kill 容器id：强制停止容器\ndocker start 容器id或name：启动已停止的容器\ndocker inspect 容器id：查看容器的所有信息\ndocker container logs 容器id：查看容器日志\ndocker top 容器id：查看容器里的进程\ndocker exec -it 容器id /bin/bash：进入容器\nexit：退出容器\ndocker rm 容器id或name：删除已停止的容器\ndocker rm -f 容器id：删除正在运行的容器\ndocker exec -it 容器ID sh :进入容器\n","permalink":"https://www.heiok.top/posts/tutorial/docker%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8%E8%B6%85%E8%AF%A6%E7%BB%86/","summary":"\u003cbr /\u003e\n\u003ch4 id=\"docker介绍及常用命令大全\"\u003edocker介绍及常用命令大全\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#Docker_5\"\u003eDocker介绍\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#1Docker_7\"\u003e1.什么是Docker\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#2Docker_15\"\u003e2.Docker的特点\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#3Docker_36\"\u003e3.Docker与虚拟机的区别\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#Docker_49\"\u003eDocker命令\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#1docker_62\"\u003e1.docker基础命令\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#2docker_121\"\u003e2.docker镜像命令\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#3docker_182\"\u003e3.docker容器命令\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr /\u003e\n\u003chr\u003e\n\u003ch2 id=\"docker介绍\"\u003eDocker介绍\u003c/h2\u003e\n\u003ch3 id=\"1什么是docker\"\u003e1.什么是Docker\u003c/h3\u003e\n\u003cp\u003eDocker是一个开源的应用容器引擎，它基于go语言开发，并遵从Apache2.0开源协议。使用Docker可以让开发者封装他们的应用以及依赖包到一个可移植的容器中，然后发布到任意的Linux机器上，也可以实现虚拟化。Docker容器完全使用沙箱机制，相互之间不会有任何接口，这保证了容器之间的安全性。\u003c/p\u003e","title":"docker介绍及常用命令大全（超详细）"},{"content":".NET中实现读写分离 什么是读写分离 读写分离是一种数据库架构设计模式，将数据库读操作和写操作分离到不同的数据库实例上执行。主数据库（Master）处理写操作和一些重要的读操作，而从数据库（Slave/Replica）处理大部分读操作。这种模式可以提高系统的并发处理能力，优化数据库负载。\n读写分离的优势 提高系统性能：分担数据库负载，提高并发处理能力 提高系统可用性：主库故障时，从库可以继续提供读服务 便于数据备份：可以在从库进行备份，不影响主库性能 扩展性强：可以根据读请求的增长方便地添加更多从库 在.NET中实现读写分离的方法 方法一：使用ADO.NET手动实现 public class DatabaseManager { private readonly string _masterConnectionString; private readonly string _slaveConnectionString; public DatabaseManager(string masterConnectionString, string slaveConnectionString) { _masterConnectionString = masterConnectionString; _slaveConnectionString = slaveConnectionString; } public SqlConnection GetWriteConnection() { var connection = new SqlConnection(_masterConnectionString); connection.Open(); return connection; } public SqlConnection GetReadConnection() { var connection = new SqlConnection(_slaveConnectionString); connection.Open(); return connection; } public async Task\u0026lt;T\u0026gt; ExecuteWriteOperationAsync\u0026lt;T\u0026gt;(Func\u0026lt;SqlConnection, Task\u0026lt;T\u0026gt;\u0026gt; operation) { using (var connection = GetWriteConnection()) { return await operation(connection); } } public async Task\u0026lt;T\u0026gt; ExecuteReadOperationAsync\u0026lt;T\u0026gt;(Func\u0026lt;SqlConnection, Task\u0026lt;T\u0026gt;\u0026gt; operation) { using (var connection = GetReadConnection()) { return await operation(connection); } } } 方法二：使用Entity Framework Core实现 1. 创建多个DbContext public class ReadDbContext : AppDbContext { public ReadDbContext(DbContextOptions\u0026lt;ReadDbContext\u0026gt; options) : base(options) { } } public class WriteDbContext : AppDbContext { public WriteDbContext(DbContextOptions\u0026lt;WriteDbContext\u0026gt; options) : base(options) { } } public class AppDbContext : DbContext { public AppDbContext(DbContextOptions options) : base(options) { } public DbSet\u0026lt;User\u0026gt; Users { get; set; } // 其他实体... } 2. 在Startup.cs注册服务 public void ConfigureServices(IServiceCollection services) { // 注册写库上下文 services.AddDbContext\u0026lt;WriteDbContext\u0026gt;(options =\u0026gt; options.UseSqlServer(Configuration.GetConnectionString(\u0026#34;MasterConnection\u0026#34;))); // 注册读库上下文 services.AddDbContext\u0026lt;ReadDbContext\u0026gt;(options =\u0026gt; options.UseSqlServer(Configuration.GetConnectionString(\u0026#34;SlaveConnection\u0026#34;))); // ...其他服务注册 } 3. 创建仓储模式实现读写分离 public interface IUserRepository { Task\u0026lt;User\u0026gt; GetByIdAsync(int id); Task\u0026lt;IEnumerable\u0026lt;User\u0026gt;\u0026gt; GetAllAsync(); Task AddAsync(User user); Task UpdateAsync(User user); Task DeleteAsync(int id); } public class UserRepository : IUserRepository { private readonly ReadDbContext _readContext; private readonly WriteDbContext _writeContext; public UserRepository(ReadDbContext readContext, WriteDbContext writeContext) { _readContext = readContext; _writeContext = writeContext; } public async Task\u0026lt;User\u0026gt; GetByIdAsync(int id) { return await _readContext.Users.FindAsync(id); } public async Task\u0026lt;IEnumerable\u0026lt;User\u0026gt;\u0026gt; GetAllAsync() { return await _readContext.Users.ToListAsync(); } public async Task AddAsync(User user) { await _writeContext.Users.AddAsync(user); await _writeContext.SaveChangesAsync(); } public async Task UpdateAsync(User user) { _writeContext.Users.Update(user); await _writeContext.SaveChangesAsync(); } public async Task DeleteAsync(int id) { var user = await _writeContext.Users.FindAsync(id); if (user != null) { _writeContext.Users.Remove(user); await _writeContext.SaveChangesAsync(); } } } 方法三：使用第三方库实现读写分离 使用EntityFramework Plus // 安装包 // Install-Package Z.EntityFramework.Plus.EFCore // 配置 public void ConfigureServices(IServiceCollection services) { services.AddDbContext\u0026lt;AppDbContext\u0026gt;(options =\u0026gt; options.UseSqlServer(Configuration.GetConnectionString(\u0026#34;DefaultConnection\u0026#34;))); // 配置EF+的读写分离 services.AddEFSecondLevelCache(); services.AddScoped\u0026lt;DbContextReadWriteManager\u0026gt;(); } // 实现读写管理器 public class DbContextReadWriteManager { private readonly AppDbContext _context; private readonly IConfiguration _configuration; public DbContextReadWriteManager(AppDbContext context, IConfiguration configuration) { _context = context; _configuration = configuration; } public IQueryable\u0026lt;T\u0026gt; AsReadOnly\u0026lt;T\u0026gt;() where T : class { // 使用SecondLevelCache缓存查询结果 return _context.Set\u0026lt;T\u0026gt;().AsNoTracking().FromCache(); } public DbSet\u0026lt;T\u0026gt; AsWritable\u0026lt;T\u0026gt;() where T : class { return _context.Set\u0026lt;T\u0026gt;(); } } 方法四：使用.NET 6+的中间件实现读写分离 1. 创建自定义中间件 public class ReadWriteSeparationMiddleware { private readonly RequestDelegate _next; private readonly IConfiguration _configuration; public ReadWriteSeparationMiddleware(RequestDelegate next, IConfiguration configuration) { _next = next; _configuration = configuration; } public async Task InvokeAsync(HttpContext context, AppDbContext dbContext) { // 根据HTTP方法判断是读操作还是写操作 bool isReadOperation = context.Request.Method == \u0026#34;GET\u0026#34;; if (isReadOperation) { // 设置读库连接字符串 dbContext.Database.GetDbConnection().ConnectionString = _configuration.GetConnectionString(\u0026#34;SlaveConnection\u0026#34;); } else { // 设置写库连接字符串 dbContext.Database.GetDbConnection().ConnectionString = _configuration.GetConnectionString(\u0026#34;MasterConnection\u0026#34;); } await _next(context); } } // 扩展方法 public static class ReadWriteSeparationMiddlewareExtensions { public static IApplicationBuilder UseReadWriteSeparation(this IApplicationBuilder builder) { return builder.UseMiddleware\u0026lt;ReadWriteSeparationMiddleware\u0026gt;(); } } 2. 在Startup.cs中配置中间件 public void Configure(IApplicationBuilder app, IWebHostEnvironment env) { // 其他中间件... app.UseReadWriteSeparation(); app.UseEndpoints(endpoints =\u0026gt; { endpoints.MapControllers(); }); } 方法五：使用Dapper实现读写分离 public class DapperReadWriteRepository { private readonly string _masterConnectionString; private readonly string _slaveConnectionString; public DapperReadWriteRepository(IConfiguration configuration) { _masterConnectionString = configuration.GetConnectionString(\u0026#34;MasterConnection\u0026#34;); _slaveConnectionString = configuration.GetConnectionString(\u0026#34;SlaveConnection\u0026#34;); } public async Task\u0026lt;IEnumerable\u0026lt;T\u0026gt;\u0026gt; QueryAsync\u0026lt;T\u0026gt;(string sql, object param = null) { using (var connection = new SqlConnection(_slaveConnectionString)) { await connection.OpenAsync(); return await connection.QueryAsync\u0026lt;T\u0026gt;(sql, param); } } public async Task\u0026lt;T\u0026gt; QuerySingleAsync\u0026lt;T\u0026gt;(string sql, object param = null) { using (var connection = new SqlConnection(_slaveConnectionString)) { await connection.OpenAsync(); return await connection.QuerySingleAsync\u0026lt;T\u0026gt;(sql, param); } } public async Task\u0026lt;int\u0026gt; ExecuteAsync(string sql, object param = null) { using (var connection = new SqlConnection(_masterConnectionString)) { await connection.OpenAsync(); return await connection.ExecuteAsync(sql, param); } } } 方法六：使用SqlSugar实现读写分离 SqlSugar是一个轻量级的.NET ORM框架，它内置了对读写分离的支持。\n1. 安装SqlSugar包 Install-Package SqlSugar 2. 配置主从数据库 public class SqlSugarContext { private static SqlSugarScope _db; public static SqlSugarScope Db { get { if (_db == null) { _db = new SqlSugarScope(new ConnectionConfig() { ConnectionString = \u0026#34;Server=master-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, DbType = DbType.SqlServer, InitKeyType = InitKeyType.Attribute, IsAutoCloseConnection = true, SlaveConnectionConfigs = new List\u0026lt;SlaveConnectionConfig\u0026gt;() { // 配置从库连接 new SlaveConnectionConfig{ ConnectionString = \u0026#34;Server=slave1-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, HitRate = 10 // 权重 }, new SlaveConnectionConfig{ ConnectionString = \u0026#34;Server=slave2-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, HitRate = 10 // 权重 } } }); } return _db; } } } 3. 使用读写分离 public class UserRepository { // 读操作自动使用从库 public async Task\u0026lt;List\u0026lt;User\u0026gt;\u0026gt; GetAllUsersAsync() { return await SqlSugarContext.Db.Queryable\u0026lt;User\u0026gt;().ToListAsync(); } public async Task\u0026lt;User\u0026gt; GetUserByIdAsync(int id) { return await SqlSugarContext.Db.Queryable\u0026lt;User\u0026gt;().InSingleAsync(id); } // 写操作使用主库 public async Task AddUserAsync(User user) { await SqlSugarContext.Db.Insertable(user).ExecuteCommandAsync(); } public async Task UpdateUserAsync(User user) { await SqlSugarContext.Db.Updateable(user).ExecuteCommandAsync(); } public async Task DeleteUserAsync(int id) { await SqlSugarContext.Db.Deleteable\u0026lt;User\u0026gt;().In(id).ExecuteCommandAsync(); } } 4. 高级配置：自定义读写逻辑 public async Task\u0026lt;User\u0026gt; GetUserWithCustomLogicAsync(int id) { // 强制使用主库进行查询（适用于对一致性要求高的场景） var user = await SqlSugarContext.Db.Ado.UseMasterOrElse(()=\u0026gt; { return SqlSugarContext.Db.Queryable\u0026lt;User\u0026gt;().InSingleAsync(id); }); return user; } // 使用事务时也会自动切换到主库 public async Task TransferAsync(int fromUserId, int toUserId, decimal amount) { try { // 开启事务自动使用主库 SqlSugarContext.Db.Ado.BeginTran(); var fromUser = await SqlSugarContext.Db.Queryable\u0026lt;User\u0026gt;().InSingleAsync(fromUserId); var toUser = await SqlSugarContext.Db.Queryable\u0026lt;User\u0026gt;().InSingleAsync(toUserId); fromUser.Balance -= amount; toUser.Balance += amount; await SqlSugarContext.Db.Updateable(fromUser).ExecuteCommandAsync(); await SqlSugarContext.Db.Updateable(toUser).ExecuteCommandAsync(); SqlSugarContext.Db.Ado.CommitTran(); } catch (Exception ex) { SqlSugarContext.Db.Ado.RollbackTran(); throw; } } 5. 配置负载均衡策略 SqlSugar支持两种负载均衡策略：\n轮询策略：按顺序分配查询到从库 // 配置轮询策略 new SqlSugarScope(new ConnectionConfig() { // 主库配置... SlaveConnectionConfigs = slaveConnections, // 默认为轮询策略，可以不设置 SlaveLoadBalancer = new RoundRobinSqlSugarLoadBalancer() }); 权重策略：根据HitRate权重分配查询 // 配置权重策略，根据SlaveConnectionConfig中的HitRate进行分配 new SqlSugarScope(new ConnectionConfig() { // 主库配置... SlaveConnectionConfigs = slaveConnections, SlaveLoadBalancer = new WeightSqlSugarLoadBalancer() }); 6. 与依赖注入集成 // 在Startup.cs中注册SqlSugar服务 public void ConfigureServices(IServiceCollection services) { // 注册SqlSugar服务 services.AddSingleton\u0026lt;ISqlSugarClient\u0026gt;(sp =\u0026gt; { var config = new ConnectionConfig() { ConnectionString = Configuration.GetConnectionString(\u0026#34;MasterConnection\u0026#34;), DbType = DbType.SqlServer, InitKeyType = InitKeyType.Attribute, IsAutoCloseConnection = true, SlaveConnectionConfigs = new List\u0026lt;SlaveConnectionConfig\u0026gt;() { new SlaveConnectionConfig{ ConnectionString = Configuration.GetConnectionString(\u0026#34;SlaveConnection1\u0026#34;), HitRate = 10 }, new SlaveConnectionConfig{ ConnectionString = Configuration.GetConnectionString(\u0026#34;SlaveConnection2\u0026#34;), HitRate = 10 } } }; return new SqlSugarScope(config); }); // 注册仓储 services.AddScoped\u0026lt;IUserRepository, UserRepository\u0026gt;(); // 其他服务注册... } 7. 多租户场景下的读写分离 public class MultiTenantDbContext { public static SqlSugarScope GetDb() { return new SqlSugarScope(new List\u0026lt;ConnectionConfig\u0026gt;() { // 租户1的配置（包含读写分离） new ConnectionConfig() { ConfigId = \u0026#34;tenant1\u0026#34;, ConnectionString = \u0026#34;Server=tenant1-master;Database=Tenant1Db;User Id=sa;Password=YourPassword;\u0026#34;, DbType = DbType.SqlServer, IsAutoCloseConnection = true, SlaveConnectionConfigs = new List\u0026lt;SlaveConnectionConfig\u0026gt;() { new SlaveConnectionConfig{ ConnectionString = \u0026#34;Server=tenant1-slave;Database=Tenant1Db;User Id=sa;Password=YourPassword;\u0026#34;, HitRate = 10 } } }, // 租户2的配置（包含读写分离） new ConnectionConfig() { ConfigId = \u0026#34;tenant2\u0026#34;, ConnectionString = \u0026#34;Server=tenant2-master;Database=Tenant2Db;User Id=sa;Password=YourPassword;\u0026#34;, DbType = DbType.SqlServer, IsAutoCloseConnection = true, SlaveConnectionConfigs = new List\u0026lt;SlaveConnectionConfig\u0026gt;() { new SlaveConnectionConfig{ ConnectionString = \u0026#34;Server=tenant2-slave;Database=Tenant2Db;User Id=sa;Password=YourPassword;\u0026#34;, HitRate = 10 } } } }); } } // 使用多租户 public async Task\u0026lt;List\u0026lt;User\u0026gt;\u0026gt; GetTenantUsersAsync(string tenantId) { var db = MultiTenantDbContext.GetDb(); return await db.GetConnection(tenantId).Queryable\u0026lt;User\u0026gt;().ToListAsync(); } SqlSugar的读写分离实现简单高效，自动根据操作类型（查询/增删改）来选择合适的数据库连接，无需开发人员手动管理连接。它内置的负载均衡策略也可以灵活应对不同规模的系统需求。\n负载均衡策略 在实现读写分离时，如果有多个从库，可以实现不同的负载均衡策略：\n1. 轮询策略（Round Robin） public class RoundRobinLoadBalancer { private readonly List\u0026lt;string\u0026gt; _slaveConnectionStrings; private int _currentIndex = 0; private readonly object _lock = new object(); public RoundRobinLoadBalancer(IConfiguration configuration) { _slaveConnectionStrings = configuration.GetSection(\u0026#34;SlaveConnections\u0026#34;) .Get\u0026lt;List\u0026lt;string\u0026gt;\u0026gt;(); } public string GetConnection() { lock (_lock) { if (_currentIndex \u0026gt;= _slaveConnectionStrings.Count) { _currentIndex = 0; } return _slaveConnectionStrings[_currentIndex++]; } } } 2. 随机策略（Random） public class RandomLoadBalancer { private readonly List\u0026lt;string\u0026gt; _slaveConnectionStrings; private readonly Random _random = new Random(); public RandomLoadBalancer(IConfiguration configuration) { _slaveConnectionStrings = configuration.GetSection(\u0026#34;SlaveConnections\u0026#34;) .Get\u0026lt;List\u0026lt;string\u0026gt;\u0026gt;(); } public string GetConnection() { int index = _random.Next(0, _slaveConnectionStrings.Count); return _slaveConnectionStrings[index]; } } 3. 权重策略（Weighted） public class WeightedLoadBalancer { private readonly List\u0026lt;SlaveDatabase\u0026gt; _slaveDatabases; private readonly Random _random = new Random(); public WeightedLoadBalancer(IConfiguration configuration) { _slaveDatabases = configuration.GetSection(\u0026#34;SlaveDatabases\u0026#34;) .Get\u0026lt;List\u0026lt;SlaveDatabase\u0026gt;\u0026gt;(); } public string GetConnection() { int totalWeight = _slaveDatabases.Sum(db =\u0026gt; db.Weight); int randomValue = _random.Next(1, totalWeight + 1); int weightSum = 0; foreach (var database in _slaveDatabases) { weightSum += database.Weight; if (randomValue \u0026lt;= weightSum) { return database.ConnectionString; } } // 默认返回第一个 return _slaveDatabases.First().ConnectionString; } } public class SlaveDatabase { public string ConnectionString { get; set; } public int Weight { get; set; } } 数据一致性处理 读写分离面临的主要挑战是数据一致性。主库和从库之间的数据同步存在延迟，可能导致从库读取到旧数据。\n处理数据一致性的策略： 延迟容忍：对于可以容忍数据延迟的业务，直接从从库读取 强一致性要求：对于要求强一致性的业务，从主库读取 会话一致性：在同一会话内，写操作后的读操作都路由到主库 public class ConsistencyAwareRepository { private readonly ReadDbContext _readContext; private readonly WriteDbContext _writeContext; private readonly IHttpContextAccessor _httpContextAccessor; public ConsistencyAwareRepository( ReadDbContext readContext, WriteDbContext writeContext, IHttpContextAccessor httpContextAccessor) { _readContext = readContext; _writeContext = writeContext; _httpContextAccessor = httpContextAccessor; } public async Task\u0026lt;User\u0026gt; GetByIdAsync(int id) { // 检查会话状态，判断是否需要从主库读取 if (HasRecentWriteOperation()) { return await _writeContext.Users.FindAsync(id); } return await _readContext.Users.FindAsync(id); } private bool HasRecentWriteOperation() { // 检查会话中是否有标记表明最近有写操作 return _httpContextAccessor.HttpContext.Session.GetString(\u0026#34;HasRecentWrite\u0026#34;) == \u0026#34;true\u0026#34;; } public async Task AddAsync(User user) { await _writeContext.Users.AddAsync(user); await _writeContext.SaveChangesAsync(); // 标记当前会话有写操作 _httpContextAccessor.HttpContext.Session.SetString(\u0026#34;HasRecentWrite\u0026#34;, \u0026#34;true\u0026#34;); } } 读写分离配置示例（appsettings.json） { \u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;MasterConnection\u0026#34;: \u0026#34;Server=master-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, \u0026#34;SlaveConnection\u0026#34;: \u0026#34;Server=slave-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34; }, \u0026#34;SlaveConnections\u0026#34;: [ \u0026#34;Server=slave1-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, \u0026#34;Server=slave2-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, \u0026#34;Server=slave3-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34; ], \u0026#34;SlaveDatabases\u0026#34;: [ { \u0026#34;ConnectionString\u0026#34;: \u0026#34;Server=slave1-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, \u0026#34;Weight\u0026#34;: 5 }, { \u0026#34;ConnectionString\u0026#34;: \u0026#34;Server=slave2-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, \u0026#34;Weight\u0026#34;: 3 }, { \u0026#34;ConnectionString\u0026#34;: \u0026#34;Server=slave3-server;Database=MyDatabase;User Id=sa;Password=YourPassword;\u0026#34;, \u0026#34;Weight\u0026#34;: 2 } ] } 读写分离最佳实践 合理划分读写操作：明确区分哪些操作是读操作，哪些是写操作 处理数据一致性问题：根据业务需求选择合适的数据一致性策略 监控主从延迟：定期检查主从同步状态，避免数据延迟过大 合理设置连接池：根据读写比例配置主从数据库的连接池大小 异常处理机制：当从库不可用时，应有降级策略（如切换到主库） 分布式事务处理：在涉及多个数据源的事务中，确保事务的一致性 总结 .NET中实现读写分离有多种方式，可以根据项目需求和复杂度选择合适的实现方法。无论采用哪种方式，都需要注意数据一致性、异常处理和负载均衡等问题。读写分离是提高系统性能和可用性的重要手段，但也增加了系统的复杂度，需要权衡利弊后再决定是否采用。\nsqlsugar 具体实现 using Myblog.Entity.Enties; using Myblog.Entity.Enties.Interface; using NLog; using SqlSugar; namespace Myblog.WebApi.Extension; /// \u0026lt;summary\u0026gt; /// sqlsugar配置 /// \u0026lt;/summary\u0026gt; public static class SqlsugarExtension { public static void AddSqlsugar(this WebApplicationBuilder builder) { // 注册SqlSugar builder.Services.AddSingleton\u0026lt;ISqlSugarClient\u0026gt;(s =\u0026gt; { Console.WriteLine(\u0026#34;初始化数据库配置\u0026#34;); // 配置主从库连接 List\u0026lt;SlaveConnectionConfig\u0026gt; slaveConnectionConfigs = new List\u0026lt;SlaveConnectionConfig\u0026gt;(); // 添加从库配置 string? slaveConnection = builder.Configuration.GetSection(\u0026#34;ConnectionStrings:MySqlSlave\u0026#34;).Value; if (!string.IsNullOrEmpty(slaveConnection)) { slaveConnectionConfigs.Add(new SlaveConnectionConfig { ConnectionString = slaveConnection, HitRate = 10 // 访问权重 }); } SqlSugarScope sqlSugar = new SqlSugarScope(new ConnectionConfig() { DbType = SqlSugar.DbType.MySql, InitKeyType = InitKeyType.Attribute, ConnectionString = builder.Configuration.GetSection(\u0026#34;ConnectionStrings:MySql\u0026#34;).Value, // 主库连接字符串 IsAutoCloseConnection = true, SlaveConnectionConfigs = slaveConnectionConfigs, // 从库配置 }, db =\u0026gt; { //单例参数配置，所有上下文生效 db.Aop.OnLogExecuting = (sql, pars) =\u0026gt; { // 获取完整的 SQL 语句（替换参数） var fullSql = sql; foreach (var parameter in pars) { // 根据参数类型处理替换 var value = parameter.Value?.ToString(); if (parameter.DbType == System.Data.DbType.String || parameter.DbType == System.Data.DbType.DateTime || parameter.DbType == System.Data.DbType.Date) { value = $\u0026#34;\u0026#39;{value}\u0026#39;\u0026#34;; } fullSql = fullSql.Replace(parameter.ParameterName, value ?? \u0026#34;NULL\u0026#34;); } // 获取当前执行的数据库类型（主库/从库） string dbType = \u0026#34;Master\u0026#34;; if (sql.Contains(\u0026#34;/*Slave*/\u0026#34;)) { dbType = \u0026#34;Slave\u0026#34;; } var logger = LogManager.GetCurrentClassLogger(); DateTime date = DateTime.Now.Date.ToLocalTime(); Console.WriteLine($\u0026#34;===================SQL开始:{date}====================\u0026#34;); Console.WriteLine($\u0026#34;当前使用数据库: {dbType}\u0026#34;); logger.Info($\u0026#34;OP:SQL:[{dbType}]\\r\\n{fullSql}\u0026#34;); Console.WriteLine(\u0026#34;===================SQL结束====================\u0026#34;); }; }); // 初始化数据库 string? initDatabasevalue = builder.Configuration.GetSection(\u0026#34;ConnectionStrings:InitDatabase\u0026#34;).Value; bool initDatabase; bool.TryParse(initDatabasevalue, out initDatabase); if (initDatabase) { sqlSugar.DbMaintenance.CreateDatabase(); // 初始化表 Type[] types = typeof(Albums).Assembly.GetTypes() .Where(it =\u0026gt; it.IsClass \u0026amp;\u0026amp; !it.IsAbstract \u0026amp;\u0026amp; typeof(IEntity).IsAssignableFrom(it)) .ToArray(); foreach (var type in types) { Console.WriteLine(\u0026#34;初始化\u0026#34; + type.Name); } sqlSugar.CodeFirst.InitTables(types); } return sqlSugar; }); } } 编写拓展方法实现具体的读写操作使用库 using SqlSugar; namespace Myblog.Repository { /// \u0026lt;summary\u0026gt; /// 数据库读写分离扩展方法 /// \u0026lt;/summary\u0026gt; public static class DatabaseExtensions { /// \u0026lt;summary\u0026gt; /// 获取主库查询对象（用于写操作） /// \u0026lt;/summary\u0026gt; public static ISugarQueryable\u0026lt;T\u0026gt; AsMaster\u0026lt;T\u0026gt;(this ISugarQueryable\u0026lt;T\u0026gt; queryable) where T : class, new() { return queryable.AS(\u0026#34;Master\u0026#34;); } /// \u0026lt;summary\u0026gt; /// 获取从库查询对象（用于读操作） /// \u0026lt;/summary\u0026gt; public static ISugarQueryable\u0026lt;T\u0026gt; AsSlave\u0026lt;T\u0026gt;(this ISugarQueryable\u0026lt;T\u0026gt; queryable) where T : class, new() { return queryable.AS(\u0026#34;Slave\u0026#34;); } /// \u0026lt;summary\u0026gt; /// 使用从库执行查询（带缓存） /// \u0026lt;/summary\u0026gt; public static ISugarQueryable\u0026lt;T\u0026gt; AsSlaveWithCache\u0026lt;T\u0026gt;(this ISugarQueryable\u0026lt;T\u0026gt; queryable, int cacheDurationInSeconds = 60) where T : class, new() { return queryable.WithCache(cacheDurationInSeconds).AS(\u0026#34;Slave\u0026#34;); } } } 在基础仓储层配置读写操作 #region 写操作 - 使用主库 public async Task\u0026lt;bool\u0026gt; AddAsync(T entity) { return await base.InsertAsync(entity); } public async Task\u0026lt;bool\u0026gt; DeleteAsync(long id) { return await base.DeleteByIdAsync(id); } public async Task\u0026lt;bool\u0026gt; UpdateAsync(T entity) { return await base.UpdateAsync(entity); } #endregion #region 读操作 - 使用从库 public async Task\u0026lt;T\u0026gt; FindAsync(long id) { // 使用从库查询 return await Context.Queryable\u0026lt;T\u0026gt;().AsSlaveWithCache().InSingleAsync(id); } public async Task\u0026lt;List\u0026lt;T\u0026gt;\u0026gt; QueryAsync() { // 使用从库查询 return await Context.Queryable\u0026lt;T\u0026gt;().AsSlaveWithCache().ToListAsync(); } public async Task\u0026lt;List\u0026lt;T\u0026gt;\u0026gt; FindPageListAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt;? func) { // 使用从库查询 if (func == null) { return await Context.Queryable\u0026lt;T\u0026gt;().AsSlaveWithCache().ToListAsync(); } return await Context.Queryable\u0026lt;T\u0026gt;().AsSlaveWithCache().Where(func).ToListAsync(); } public async Task\u0026lt;List\u0026lt;T\u0026gt;\u0026gt; PageListAsync(int page, int size, RefAsync\u0026lt;int\u0026gt; total) { // 使用从库查询 return await Context.Queryable\u0026lt;T\u0026gt;().AsSlave().ToPageListAsync(page, size, total); } public async Task\u0026lt;List\u0026lt;T\u0026gt;\u0026gt; PageListAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; func, int page, int size, RefAsync\u0026lt;int\u0026gt; total) { // 使用从库查询 return await Context.Queryable\u0026lt;T\u0026gt;() .AsSlave() .Where(func) .ToPageListAsync(page, size, total); } #endregion ","permalink":"https://www.heiok.top/posts/tutorial/dotnet-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E5%AE%9E%E7%8E%B0/","summary":"\u003ch1 id=\"net中实现读写分离\"\u003e.NET中实现读写分离\u003c/h1\u003e\n\u003ch2 id=\"什么是读写分离\"\u003e什么是读写分离\u003c/h2\u003e\n\u003cp\u003e读写分离是一种数据库架构设计模式，将数据库读操作和写操作分离到不同的数据库实例上执行。主数据库（Master）处理写操作和一些重要的读操作，而从数据库（Slave/Replica）处理大部分读操作。这种模式可以提高系统的并发处理能力，优化数据库负载。\u003c/p\u003e\n\u003ch2 id=\"读写分离的优势\"\u003e读写分离的优势\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e提高系统性能\u003c/strong\u003e：分担数据库负载，提高并发处理能力\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e提高系统可用性\u003c/strong\u003e：主库故障时，从库可以继续提供读服务\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e便于数据备份\u003c/strong\u003e：可以在从库进行备份，不影响主库性能\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e扩展性强\u003c/strong\u003e：可以根据读请求的增长方便地添加更多从库\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"在net中实现读写分离的方法\"\u003e在.NET中实现读写分离的方法\u003c/h2\u003e\n\u003ch3 id=\"方法一使用adonet手动实现\"\u003e方法一：使用ADO.NET手动实现\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDatabaseManager\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e _masterConnectionString;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e _slaveConnectionString;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e DatabaseManager(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e masterConnectionString, \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e slaveConnectionString)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _masterConnectionString = masterConnectionString;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _slaveConnectionString = slaveConnectionString;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e SqlConnection GetWriteConnection()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e connection = \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e SqlConnection(_masterConnectionString);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        connection.Open();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e connection;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e SqlConnection GetReadConnection()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e connection = \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e SqlConnection(_slaveConnectionString);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        connection.Open();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e connection;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task\u0026lt;T\u0026gt; ExecuteWriteOperationAsync\u0026lt;T\u0026gt;(Func\u0026lt;SqlConnection, Task\u0026lt;T\u0026gt;\u0026gt; operation)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e connection = GetWriteConnection())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e operation(connection);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task\u0026lt;T\u0026gt; ExecuteReadOperationAsync\u0026lt;T\u0026gt;(Func\u0026lt;SqlConnection, Task\u0026lt;T\u0026gt;\u0026gt; operation)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e connection = GetReadConnection())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e operation(connection);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"方法二使用entity-framework-core实现\"\u003e方法二：使用Entity Framework Core实现\u003c/h3\u003e\n\u003ch4 id=\"1-创建多个dbcontext\"\u003e1. 创建多个DbContext\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eReadDbContext\u003c/span\u003e : AppDbContext\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e ReadDbContext(DbContextOptions\u0026lt;ReadDbContext\u0026gt; options) : \u003cspan style=\"color:#66d9ef\"\u003ebase\u003c/span\u003e(options)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eWriteDbContext\u003c/span\u003e : AppDbContext\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e WriteDbContext(DbContextOptions\u0026lt;WriteDbContext\u0026gt; options) : \u003cspan style=\"color:#66d9ef\"\u003ebase\u003c/span\u003e(options)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eAppDbContext\u003c/span\u003e : DbContext\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e AppDbContext(DbContextOptions options) : \u003cspan style=\"color:#66d9ef\"\u003ebase\u003c/span\u003e(options)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e DbSet\u0026lt;User\u0026gt; Users { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 其他实体...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"2-在startupcs注册服务\"\u003e2. 在Startup.cs注册服务\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e ConfigureServices(IServiceCollection services)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 注册写库上下文\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    services.AddDbContext\u0026lt;WriteDbContext\u0026gt;(options =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        options.UseSqlServer(Configuration.GetConnectionString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MasterConnection\u0026#34;\u003c/span\u003e)));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 注册读库上下文\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    services.AddDbContext\u0026lt;ReadDbContext\u0026gt;(options =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        options.UseSqlServer(Configuration.GetConnectionString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SlaveConnection\u0026#34;\u003c/span\u003e)));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// ...其他服务注册\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"3-创建仓储模式实现读写分离\"\u003e3. 创建仓储模式实现读写分离\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eIUserRepository\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Task\u0026lt;User\u0026gt; GetByIdAsync(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e id);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Task\u0026lt;IEnumerable\u0026lt;User\u0026gt;\u0026gt; GetAllAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Task AddAsync(User user);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Task UpdateAsync(User user);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Task DeleteAsync(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e id);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eUserRepository\u003c/span\u003e : IUserRepository\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e ReadDbContext _readContext;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e WriteDbContext _writeContext;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e UserRepository(ReadDbContext readContext, WriteDbContext writeContext)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _readContext = readContext;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _writeContext = writeContext;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task\u0026lt;User\u0026gt; GetByIdAsync(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _readContext.Users.FindAsync(id);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task\u0026lt;IEnumerable\u0026lt;User\u0026gt;\u0026gt; GetAllAsync()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _readContext.Users.ToListAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task AddAsync(User user)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _writeContext.Users.AddAsync(user);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _writeContext.SaveChangesAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task UpdateAsync(User user)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _writeContext.Users.Update(user);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _writeContext.SaveChangesAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task DeleteAsync(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e user = \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _writeContext.Users.FindAsync(id);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (user != \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            _writeContext.Users.Remove(user);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _writeContext.SaveChangesAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"方法三使用第三方库实现读写分离\"\u003e方法三：使用第三方库实现读写分离\u003c/h3\u003e\n\u003ch4 id=\"使用entityframework-plus\"\u003e使用EntityFramework Plus\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 安装包\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// Install-Package Z.EntityFramework.Plus.EFCore\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 配置\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e ConfigureServices(IServiceCollection services)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    services.AddDbContext\u0026lt;AppDbContext\u0026gt;(options =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        options.UseSqlServer(Configuration.GetConnectionString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DefaultConnection\u0026#34;\u003c/span\u003e)));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 配置EF+的读写分离\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    services.AddEFSecondLevelCache();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    services.AddScoped\u0026lt;DbContextReadWriteManager\u0026gt;();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 实现读写管理器\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDbContextReadWriteManager\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e AppDbContext _context;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e IConfiguration _configuration;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e DbContextReadWriteManager(AppDbContext context, IConfiguration configuration)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _context = context;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _configuration = configuration;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e IQueryable\u0026lt;T\u0026gt; AsReadOnly\u0026lt;T\u0026gt;() \u003cspan style=\"color:#66d9ef\"\u003ewhere\u003c/span\u003e T : \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 使用SecondLevelCache缓存查询结果\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e _context.Set\u0026lt;T\u0026gt;().AsNoTracking().FromCache();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e DbSet\u0026lt;T\u0026gt; AsWritable\u0026lt;T\u0026gt;() \u003cspan style=\"color:#66d9ef\"\u003ewhere\u003c/span\u003e T : \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e _context.Set\u0026lt;T\u0026gt;();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"方法四使用net-6的中间件实现读写分离\"\u003e方法四：使用.NET 6+的中间件实现读写分离\u003c/h3\u003e\n\u003ch4 id=\"1-创建自定义中间件\"\u003e1. 创建自定义中间件\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eReadWriteSeparationMiddleware\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e RequestDelegate _next;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e IConfiguration _configuration;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e ReadWriteSeparationMiddleware(RequestDelegate next, IConfiguration configuration)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _next = next;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _configuration = configuration;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task InvokeAsync(HttpContext context, AppDbContext dbContext)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 根据HTTP方法判断是读操作还是写操作\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e isReadOperation = context.Request.Method == \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (isReadOperation)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// 设置读库连接字符串\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            dbContext.Database.GetDbConnection().ConnectionString = \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                _configuration.GetConnectionString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SlaveConnection\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// 设置写库连接字符串\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            dbContext.Database.GetDbConnection().ConnectionString = \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                _configuration.GetConnectionString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MasterConnection\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _next(context);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 扩展方法\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eReadWriteSeparationMiddlewareExtensions\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e IApplicationBuilder UseReadWriteSeparation(\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e IApplicationBuilder builder)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e builder.UseMiddleware\u0026lt;ReadWriteSeparationMiddleware\u0026gt;();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"2-在startupcs中配置中间件\"\u003e2. 在Startup.cs中配置中间件\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Configure(IApplicationBuilder app, IWebHostEnvironment env)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 其他中间件...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.UseReadWriteSeparation();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.UseEndpoints(endpoints =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        endpoints.MapControllers();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    });\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"方法五使用dapper实现读写分离\"\u003e方法五：使用Dapper实现读写分离\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-csharp\" data-lang=\"csharp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDapperReadWriteRepository\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e _masterConnectionString;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereadonly\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e _slaveConnectionString;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e DapperReadWriteRepository(IConfiguration configuration)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _masterConnectionString = configuration.GetConnectionString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MasterConnection\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        _slaveConnectionString = configuration.GetConnectionString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SlaveConnection\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task\u0026lt;IEnumerable\u0026lt;T\u0026gt;\u0026gt; QueryAsync\u0026lt;T\u0026gt;(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e sql, \u003cspan style=\"color:#66d9ef\"\u003eobject\u003c/span\u003e param = \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e connection = \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e SqlConnection(_slaveConnectionString))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e connection.OpenAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e connection.QueryAsync\u0026lt;T\u0026gt;(sql, param);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task\u0026lt;T\u0026gt; QuerySingleAsync\u0026lt;T\u0026gt;(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e sql, \u003cspan style=\"color:#66d9ef\"\u003eobject\u003c/span\u003e param = \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e connection = \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e SqlConnection(_slaveConnectionString))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e connection.OpenAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e connection.QuerySingleAsync\u0026lt;T\u0026gt;(sql, param);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e Task\u0026lt;\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\u0026gt; ExecuteAsync(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e sql, \u003cspan style=\"color:#66d9ef\"\u003eobject\u003c/span\u003e param = \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e connection = \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e SqlConnection(_masterConnectionString))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e connection.OpenAsync();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e connection.ExecuteAsync(sql, param);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"方法六使用sqlsugar实现读写分离\"\u003e方法六：使用SqlSugar实现读写分离\u003c/h3\u003e\n\u003cp\u003eSqlSugar是一个轻量级的.NET ORM框架，它内置了对读写分离的支持。\u003c/p\u003e","title":"dotnet 数据库读写分离实现"},{"content":"充血模型的EFCore实现 充血模型的五个需求\n属性是只读的或者只能被类内部的代码修改。 public PhoneNumber PhoneNumber { get; private set;} public void ChangePassword(string password) { if (password.Length \u0026lt;= 3) { throw new ArgumentOutOfRangeException(\u0026#34;密码长度需要大于3\u0026#34;); } this.passwordHash = HashHelper.Hash_2_MD5_16(password, false); } 实现\n属性是只读的或者是只能被类内部的代码修改。 实现:把属性的set定义为private或者init,然后通过构造方法为这些属性赋予初始值。 定义有参数的构造方法。 public Guid Id { get; init; } public PhoneNumber PhoneNumber { get; private set; } //构造函数，在一开始创建对象时就被初始化 public User(PhoneNumber phoneNumber) { this.Id = Guid.NewGuid(); this.PhoneNumber = phoneNumber; this.UserAccessFail = new UserAccessFail(this); } 实现\n定义有参数的构造方法。 原理:EF Core中的实体类如果没有无参的构造方法,则有参的构造方法中的参数的名字必须和属性的 名字一致。 实现方式1:无参构造方法定义为private。 实现方式2:实体类中不定义无参构造方法,只定义有意义的有参构造方法,但是要求构造方法中的参数 的名字和属性的名字一致。 有的成员变量没有对应的属性，但是这些成员变量需要映射为数据表中的列，也就是我们需要把私有的成员变量映射到数据表中的列。 private string? passwordHash; //这个成员变量不需要为外部得知，但是需要保存到数据库中 实现 不属于属性的成员变量映射为数据列。 实现: builder.Property(\u0026#34;成员变量名”) 有的属性是只读的，也就是它的值是从数据库中读取出来的，但是我们不能修改属性的值。 private string ID; //这个属性只能从数据库读出来，不能在数据库以外进行更改。 //内部计算列 实现 从数据列中读取值的只读属性。 EF Core中提供了“支持字段”(backing field)来支持这种写法:在配置实体类的代码中,使用 HasField(“成员变量名”)来配置属性。 有的属性不需要映射到数据列，仅在运行时被使用。 内部使用的属性，不在数据库中生成对应的列 ​ 实现 ​ 有的属性不需要映射到数据列,仅在运行时被使用。 ​ 实现:使用lgnore()来配置忽略这个属性。\n前三种比较常见，后两种并不常见。\n","permalink":"https://www.heiok.top/posts/tutorial/efcore%E5%AE%9E%E7%8E%B0%E5%85%85%E8%A1%80%E6%A8%A1%E5%9E%8B/","summary":"\u003cp\u003e充血模型的EFCore实现\n充血模型的五个需求\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e属性是只读的或者只能被类内部的代码修改。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e PhoneNumber PhoneNumber { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e;}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e ChangePassword(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e password)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (password.Length \u0026lt;= \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e         \u003cspan style=\"color:#66d9ef\"\u003ethrow\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e ArgumentOutOfRangeException(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;密码长度需要大于3\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.passwordHash = HashHelper.Hash_2_MD5_16(password, \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e实现\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e 属性是只读的或者是只能被类内部的代码修改。\n\n 实现:把属性的set定义为private或者init,然后通过构造方法为这些属性赋予初始值。\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e定义有参数的构造方法。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e Guid Id { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003einit\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e PhoneNumber PhoneNumber { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#75715e\"\u003e//构造函数，在一开始创建对象时就被初始化\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e User(PhoneNumber phoneNumber)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.Id = Guid.NewGuid();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.PhoneNumber = phoneNumber;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.UserAccessFail = \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e UserAccessFail(\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e实现\u003c/p\u003e","title":"EfCore实现充血模型"},{"content":" 在进行项目开发时，都会用到版本控制工具，如svn、Git等，随着Git的发展，渐渐的被越来越多的人使用，甚至慢慢在取代svn的地位。下面将从Git仓库的创建 、Git常用的基本命令 、Git的分支管理 、Git查看提交历史 、Git 标签 、Git 远程仓库来介绍Git的使用。当然下面所涉及的命令都是在Git bash中操作的，所有必须先安装Git，至于怎样安装Git，这里就不介绍了，网上有一大把安装教程。\n{#Git__2}Git 创建仓库 创建一个git仓库有如下几种方式：\ngit init：初始化一个git仓库 git clone：clone一个git仓库 下面对这几种方式进行详细介绍：\ngit init\nGit使用git init命令来初始化一个Git仓库，执行完git init命令后，会生成一个.git目录，该目录包含了资源数据，且只会在仓库的根目录生成。 如果用当前目录作为Git仓库，则只需要执行如下命令：\ngit init 执行结果如下：\n执行该命令之后，就可以在当前目录下生成.init文件夹，并且会默认生成一个master分支。\n如果要在指定的目录下生成仓库，则指令如下：\ngit init newDir newDir为仓库的路径，执行完成之后，会在newDir目录下生成一个.git目录。具体的执行结果如下：\n执行该命令之后，就可以在当前目录下生成newtest文件夹，并在改文件夹下生成.init文件夹。\ngit clone\n使用git clone命令可以从Git仓库拷贝项目，类似于SVN中的 svn checkout，命令格式为： git clone \u0026lt;url\u0026gt; [directory] url为git仓库地址，directory为本地目录，比如，要克隆某个Git 代码仓库，可以用下面的命令：\ngit clone git://github.com/schacon/grit.git 执行完成之后会在当前目录下生成仓库，如果要指定目录下生成，则可以在后面加一个具体的位置路径，如：\ngit clone git://github.com/schacon/grit.git newgit 如下为clone一个仓库的执行结果：\ngit clone 时，可以用不同的协议，包括 ssh, git, https 等，其中最常用的是 ssh，因为速度较快，还可以配置公钥免输入密码，各种写法格式如下：\ngit clone git@github.com/schacon/grit.git --SSH协议 git clone git://github.com/schacon/grit.git --GIT协议 git clone https://github.com/schacon/grit.git --HTTPS协议 {#Git__55}Git 基本指令的使用 下面介绍一下git中常用的几种命令：\ngit config：配置信息 git add：添加文件到缓存命令 git status：查看文件的状态命令 git diff：查看更新的详细信息命令 git commit：提交命令 git reset HEAD：取消缓存命令 git rm：删除命令 git mv：移动或重命名命令 下面对这几个命令进行详细介绍：\ngit config\n我们可以通过git config来配置用户名和邮箱地址，便于我们将代码提交到远程仓库，具体格式如下： git config --global user.name \u0026#39;你的用户名\u0026#39; git config --global user.email \u0026#39;你的邮箱\u0026#39; git add\ngit add 命令可将文件添加到缓存，如新项目中，添加所有文件很普遍，可以使用如下命令： git add . 当然我们也可以指定某一类文件，如将java文件添加到缓存中，可以使用如下命令：\nit add *.java 如：我们可以创建两个文件，将它添加的缓存中，具体操作如下：\n3. git status\n我们可以使用 git status 命令来查看相关文件的状态，直接执行如下命令：\ngit status 如果有修改的文件，则执行结果如下：\n根据上面git status命令的提示内容，我们可以得到三种处理情况：\n暂存文件的命令：git add \u0026lt;文件名\u0026gt; 放弃未暂存文件的修改命令：git checkout \u0026ndash; \u0026lt;文件名\u0026gt; 将被修改的文件暂存并提交的命令：git commit -a 如果你对Git的各种状态比较熟悉了，也可以使用 git status -s 来查看简写的状态，这种简写的状态和SVN上的差不多 M - 被修改，A - 被添加，D - 被删除，R - 重命名，?? - 未被跟踪 等等。如果有修改的文件，则执行结果如下：\n4. git diff\n执行 git diff 来查看更新的详细信息，与git status不同的是，git status只显示更新的状态，而 git diff 可以显示已写入缓存与已修改但尚未写入缓存的改动的区别具体的详细信息。\n尚未缓存的改动：git diff 查看已缓存的改动： git diff \u0026ndash;cached 查看已缓存的与未缓存的所有改动：git diff HEAD 显示摘要而非整个 diff：git diff \u0026ndash;stat 如：我们在修改一下test.txt文件内容，使用git diff查看修改详细信息：\n之后我们将修改的内容add到缓存中，再使用git diff查看修改详细信息：\ngit commit\ngit commit 将缓存区内容添加到仓库中，可以在后面加-m选项，以在命令行中提供提交注释，格式如下： git commit -m \u0026#34;第一次版本提交\u0026#34; 如果你觉得 每次 commit之前要add一下，想跳过add这一步，可以直接使用 -a选项,如：\ngit commit -am \u0026#34;第一次版本提交\u0026#34; 如：我们可以创建一个文件，并将它添加打缓存，之后在提交，具体操作如下：\n6. git reset HEAD\ngit reset HEAD 命令用于取消已缓存的内容，如我们要取消已提交的test.txt文件，可以如下使用：\ngit reset HEAD test.txt 执行完之后，再使用commit提交时，test.txt文件不会被提交。\n如：我们先修改test1.txt，test2.txt文件，之后再都添加到缓存，然后再使用git reset HEAD命令恢复test1.txt，最后再使用提交，具体操作如下：\n可以看出，修改的test1文件经过git reset HEAD后，没有被提交上去。简而言之，执行 git reset HEAD 以取消之前 git add 添加。\n7. git rm\n如果只是简单地从工作目录中手工删除文件，运行 git status 时就会在 Changes not staged for commit 的提示。要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除，然后提交。可以如下使用：\ngit rm \u0026lt;file\u0026gt; 如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 -f\ngit rm -f \u0026lt;file\u0026gt; 如果把文件从暂存区域移除，但仍然希望保留在当前工作目录中，换句话说，仅是从跟踪清单中删除，使用 \u0026ndash;cached 选项即可\ngit rm --cached \u0026lt;file\u0026gt; 可以递归删除，即如果后面跟的是一个目录做为参数，则会递归删除整个目录中的所有子目录和文件：\ngit rm --r * 如：我们移除上面所创建的hello.java文件：\ngit mv\ngit mv 命令用于移动或重命名一个文件、目录、软连接，如要将一个test.txt文件重命名为newtest.txt，则可以使用如下命令： git mv test.txt newtest.txt 如：我们将上面的test1.txt文件重命名为test.txt:\n{#Git_171}Git的分支管理 几乎每种版本控制系统都支持分支管理，使用分支我们可以从主干中分离出来，然后继续开发，不影响主干。下面介绍一下Git中分支常用的命令：\ngit branch：查看分支命令 git branch (branchname)：创建分支命令 git checkout (branchname)：切换分支命令 git merge：合并分支命令 git branch -d (branchname)：删除分支命令 下面分别对这些命令进行详细介绍：\ngit branch\ngit branch可以查看分支，也可以创建分支，如果没有参数时，git branch会列出你在本地的分支；如果有参数时，git branch就会创建改参数的分支。 如果要查看分支，命令格式如下：\ngit branch 在bash执行的效果如下图所示：\n当我们想创建分支时，可以在后面加参数，命令格式如下：\ngit branch branchname 如我们想创建一个test的分支，可以如下操作：\n现在我们可以看到，多了一个新的分支test。而master分支在我们执行git init的时候，缺省情况下 Git 就会为你创建 master 分支。\ngit checkout (branchname)\ngit checkout可以切换分支，命令格式如下： git checkout branchname 如果我们想切换到上面刚刚创建的test分支中，可以如下操作：\n可以看到，没有执行之前，当前的分支是master，当执行之后，当前的分支是test，这个时候可以可以在切换后的分支中继续操作，而不会影响到其他分支。\n我们也可以使用 git checkout -b (branchname) 命令来创建新分支并立即切换到该分支下，从而在该分支中操作。如，我们想创建一个newtest分支，并创建后就切换到该分支下，可以如下操作：\n可以看出，执行之前还在master分支中，执行之后，直接进入newtest分支了。\ngit merge\ngit merge命令可以将任意分支合并到到当前分支中去，命令格式如下： git merge branchname 如：我们新建一个newtest分支，并在其中增加test3.txt文件，之后在master中将newtest分支的修改合并到master，结果如下：\n可见master中也存在test3.txt文件了。\n合并冲突\n合并的时候，最大的难点就是冲突了，合并并不仅仅是简单的文件添加、移除的操作，Git 也会合并修改，如果我们在两个分支中同时修改了同一个文件，这时再合并，就可能会产生冲突，冲突并不可怕，可怕的是要怎样去解决，下面以一个小的例子来展示一下合并是冲突的解决。\n还是用上面的那个仓库，现在有两个分支：master、newtest，两个分支中都要test.txt文件，这个时候我们都这个两个仓库的文件都进行修改，之后再提交，最后将newtest合并到master中，具体的操作如下：\n1、先修改分支：master、newtest中的test.txt文件，并提交：\n2、之后再将newtest分支修改的内容合并到master分支中：\n可以看到newtest分支修改的内容和master分支修改的内容发生了冲突，这是根据具体的情况去解决，如下，我们保留两个分支都有的，之后再add，在commit就可以了：\n到此一个简单的合并就完成了。实际项目开发中，合并比这要复杂的多，要结合具体的情况去操作。\ngit branch -d (branchname)\ngit branch -d可以删除分支，删除分支命令格式如下： git branch -d (branchname) 如：我们要删除test分支：\n{#Git_240}Git查看提交历史 在使用 Git 提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，我们可以使用 git log 命令查看，如，我们想列出历史提交记录如下：\n下面介绍查看历史记录的几种选项：\n\u0026ndash;oneline ：查看历史记录的简洁版本 \u0026ndash;graph ：查看历史中什么时候出现了分支、合并 \u0026ndash;reverse ：逆向显示所有日志 \u0026ndash;author ：查找指定用户的提交日志 \u0026ndash;since、\u0026ndash;before、 \u0026ndash;until、\u0026ndash;after： 指定筛选日期 \u0026ndash;no-merges ：选项以隐藏合并提交 我们可以用 \u0026ndash;oneline 选项来查看历史记录的简洁版本：\n我们还可以用 \u0026ndash;graph 选项，查看历史中什么时候出现了分支、合并：\n这样我们可以更清楚明了地看到何时工作分叉、又何时归并，也可以用 \u0026ndash;reverse 参数来逆向显示所有日志：\n如果只想查找指定用户的提交日志可以使用命令：git log \u0026ndash;author , 例如，比方说我们要找 Git 源码中qtqt提交的部分：\n如果你要指定日期，可以执行几个选项：\u0026ndash;since 和 \u0026ndash;before，但是你也可以用 \u0026ndash;until 和 \u0026ndash;after，\u0026ndash;no-merges 选项以隐藏合并提交。\n例如，如果我要看 Git 项目中八月一日前且在七月二十九日之后的所有提交，我可以执行这个：\n多数情况下，了解每条提交与那个分支／标签关联是很有用的。\u0026ndash;decorate 标记让git log展示所有指向每个提交引用（如分支，标签等）,如:\n{#Git__266}Git 标签 使用标签可以很方便的永远的记住那个特别的提交快照，比如：我们发一个新的版本时，可以给它加一个\u0026quot;vx.x\u0026quot;版本，这样你可以使用git tag给它打上标签。\n创建新标签\n可以使用 git tag -a vx.x 来创建一个标签。a 选项意为\u0026quot;创建一个带注解的标签\u0026quot;。 不用 -a 选项也可以执行的，但它不会记录这标签是啥时候打的，谁打的，也不会让你添加个标签的注解。\n如：我们为我们上的例子创建一个标签：\n追加标签\n如果我们忘了给某个提交打标签，又将它发布了，我们可以给它追加标签。如，假设我们发布了提交 d6f7147，但是那时候忘了给它打标签。 我们现在也可以：\n查看标签\n如果我们要查看所有标签可以使用以下命令：\ngit tag 执行结果如下：\n指定标签信息命令：\ngit tag -a \u0026lt;tagname\u0026gt; -m \u0026#34;某某标签\u0026#34; PGP签名标签命令：\ngit tag -s \u0026lt;tagname\u0026gt; -m \u0026#34;某某标签\u0026#34; {#Git__294}Git 远程仓库 前面我们使用到的 Git 命令都是在本地执行，如果你想通过 Git 分享你的代码或者与其他开发人员合作。 你就需要将数据放到一台其他开发人员能够连接的服务器上。本本将使用 Github 作为远程仓库，来介绍Git 远程仓库的使用。\n下面介绍远程仓库常用的几种指令：\ngit remote add：添加远程仓库 git remote：查看当前的远程仓库 git fetch 、git pull：提取远程仓仓库 git push：推送到远程仓库 git remote rm：删除远程仓库 1.git remote add\ngit remote add可以添加一个远程仓库，其命令格式如下：\ngit remote add [alias] [url] 参数[alias]为别名， [url]为远程仓库的地址，如：我们可以将https://github.com/qtqt/test.git\n仓库添加到本地，并命名为test，操作如下：\n2. git remote\ngit remote可以查看当前有哪些远程仓库，执行结果如下：\n可以看出，有上面添加的别名为test仓库。\ngit fetch 、git pull\ngit fetch 可以提取远程仓库的数据，如果有多个远程仓库，我们可以在后面加仓库的别名，操作如下：\n该命令执行完后需要执行git merge 远程分支到你所在的分支。假设你配置好了一个远程仓库，并且你想要提取更新的数据，你可以首先执行 git fetch [alias] 告诉 Git 去获取它有你没有的数据，然后你可以执行 git merge [alias]/[branch] 以将服务器上的任何更新（假设有人这时候推送到服务器了）合并到你的当前分支。操作如下：\n执行完成之后可以在本地仓库找到远程仓库的文件。使用这种方式只能保证本地是一个空的仓库，如果非空，则会报：fatal: refusing to merge unrelated histories错误。 git pull命令用于从另一个存储库或本地分支获取并集成(整合)，在默认模式下，git pull是git fetch后跟git merge FETCH_HEAD的缩写，使用格式：\ngit pull [options] [\u0026lt;repository\u0026gt; [\u0026lt;refspec\u0026gt;...]] 如：我们可以将远程仓库pull到本地，如果本地仓库和远程仓库实际上是独立的两个仓库，\u0026ndash;allow-unrelated-history选项来解决。\ngit fetch 和git pull的区别：\ngit fetch：相当于是从远程获取最新版本到本地，不会自动合并。\ngit pull：相当于是从远程获取最新版本并merge到本地。\ngit push\ngit push 推送你的新分支与数据到某个远端仓库命令，格式如下：\ngit push [alias] [branch] 如：我们可以将前面提交的文件push到远程仓库中：\n5. git remote rm\ngit remote rm删除远程仓库，格式如下：\ngit remote rm [别名] 如：我们可以先添加一个test2仓库，之后再删除它，操作如下：\n好了，到此基本上将Git常用的操作介绍完了。\n","permalink":"https://www.heiok.top/posts/tutorial/git-%E5%B8%B8%E7%94%A8%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E8%AF%A6%E7%BB%86%E5%A4%A7%E5%85%A8/","summary":"\u003cp\u003e  在进行项目开发时，都会用到版本控制工具，如svn、Git等，随着Git的发展，渐渐的被越来越多的人使用，甚至慢慢在取代svn的地位。下面将从\u003cstrong\u003eGit仓库的创建\u003c/strong\u003e 、\u003cstrong\u003eGit常用的基本命令\u003c/strong\u003e 、\u003cstrong\u003eGit的分支管理\u003c/strong\u003e 、\u003cstrong\u003eGit查看提交历史\u003c/strong\u003e 、\u003cstrong\u003eGit 标签\u003c/strong\u003e 、\u003cstrong\u003eGit 远程仓库\u003c/strong\u003e来介绍Git的使用。当然下面所涉及的命令都是在Git bash中操作的，所有必须先安装Git，至于怎样安装Git，这里就不介绍了，网上有一大把安装教程。\u003c/p\u003e","title":"Git 常用基本命令使用详细大全"},{"content":"Git rebase git rebase -i 提交id ,操作提交id后的提交 ，参数： 修改提交信息：将pick替换为reword 合并提交：将多个pick替换为squash 删除提交：直接删除对应的行。 注意：删除至少需要保留一行pick， 需要删除所有的提交可以使用\ngit reset \u0026ndash;hard 提交id ，如果已经提交到远端，可以使用git push \u0026ndash;force 强制提交 git rebase \u0026ndash;onto 提交id 删除提交id后所有的提交 ","permalink":"https://www.heiok.top/posts/tutorial/git-%E5%91%BD%E4%BB%A4/","summary":"\u003ch2 id=\"git-rebase\"\u003eGit rebase\u003c/h2\u003e\n\u003cp\u003egit rebase -i 提交id ,操作提交id后的提交 ，参数：\n修改提交信息：将pick替换为reword \u003cbr\u003e\n合并提交：将多个pick替换为squash\n删除提交：直接删除对应的行。\n注意：删除至少需要保留一行pick，\n需要删除所有的提交可以使用\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003egit reset \u0026ndash;hard 提交id ，如果已经提交到远端，可以使用git push \u0026ndash;force 强制提交\u003c/li\u003e\n\u003cli\u003egit rebase \u0026ndash;onto 提交id  删除提交id后所有的提交\u003c/li\u003e\n\u003c/ol\u003e","title":"Git 命令"},{"content":"##后端Dockerfile\n# 使用 ASP.NET 运行时镜像（根据项目版本调整） FROM mcr.microsoft.com/dotnet/aspnet:6.0 AS base WORKDIR /app # 设置环境变量（可选） #ENV ASPNETCORE_ENVIRONMENT=Production ENV ASPNETCORE_ENVIRONMENT=Development ENV ASPNETCORE_URLS=http://+:5001 # 暴露端口 EXPOSE 5001 # 复制已编译的文件 COPY bin/Release/net6.0/ /app/ # 设置入口点 ENTRYPOINT [\u0026#34;dotnet\u0026#34;, \u0026#34;Myblog.WebApi.dll\u0026#34;] shell #!/bin/bash # 将dockerfile复制过来 cd /var/jenkins_home/workspace/MyBlog/Myblog.WebApi/ #cd /tools/1panel/1panel/apps/jenkins/jenkins/data/workspace/MyBlog/Myblog.WebApi/bin/Release/net6.0/ #cp /tools/1panel/1panel/apps/jenkins/jenkins/data/workspace/Dotnet/Dockerfile ./Dockerfile cp /var/jenkins_home/workspace/Dotnet/Dockerfile ./Dockerfile # 指定镜像名和容器名 IMAGE_NAME=\u0026#34;myblogimg\u0026#34; CONTAINER_NAME=\u0026#34;myblog\u0026#34; # 检查并删除已存在的容器 if [ \u0026#34;$(docker ps -aq -f name=$CONTAINER_NAME)\u0026#34; ]; then echo \u0026#34;删除已存在的容器: $CONTAINER_NAME\u0026#34; docker rm -f $CONTAINER_NAME else echo \u0026#34;容器 $CONTAINER_NAME 不存在\u0026#34; fi # 检查并删除已存在的镜像 if [ \u0026#34;$(docker images -q $IMAGE_NAME)\u0026#34; ]; then echo \u0026#34;删除已存在的镜像: $IMAGE_NAME\u0026#34; docker rmi -f $IMAGE_NAME else echo \u0026#34;镜像 $IMAGE_NAME 不存在\u0026#34; fi pwd # 构建新的 Docker 镜像 echo \u0026#34;构建新的 Docker 镜像: $IMAGE_NAME\u0026#34; docker build -t $IMAGE_NAME . # 创建并运行新的 Docker 容器 echo \u0026#34;创建并运行容器: $CONTAINER_NAME\u0026#34; #docker run -d --name $CONTAINER_NAME --restart=on-failure:5 -p 5001:5001 $IMAGE_NAME docker run -d \\ --name $CONTAINER_NAME \\ --restart=on-failure:5 \\ -p 5001:5001 \\ -v /tools/myblog/logs/:/app/logs/ \\ $IMAGE_NAME 前端-后台Dockerfile FROM nginx:latest EXPOSE 80 WORKDIR /app # 替换nginx配置 COPY nginx.conf /etc/nginx/conf.d/default.conf # 将第一阶段的静态文件复制到nginx中 RUN rm -rf /usr/share/nginx/html RUN mkdir /usr/share/nginx/html COPY dist /usr/share/nginx/html # 运行 CMD [\u0026#34;nginx\u0026#34;, \u0026#34;-g\u0026#34;, \u0026#34;daemon off;\u0026#34;] nginx.conf server { listen 80; listen [::]:80; server_name localhost; access_log /var/log/nginx/host.access.log main; location / { root /usr/share/nginx/html; index index.html index.htm; # 新增下面这句，其他是默认nginx配置 # 解决部分前端框架的路由问题，在浏览器刷新报错404 try_files $uri $uri/ /index.html; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } } shell #!/bin/bash # 将dockerfile复制过来 cd /var/jenkins_home/workspace/BlogWeb-admin-test/ cp /var/jenkins_home/workspace/Dotnet/front_Dockerfile ./Dockerfile cp /var/jenkins_home/workspace/Dotnet/nginx.conf ./nginx.conf cp /var/jenkins_home/workspace/Dotnet/front_admin/dist.zip ./dist.zip unzip -d ./dist dist.zip # 指定镜像名和容器名 IMAGE_NAME=\u0026#34;myblog_web_admin_img\u0026#34; CONTAINER_NAME=\u0026#34;myblog_web_admin\u0026#34; # 检查并删除已存在的容器 if [ \u0026#34;$(docker ps -aq -f name=$CONTAINER_NAME)\u0026#34; ]; then echo \u0026#34;删除已存在的容器: $CONTAINER_NAME\u0026#34; docker rm -f $CONTAINER_NAME else echo \u0026#34;容器 $CONTAINER_NAME 不存在\u0026#34; fi # 检查并删除已存在的镜像 if [ \u0026#34;$(docker images -q $IMAGE_NAME)\u0026#34; ]; then echo \u0026#34;删除已存在的镜像: $IMAGE_NAME\u0026#34; docker rmi -f $IMAGE_NAME else echo \u0026#34;镜像 $IMAGE_NAME 不存在\u0026#34; fi pwd # 构建新的 Docker 镜像 echo \u0026#34;构建新的 Docker 镜像: $IMAGE_NAME\u0026#34; docker build -t $IMAGE_NAME . # 创建并运行新的 Docker 容器 echo \u0026#34;创建并运行容器: $CONTAINER_NAME\u0026#34; docker run -d --name $CONTAINER_NAME --restart=on-failure:5 -p 3000:80 $IMAGE_NAME echo \u0026#34;构建成功，删除文件\u0026#34; rm -rf ./dist rm ./dist.zip 前端-前台Dockerfile和后台一致 shell\n#!/bin/bash # 将dockerfile复制过来 cd /var/jenkins_home/workspace/BlogWeb-test/ cp /var/jenkins_home/workspace/Dotnet/front_Dockerfile ./Dockerfile cp /var/jenkins_home/workspace/Dotnet/nginx.conf ./nginx.conf cp /var/jenkins_home/workspace/Dotnet/front_web/dist.zip ./dist.zip unzip -d ./dist dist.zip # 指定镜像名和容器名 IMAGE_NAME=\u0026#34;myblog_web_img\u0026#34; CONTAINER_NAME=\u0026#34;myblog_web\u0026#34; # 检查并删除已存在的容器 if [ \u0026#34;$(docker ps -aq -f name=$CONTAINER_NAME)\u0026#34; ]; then echo \u0026#34;删除已存在的容器: $CONTAINER_NAME\u0026#34; docker rm -f $CONTAINER_NAME else echo \u0026#34;容器 $CONTAINER_NAME 不存在\u0026#34; fi # 检查并删除已存在的镜像 if [ \u0026#34;$(docker images -q $IMAGE_NAME)\u0026#34; ]; then echo \u0026#34;删除已存在的镜像: $IMAGE_NAME\u0026#34; docker rmi -f $IMAGE_NAME else echo \u0026#34;镜像 $IMAGE_NAME 不存在\u0026#34; fi pwd # 构建新的 Docker 镜像 echo \u0026#34;构建新的 Docker 镜像: $IMAGE_NAME\u0026#34; docker build -t $IMAGE_NAME . # 创建并运行新的 Docker 容器 echo \u0026#34;创建并运行容器: $CONTAINER_NAME\u0026#34; docker run -d --name $CONTAINER_NAME --restart=on-failure:5 -p 3001:80 $IMAGE_NAME ","permalink":"https://www.heiok.top/posts/tutorial/jenkins%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/","summary":"\u003cp\u003e##后端Dockerfile\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 使用 ASP.NET 运行时镜像（根据项目版本调整）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFROM mcr.microsoft.com/dotnet/aspnet:6.0 AS base\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWORKDIR /app\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 设置环境变量（可选）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e#ENV ASPNETCORE_ENVIRONMENT=Production\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eENV ASPNETCORE_ENVIRONMENT=Development\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eENV ASPNETCORE_URLS=http://+:5001\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 暴露端口\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEXPOSE 5001\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 复制已编译的文件\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCOPY bin/Release/net6.0/ /app/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 设置入口点\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eENTRYPOINT [\u0026#34;dotnet\u0026#34;, \u0026#34;Myblog.WebApi.dll\u0026#34;]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"shell\"\u003eshell\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 将dockerfile复制过来\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd /var/jenkins_home/workspace/MyBlog/Myblog.WebApi/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#cd /tools/1panel/1panel/apps/jenkins/jenkins/data/workspace/MyBlog/Myblog.WebApi/bin/Release/net6.0/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#cp /tools/1panel/1panel/apps/jenkins/jenkins/data/workspace/Dotnet/Dockerfile ./Dockerfile\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecp /var/jenkins_home/workspace/Dotnet/Dockerfile ./Dockerfile\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 指定镜像名和容器名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eIMAGE_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;myblogimg\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCONTAINER_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;myblog\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 检查并删除已存在的容器\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003edocker ps -aq -f name\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;删除已存在的容器: \u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    docker rm -f $CONTAINER_NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;容器 \u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#e6db74\"\u003e 不存在\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 检查并删除已存在的镜像\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003edocker images -q $IMAGE_NAME\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;删除已存在的镜像: \u003c/span\u003e$IMAGE_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    docker rmi -f $IMAGE_NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;镜像 \u003c/span\u003e$IMAGE_NAME\u003cspan style=\"color:#e6db74\"\u003e 不存在\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epwd\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 构建新的 Docker 镜像\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;构建新的 Docker 镜像: \u003c/span\u003e$IMAGE_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build -t $IMAGE_NAME .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 创建并运行新的 Docker 容器\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;创建并运行容器: \u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#docker run -d --name $CONTAINER_NAME --restart=on-failure:5 -p 5001:5001 $IMAGE_NAME\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker run -d \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --name $CONTAINER_NAME \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --restart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eon-failure:5 \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  -p 5001:5001 \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  -v /tools/myblog/logs/:/app/logs/ \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  $IMAGE_NAME\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"前端-后台dockerfile\"\u003e前端-后台Dockerfile\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFROM nginx:latest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEXPOSE 80\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWORKDIR /app\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 替换nginx配置\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCOPY nginx.conf /etc/nginx/conf.d/default.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 将第一阶段的静态文件复制到nginx中\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRUN rm -rf /usr/share/nginx/html\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRUN mkdir /usr/share/nginx/html\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCOPY dist /usr/share/nginx/html\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e# 运行\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCMD [\u0026#34;nginx\u0026#34;, \u0026#34;-g\u0026#34;, \u0026#34;daemon off;\u0026#34;]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"nginxconf\"\u003enginx.conf\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-gdscript3\" data-lang=\"gdscript3\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eserver {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  listen       \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  listen  [::]:\u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  server_name  localhost;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  access_log  \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003elog\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003enginx\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003ehost\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eaccess\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003elog  main;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  location \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      root   \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003eusr\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003eshare\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003enginx\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003ehtml;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      index  index\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehtml index\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehtm;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# 新增下面这句，其他是默认nginx配置\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# 解决部分前端框架的路由问题，在浏览器刷新报错404\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      try_files \u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003euri \u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003euri\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003eindex\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehtml;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  error_page   \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e502\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e503\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e504\u003c/span\u003e  \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003ex\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehtml;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  location \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003ex\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehtml {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      root   \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003eusr\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003eshare\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003enginx\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003ehtml;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"shell-1\"\u003eshell\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 将dockerfile复制过来\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd /var/jenkins_home/workspace/BlogWeb-admin-test/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecp /var/jenkins_home/workspace/Dotnet/front_Dockerfile ./Dockerfile\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecp /var/jenkins_home/workspace/Dotnet/nginx.conf ./nginx.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecp /var/jenkins_home/workspace/Dotnet/front_admin/dist.zip ./dist.zip\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eunzip -d ./dist dist.zip\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 指定镜像名和容器名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eIMAGE_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;myblog_web_admin_img\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCONTAINER_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;myblog_web_admin\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 检查并删除已存在的容器\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003edocker ps -aq -f name\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;删除已存在的容器: \u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    docker rm -f $CONTAINER_NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;容器 \u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#e6db74\"\u003e 不存在\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 检查并删除已存在的镜像\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003edocker images -q $IMAGE_NAME\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;删除已存在的镜像: \u003c/span\u003e$IMAGE_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    docker rmi -f $IMAGE_NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;镜像 \u003c/span\u003e$IMAGE_NAME\u003cspan style=\"color:#e6db74\"\u003e 不存在\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epwd\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 构建新的 Docker 镜像\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;构建新的 Docker 镜像: \u003c/span\u003e$IMAGE_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build -t $IMAGE_NAME .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 创建并运行新的 Docker 容器\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;创建并运行容器: \u003c/span\u003e$CONTAINER_NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker run -d --name $CONTAINER_NAME --restart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eon-failure:5 -p 3000:80 $IMAGE_NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;构建成功，删除文件\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm -rf ./dist\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm ./dist.zip\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"前端-前台dockerfile和后台一致\"\u003e前端-前台Dockerfile和后台一致\u003c/h2\u003e\n\u003cp\u003eshell\u003c/p\u003e","title":"Jenkins自动部署教程"},{"content":"linux命令 ps -ef|grep详解 ps命令将某个进程显示出来\ngrep命令是查找\n中间的|是管道命令 是指ps命令与grep同时执行\nPS是LINUX下最常用的也是非常强大的进程查看命令\ngrep命令是查找，是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。\ngrep全称是Global Regular Expression Print，表示全局正则表达式版本，它的使用权限是所有用户。\n以下这条命令是检查java 进程是否存在：ps -ef |grep java\n字段含义如下： UID PID PPID C STIME TTY TIME CMD\nzzw 14124 13991 0 00:38 pts/0 00:00:00 grep \u0026ndash;color=auto dae\ncd，ls命令使用 ls\n-a列出目录下的所有文件，包括以 . 开头的隐含文件。\n-A 显示指定目录下所有的子目录及文件包括隐藏文件，但不显示\u0026quot;.\u0026quot;,\u0026quot;..\u0026quot;\n-c 文件修改时间排序\n列出 usr目录下的所有文件\nls -a /usr 多个命令接上参数即可\n文件夹命令 1.mkdir命令 命令格式：mkdir [选项] 目录\u0026hellip;；\n命令功能：通过mkdir命令可以实现在指定位置创建以 (指定的文件名)命名的文件夹或目录，要创建文件夹或目录的用户必须对所创建的文件夹的父文件夹具有写权限；\n-m 创建文件夹得同时设定权限\n在usr文件夹内创建文件夹aaa\nmkdir -m usr/aaa -p 新建多级文件夹，当路径中摸个目录文件夹存在时，跳过该目录继续创建下一级目录\n-v 显示创建目录的过程信息\n2.rm命令 删除当前目录下的文件夹\nrmdir aaa 3.cp 复制文件命令\n复制文件test.txt到/usr/local目录 cp test.txt /usr/local 复制文件夹 yyTest到/usr/local目录 cp -r yyTest/ /usr/local 再次复制文件test.txt到/usr/local目录，强制覆盖 cp -f test.txt /usr/local 复制文件tests.txt到/usr/local目录，并把修改时间和访问权限也复制 cp -p test.txt /usr/local 4.ping命令 发送10个数据包 ping ip -c count count指定数据包数量 追踪路由信息 traceroute -4 iPv4 -6 ipv6 查看路由信息 netstat -r 和 route -v 浏览文件类命令 1.cat命令 用于滚动显示文件内容或者将多个文件合并成一个文件\ncat [参数] 文件名 -b 对输出内容非空行标注行号\n-n 对所有行标注行号·\n还可以用于合并多个文件夹 2.more命令 使用cat命令时，由于文件过长只能看到文件的最后一部分，可以使用more命令分页查看\n进入more命令后，enter向下移动，使用空格翻页\n参数 -num：指定分页时每页显示的行数\n+num：指定文件从第num行开始显示\ncat -n docker.sh | more +232 查看docker.sh文件，从第232行开始分页查看 3.less命令 用法和more基本相同，但是支持向上向下翻页\nb按键向上移动一页\nq键退出less命令\n还支持查找功能，先按/ ,再输入要查找的字符，会在文本中查找，并且把找到的第一个目标高亮，再次查找按下/再次输入字符\n4.head命令 5.tail命令 目录操作类命令 1.mkdir命令 创建一个目录\n\u0026mdash;make directory\nmkdir [参数] 目录名 -p 如果创建文件的父目录不存在，创建该目录时，同时创建父级目录\n2.rmkdir \u0026ndash;remove directory\n删除空目录\nrmkdir [参数] 目录名 -p删除目录时连同父级目录一起删除，必须保证父级目录中没有其他目录及文件\n3.cp命令 主要用于复制文件或目录的复制\ncp [参数] 源文件 目标文件 -a 将文件状态，权限等都尽可能全部复制\n-f 如果目标文件或者目录存在，则覆盖目标文件\n-i 提示是否覆盖文件\n-r递归复制目录，包含目录下的子文件\n在复制时，要保证目标文件的父级目录存在 [root@iZf8z2hzdbx98heub8antpZ ~]# cp -r ./git /home 复制文件到home目录下 [root@iZf8z2hzdbx98heub8antpZ ~]# ls -l /root/git drwxr-xr-x 2 root root 4096 4月 6 14:45 conf -rw-r--r-- 1 root root 5713067 4月 6 14:43 linux_amd64_server.tar.gz -rwxr-xr-x 1 1001 121 12308480 4月 8 2021 nps drwxr-xr-x 4 root root 4096 4月 6 14:45 web [root@iZf8z2hzdbx98heub8antpZ ~]# ls -l /home/git drwxr-xr-x 2 root root 4096 4月 10 16:43 conf -rw-r--r-- 1 root root 5713067 4月 10 16:43 linux_amd64_server.tar.gz -rwxr-xr-x 1 root root 12308480 4月 10 16:43 nps drwxr-xr-x 4 root root 4096 4月 10 16:43 web cp -r ./git /home/bor 移动文件到home目录下并更名为bor 文件操作类命令 1.mv命令 移动文件或者目录\nmv [参数] 源文件或目录 目标文件或目录 参数\n-i 如果目标文件或者目录存在提示是否覆盖\n-f 直接覆盖不提示\n2.rm 删除文件或者目录\nrm [参数] 文件名或路径名 参数\n-i 删除文件目录时提示用户 -f强制删除，不提示 -r递归删除目录，如果要删除的目录中有1万个子目录或子文件，那么普通的rm删除最少需要确认1万次。所以，在真正删除文件的时候，我们会选择强制删除 rm -fr cptest 组合命令 递归强制删除\n[root@iZf8z2hzdbx98heub8antpZ ~]# cp -r ./git /home/cptest [root@iZf8z2hzdbx98heub8antpZ ~]# cd /home [root@iZf8z2hzdbx98heub8antpZ home]# ls cptest git [root@iZf8z2hzdbx98heub8antpZ home]# rm -fr cptest [root@iZf8z2hzdbx98heub8antpZ home]# ls git 3.touch命令 建立文件或者更新文件的修改日期\n4.ln命令 用于建立两个文件之间的链接关系\n-s 建立（符号）软连接\n不使用参数默认硬链接\nin [参数] 源文件或目录 连接名 硬链接 [root@iZf8z2hzdbx98heub8antpZ ~]# ln aa.txt cc.txt [root@iZf8z2hzdbx98heub8antpZ ~]# ls aa.txt bb.txt cc.txt git Pager 执行命令后会建立一个文件cc.txt文件，修改aa.txt内容cc.txt的内容一会随着改变\n[root@iZf8z2hzdbx98heub8antpZ ~]# ll aa.txt -rw-r--r-- 2 root root 7 4月 11 15:46 aa.txt [root@iZf8z2hzdbx98heub8antpZ ~]# ll cc.txt -rw-r--r-- 2 root root 7 4月 11 15:46 cc.txt 建立链接后，aa，cc的链接数都变成了2，表示这块硬盘空间有aa，bb指向它\n只能对文件建立硬链接，目录不行\n软连接 一个文件指向另一个文件的文件名\n首先查看bb.txt信息\n[root@iZf8z2hzdbx98heub8antpZ ~]# ll bb.txt -rw-r--r-- 1 root root 7 4月 11 15:42 bb.txt [root@iZf8z2hzdbx98heub8antpZ ~]# ln -s bb.txt dd.txt [root@iZf8z2hzdbx98heub8antpZ ~]# ls aa.txt bb.txt cc.txt dd.txt git Pager [root@iZf8z2hzdbx98heub8antpZ ~]# ll bb.txt dd.txt -rw-r--r-- 1 root root 7 4月 11 15:42 bb.txt lrwxrwxrwx 1 root root 6 4月 11 15:59 dd.txt -\u0026gt; bb.txt 可以看出dd文件是指向bb文件的一个符号链接，而指向储存bb文件内容的那块银蓝空间的文件仍然只有bb一个文件，dd文件只不过是指向了bb的文件名而已，所以bb文件的文件连接数还是1\n可以对文件或者目录创建软连接 [root@iZf8z2hzdbx98heub8antpZ ~]# cat dd.txt bbbbbb 使用cat命令查看dd.txt文件的内容时，发现dd.txt文件是一个符号链接文件，就可以根据dd文件查找到bb文件\n然后将bb文件的内容显示出来\n5.gzip和gunzip命令 对文件进行压缩，生成以.gz结尾的压缩包，而gunzip是对压缩包进行解压\ngzip -v 文件名 gunzip -v 文件名 -v 显示被压缩文件的压缩比或解压时的信息 [root@iZf8z2hzdbx98heub8antpZ test]# gzip -v bb.txt bb.txt: 14.3% -- replaced with bb.txt.gz [root@iZf8z2hzdbx98heub8antpZ test]# ls aa.txt bb.txt.gz cc.txt dd.txt [root@iZf8z2hzdbx98heub8antpZ test]# gunzip -v bb.txt.gz bb.txt.gz: 14.3% -- replaced with bb.txt [root@iZf8z2hzdbx98heub8antpZ test]# ls aa.txt bb.txt cc.txt dd.txt 6.tar命令 tar [参数] 档案文件 文件列表 -c 生成档案文件 -v 列出解档归档详细过程 -f 指定档案文件名称 -r 将文件追加到档案文件末尾 -z 以gzip格式压缩或者解压缩文件 -j 以bzip2格式压缩或解压缩文件 -d 比较档案与当前目录中的文件 -x 解开档案文件 将文件zz.tar.gz 解压到 /root/test1目录下 [root@iZf8z2hzdbx98heub8antpZ home]# tar -xzvf zz.tar.gz -C /root/test1 7.rpm命令 用于对rpm包进行管理\nrpm [参数] 软件包名 -q 查询 指定软件包是否已安装，-qa（q +all）查看所有的软件包\n-i 用于安装指定的rpm包（安装时需要接上后缀名.rpm）\n-e 删除指定的软件包，（卸载时不用接后缀.rpm）\n-h 显示进度\n可以和之前的命令链接\neg\nrpm -qa | cat -b | less -20 查看系统中安装的所有软件包，显示行数，并且分页显示，每页显示20行\n8.whereis 9.find命令 用于文件查找\nfind [路径] [匹配表达式] 参数\n-name filename 查找指定名称的文件 -user username 查找指定用户的文件 -group grpname 查找指定组的文件 -print 显示查找结果 使用类命令 1.nohup 后台运行命令，并且指定日志输出路径\nnohup [command] [args\u0026hellip;] \u0026amp; \u0026gt;hello.log \u0026amp;\n参数说明\ncommand ：需要执行的命令\nargs:一些参数，可以指定文件输出的位置\n\u0026amp;：使命令后台运行\n","permalink":"https://www.heiok.top/posts/tutorial/linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/","summary":"\u003ch1 id=\"linux命令\"\u003elinux命令\u003c/h1\u003e\n\u003ch2 id=\"ps--efgrep详解\"\u003eps -ef|grep详解\u003c/h2\u003e\n\u003cp\u003eps命令将某个进程显示出来\u003c/p\u003e\n\u003cp\u003egrep命令是查找\u003c/p\u003e\n\u003cp\u003e中间的|是管道命令 是指ps命令与grep同时执行\u003c/p\u003e\n\u003cp\u003ePS是LINUX下最常用的也是非常强大的进程查看命令\u003c/p\u003e\n\u003cp\u003egrep命令是查找，是一种强大的文本搜索工具，它能\u003ca href=\"https://www.baidu.com/s?wd=%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F\u0026amp;tn=44039180_cpr\u0026amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1d9uWD3PhP9n1b4m1nduAcz0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EPjfvrHnzPWT3\"\u003e使用正则表达式\u003c/a\u003e搜索文本，并把匹配的行打印出来。\u003c/p\u003e\n\u003cp\u003egrep全称是Global Regular Expression Print，表示全局正则表达式版本，它的使用权限是所有用户。\u003c/p\u003e","title":"Linux基础命令"},{"content":"在SQL语句中每个关键字都会按照顺序往下执行，而每一步操作，会生成一个虚拟表，最后的虚拟表就是最终结果。\n基本sql 语句如下 :\n(8)SELECT (9)DISTINCT \u0026lt;select_list\u0026gt; (1)FROM \u0026lt;left_table\u0026gt; (3) \u0026lt;join_type\u0026gt; JOIN \u0026lt;right_table\u0026gt; (2) ON \u0026lt;join_condition\u0026gt; (4)WHERE \u0026lt;where_condition\u0026gt; (5)GROUP BY \u0026lt;group_by_list\u0026gt; (6)WITH{CUBE|ROLLUP} (7)HAVING \u0026lt;having_condition\u0026gt; (10)ORDER BY \u0026lt;order_by_list\u0026gt; (11)LIMIT \u0026lt;limit_number\u0026gt; 常用的的执行顺序：\nFROM ： 对FROM左边的表和右边的表计算笛卡尔积，产生虚表VT1； ON ： 对虚拟表VT1进行ON筛选，只有那些符合条件的行才会被记录在虚拟表VT2中； JOIN ：如果是OUT JOIN，那么将保留表中（如左表或者右表）未匹配的行作为外部行添加到虚拟表VT2中，从而产生虚拟表VT3； WHERE ：对虚拟表VT3进行WHERE条件过滤，只有符合的记录才会被放入到虚拟表VT4； GROUP BY：根据GROUP BY子句中的列，对虚拟表VT4进行分组操作，产生虚拟表VT5； CUBE|ROLLUP：对虚拟表VT5进行CUBE或者ROLLUP操作，产生虚拟表VT6； HAVING ：对虚拟表VT6进行 HAVING 条件过滤，只有符合的记录才会被插入到虚拟表VT7中； SELECT ：执行SELECT操作，选择指定的列，插入到虚拟表VT8中； DISTINCT ：对虚拟表VT8中的记录进行去重，产生虚拟表VT9； ORDER BY ：将虚拟表VT9中的记录按照进行排序操作，产生虚拟表VT10； LIMIT ：取出指定行的记录，产生虚拟表VT11，并将结果返回。 ","permalink":"https://www.heiok.top/posts/tutorial/mysql-%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/","summary":"\u003cp\u003e在SQL语句中每个关键字都会按照顺序往下执行，而每一步操作，会生成一个\u003cstrong\u003e虚拟表\u003c/strong\u003e，最后的虚拟表就是最终结果。\u003c/p\u003e\n\u003cp\u003e基本sql 语句如下 :\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-SQL\" data-lang=\"SQL\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e (\u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eDISTINCT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eselect_list\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eleft_table\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003ejoin_type\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eJOIN\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eright_table\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e)       \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003ejoin_condition\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eWHERE\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003ewhere_condition\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eGROUP\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003egroup_by_list\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eWITH\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCUBE\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eROLLUP\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eHAVING\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003ehaving_condition\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eORDER\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eorder_by_list\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e)\u003cspan style=\"color:#66d9ef\"\u003eLIMIT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003elimit_number\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003e常用的的执行顺序：\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003eFROM\u003c/code\u003e ： 对FROM左边的表和右边的表计算\u003cstrong\u003e笛卡尔积\u003c/strong\u003e，产生虚表VT1；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eON\u003c/code\u003e ： 对虚拟表VT1进行ON筛选，只有那些符合条件的行才会被记录在虚拟表VT2中；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eJOIN\u003c/code\u003e ：如果是OUT JOIN，那么将保留表中（如左表或者右表）未匹配的行作为外部行添加到虚拟表VT2中，从而产生虚拟表VT3；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eWHERE\u003c/code\u003e ：对虚拟表VT3进行WHERE条件过滤，只有符合的记录才会被放入到虚拟表VT4；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eGROUP BY\u003c/code\u003e：根据GROUP BY子句中的列，对虚拟表VT4进行分组操作，产生虚拟表VT5；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCUBE|ROLLUP\u003c/code\u003e：对虚拟表VT5进行CUBE或者ROLLUP操作，产生虚拟表VT6；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eHAVING\u003c/code\u003e ：对虚拟表VT6进行 HAVING 条件过滤，只有符合的记录才会被插入到虚拟表VT7中；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSELECT\u003c/code\u003e ：执行SELECT操作，选择指定的列，插入到虚拟表VT8中；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDISTINCT\u003c/code\u003e ：对虚拟表VT8中的记录进行去重，产生虚拟表VT9；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eORDER BY\u003c/code\u003e ：将虚拟表VT9中的记录按照进行排序操作，产生虚拟表VT10；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eLIMIT\u003c/code\u003e ：取出指定行的记录，产生虚拟表VT11，并将结果返回。\u003c/li\u003e\n\u003c/ol\u003e","title":"MySQL 关键字执行顺序"},{"content":"MySQL 主从同步实现 MySQL 主从复制（Replication）是数据库常用的容灾和读写分离解决方案。本文将详细介绍 MySQL 主从同步的原理、配置步骤和维护建议。\n目录 原理 前提条件 主从同步配置步骤 验证复制状态 常见问题及解决方案 性能优化与监控 高可用方案 原理 MySQL 的主从复制是通过以下三个步骤完成的：\n主库记录变更：主数据库（Master）执行事务时，会记录所有数据变更到二进制日志（Binary Log）。 从库读取变更：从数据库（Slave）的 I/O 线程连接到主库，读取二进制日志，并写入本地的中继日志（Relay Log）。 从库应用变更：从库的 SQL 线程读取中继日志中的事件，并将其应用到从库。 前提条件 两台或多台 MySQL 服务器（一台作为主库，其他作为从库） 所有服务器应使用相同版本或兼容版本的 MySQL 服务器间网络连通 主从服务器上的防火墙允许 MySQL 端口（默认 3306）通信 主从同步配置步骤 1. 配置主库 编辑主库 MySQL 配置文件（通常是 /etc/mysql/my.cnf 或 /etc/my.cnf）： [mysqld] # 每个服务器的ID必须唯一，主库通常设为较小值 server-id = 1 # 启用二进制日志 log-bin = mysql-bin # 可选：指定要复制的数据库 binlog-do-db = your_database_name # 可选：指定不复制的数据库 binlog-ignore-db = mysql # 设置二进制日志格式 binlog_format = ROW 重启 MySQL 服务： sudo systemctl restart mysql # 或 sudo service mysql restart 创建复制用户： CREATE USER \u0026#39;repl_user\u0026#39;@\u0026#39;%\u0026#39; IDENTIFIED BY \u0026#39;repl_password\u0026#39;; GRANT REPLICATION SLAVE ON *.* TO \u0026#39;repl_user\u0026#39;@\u0026#39;%\u0026#39;; FLUSH PRIVILEGES; 获取二进制日志信息： SHOW MASTER STATUS; 记下输出中的 File 和 Position 值，这将在配置从库时使用。\n2. 准备从库初始数据 如果主库已经包含数据，您需要先将这些数据复制到从库。可以使用以下方法之一：\n方法一：使用 mysqldump（适用于较小的数据库）\n在主库上执行： mysqldump --all-databases --master-data=2 -u root -p \u0026gt; dump.sql 将 dump.sql 传输到从库： scp dump.sql user@slave_host:/tmp/ 在从库上导入： mysql -u root -p \u0026lt; /tmp/dump.sql 方法二：使用物理备份（适用于较大的数据库）\n停止主库： sudo systemctl stop mysql 复制数据目录： rsync -avP /var/lib/mysql/ user@slave_host:/var/lib/mysql/ 重启主库： sudo systemctl start mysql 3. 配置从库 编辑从库配置文件： [mysqld] # 从库ID必须唯一且不同于主库 server-id = 2 # 可选：开启中继日志 relay-log = mysql-relay-bin # 可选：指定要复制的数据库 replicate-do-db = your_database_name # 可选：在从库启用只读模式 read_only = 1 重启从库 MySQL： sudo systemctl restart mysql 配置从库连接到主库： CHANGE MASTER TO MASTER_HOST=\u0026#39;master_ip_address\u0026#39;, MASTER_PORT=3306, MASTER_USER=\u0026#39;repl_user\u0026#39;, MASTER_PASSWORD=\u0026#39;repl_password\u0026#39;, MASTER_LOG_FILE=\u0026#39;记录的File值\u0026#39;, MASTER_LOG_POS=记录的Position值; 启动从库复制进程： START SLAVE; 验证复制状态 在从库上执行以下命令检查复制状态：\nSHOW SLAVE STATUS\\G 正常工作的从库应显示：\nSlave_IO_Running: Yes Slave_SQL_Running: Yes Seconds_Behind_Master 显示复制延迟秒数 常见问题及解决方案 1. 复制无法启动 症状：Slave_IO_Running 或 Slave_SQL_Running 为 No\n解决方案：\n检查 Last_IO_Error 或 Last_SQL_Error 字段中的错误信息 确认网络连接和防火墙设置 验证复制用户权限 检查二进制日志文件和位置是否正确 2. 数据不一致 解决方案：\n-- 停止从库 STOP SLAVE; -- 跳过错误（谨慎使用） SET GLOBAL sql_slave_skip_counter = 1; -- 或重新设置复制点 CHANGE MASTER TO MASTER_LOG_FILE=\u0026#39;新文件\u0026#39;, MASTER_LOG_POS=新位置; -- 重新启动从库 START SLAVE; 3. 复制延迟 解决方案：\n优化主库写入性能 增加从库硬件资源 考虑使用并行复制（MySQL 5.7+）： # 在从库配置中添加 slave_parallel_workers = 4 slave_parallel_type = LOGICAL_CLOCK 性能优化与监控 1. 监控复制延迟 -- 在从库上执行 SHOW SLAVE STATUS\\G -- 查找 Seconds_Behind_Master 字段 2. 设置复制警报 可以创建脚本定期检查复制状态，当发现问题时发送告警：\n#!/bin/bash mysql -u root -p -e \u0026#34;SHOW SLAVE STATUS\\G\u0026#34; | grep \u0026#34;Seconds_Behind_Master\u0026#34; | awk \u0026#39;{print $2}\u0026#39; | while read delay; do if [ \u0026#34;$delay\u0026#34; == \u0026#34;NULL\u0026#34; ] || [ \u0026#34;$delay\u0026#34; -gt 300 ]; then echo \u0026#34;警告：MySQL复制延迟超过5分钟或复制中断\u0026#34; | mail -s \u0026#34;MySQL复制告警\u0026#34; admin@example.com fi done 3. 使用 Prometheus + Grafana 监控 使用 mysqld_exporter 采集 MySQL 指标，并在 Grafana 中创建复制状态仪表板。\n高可用方案 1. MySQL Group Replication 适用于 MySQL 5.7 及以上版本，实现组复制和自动故障转移。\n2. MySQL InnoDB Cluster 结合 MySQL Router 和 MySQL Shell，提供完整的高可用解决方案。\n3. 第三方工具 MHA (Master High Availability)：提供主库故障时的自动故障转移 Orchestrator：MySQL 复制拓扑管理和可视化工具 ProxySQL：实现读写分离和负载均衡 结语 MySQL 主从同步是提高数据库可用性和性能的重要手段。正确配置和维护主从复制可以实现：\n读写分离，提高系统性能 数据备份，提高数据安全性 高可用性，减少系统故障对业务的影响 随着业务增长，可以考虑扩展到更复杂的拓扑结构，如主-主复制、一主多从等，以满足更高的要求。\n","permalink":"https://www.heiok.top/posts/tutorial/mysql-%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E5%AE%9E%E7%8E%B0/","summary":"\u003ch1 id=\"mysql-主从同步实现\"\u003eMySQL 主从同步实现\u003c/h1\u003e\n\u003cp\u003eMySQL 主从复制（Replication）是数据库常用的容灾和读写分离解决方案。本文将详细介绍 MySQL 主从同步的原理、配置步骤和维护建议。\u003c/p\u003e\n\u003ch2 id=\"目录\"\u003e目录\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E5%8E%9F%E7%90%86\"\u003e原理\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\"\u003e前提条件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4\"\u003e主从同步配置步骤\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E9%AA%8C%E8%AF%81%E5%A4%8D%E5%88%B6%E7%8A%B6%E6%80%81\"\u003e验证复制状态\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"\u003e常见问题及解决方案\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E7%9B%91%E6%8E%A7\"\u003e性能优化与监控\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88\"\u003e高可用方案\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"原理\"\u003e原理\u003c/h2\u003e\n\u003cp\u003eMySQL 的主从复制是通过以下三个步骤完成的：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e主库记录变更\u003c/strong\u003e：主数据库（Master）执行事务时，会记录所有数据变更到二进制日志（Binary Log）。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e从库读取变更\u003c/strong\u003e：从数据库（Slave）的 I/O 线程连接到主库，读取二进制日志，并写入本地的中继日志（Relay Log）。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e从库应用变更\u003c/strong\u003e：从库的 SQL 线程读取中继日志中的事件，并将其应用到从库。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://dev.mysql.com/doc/refman/8.0/en/images/mysql-replication.png\" alt=\"MySQL主从复制原理\"  /\u003e\n\u003c/p\u003e","title":"MySQL 主从同步实现"},{"content":"建表语句和数据参考\n\u0026ndash; 数据库习题\n\u0026ndash; 1、查询\u0026quot;01\u0026quot;课程比\u0026quot;02\u0026quot;课程成绩高的学生的信息及课程分数 \u0026ndash; 1.1 联表查询\nselect st.*,sc.s_score as 01_score,sc01.s_score as 02_score from student st -- 找出 01 课程 学生的成绩 left join score sc on st.s_id = sc.s_id and sc.c_id = \u0026#39;01\u0026#39; or sc.c_id = null -- 找出02课程学生的成绩 join score sc01 on st.s_id = sc01.s_id and sc01.c_id = \u0026#39;02\u0026#39; where sc.s_score \u0026lt; sc01.s_score \u0026ndash; 1.2 自连接查询\nselect c.*,a.s_score 01score,b.s_score 02score FROM score a,score b,student c where a.c_id =\u0026#39;01\u0026#39; and b.c_id = \u0026#39;02\u0026#39; and a.s_id = c.s_id and b.s_id = c.s_id and a.s_score \u0026gt;b.s_score \u0026ndash; 1.3 将长形数据变成宽型数据\nSELECT s.* ,t.01sc, t.02sc FROM ( SELECT a.s_id,-- 返回01课程的成绩 MAX( CASE WHEN a.c_id = \u0026#39;01\u0026#39; THEN a.s_score END ) AS 01sc, MAX( CASE WHEN a.c_id = \u0026#39;02\u0026#39; THEN a.s_score END ) AS 02sc FROM score a GROUP BY a.s_id ) t, student s WHERE t.01sc \u0026gt; t.02sc and t.s_id = s.s_id \u0026ndash; 2、查询\u0026quot;01\u0026quot;课程比\u0026quot;02\u0026quot;课程成绩低的学生的信息及课程分数\n\u0026ndash; 2.1 自连接\nSELECT c.*,a.s_score sc01,b.s_score sc02 FROM score a,score b, student c where a.c_id = \u0026#39;01\u0026#39; AND b.c_id = \u0026#39;02\u0026#39; AND a.s_score \u0026lt; b.s_score AND a.s_id = c.s_id AND b.s_id = c.s_id \u0026ndash; 3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩\nSELECT a.s_id, ( SELECT b.s_name FROM student b WHERE a.s_id = b.s_id ) AS s_name, AVG( a.s_score ) AS avg_sc FROM score a GROUP BY a.s_id HAVING avg_sc \u0026gt;= 60 \u0026ndash; 3.1自链接 \u0026ndash; score avg student having\nSELECT b.s_id, b.s_name, avg( a.s_score ) avg_score FROM score a, student b WHERE a.s_id = b.s_id GROUP BY b.s_id HAVING avg_score \u0026gt;= 60 \u0026ndash; 4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩 \u0026ndash; (包括有成绩的和无成绩的) \u0026ndash; 在学生表中，有八名学生，但是成绩表中只有7位，说明有一位同学缺考了，需要使用右连接查询 \u0026ndash; ifnull 对为null 的值做处理 \u0026ndash; 4.1 右连接\nSELECT b.s_id, b.s_name, IFNULL( avg( a.s_score ), 0 ) avg_score FROM score a RIGHT JOIN student b ON a.s_id = b.s_id GROUP BY b.s_id HAVING avg_score \u0026lt; 60 -- SELECT b.s_id, b.s_name, AVG( a.s_score ) AS age_sc FROM score a, student b WHERE a.s_id = b.s_id GROUP BY b.s_id HAVING age_sc \u0026lt; 60 \u0026ndash; 出5、查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩 \u0026ndash; student score count group sum \u0026ndash; 在学生表中，有八名学生，但是成绩表中只有7位，说明有一位同学缺考了，需要使用右连接查询 \u0026ndash; ifnull 对为null 的值做处理\nSELECT a.s_id, a.s_name, count( b.c_id ) AS count_c, ifnull( sum( b.s_score ), 0 ) AS sum_sc FROM student a LEFT JOIN score b ON a.s_id = b.s_id GROUP BY a.s_id \u0026ndash; 6、查询\u0026quot;李\u0026quot;姓老师的数量 \u0026ndash; teacher count\nSELECT COUNT(*) FROM teacher a where a.t_name like \u0026#39;李%\u0026#39; \u0026ndash; 7、查询学过\u0026quot;张三\u0026quot;老师授课的同学的信息 \u0026ndash; teacher student course score\nSELECT a.* FROM student a left join score b on a.s_id = b.s_id JOIN course c on c.c_id = b.c_id JOIN teacher d on d.t_id = c.t_id WHERE d.t_name = \u0026#39;张三\u0026#39; -- 内连接 SELECT d.* FROM teacher a ,course b,score c, student d where a.t_id = b.t_id AND b.c_id = c.c_id AND c.s_id = d.s_id AND a.t_name = \u0026#39;张三\u0026#39; \u0026ndash; 8、查询没学过\u0026quot;张三\u0026quot;老师授课的同学的信息 \u0026ndash; 找到学过张三老师课程的虚学生id，使用 not in关键字将其排除就行了\nSELECT student.* FROM student WHERE s_id NOT IN ( SELECT c.s_id FROM teacher a, course b, score c WHERE a.t_id = b.t_id AND b.c_id = c.c_id AND a.t_name = \u0026#39;张三\u0026#39;)\t\u0026ndash; 9、查询学过编号为\u0026quot;01\u0026quot;并且也学过编号为\u0026quot;02\u0026quot;的课程的同学的信息 \u0026ndash; student course score\n1. SELECT a.* FROM student a JOIN score b ON a.s_id = b.s_id and b.c_id = \u0026#39;01\u0026#39; JOIN score c ON a.s_id = c.s_id and c.c_id = \u0026#39;02\u0026#39; 2. SELECT c.* FROM student c JOIN score a ON c.s_id = a.s_id JOIN score b ON c.s_id = b.s_id WHERE a.c_id = \u0026#39;01\u0026#39; AND b.c_id = \u0026#39;02\u0026#39;; -- 自连接 SELECT c.* FROM score a, score b, student c WHERE a.s_id = c.s_id AND a.c_id = \u0026#39;01\u0026#39; AND b.c_id = \u0026#39;02\u0026#39; -- 同时学过01和02 AND a.s_id = b.s_id \u0026ndash; 宽型数据\nSELECT student.* FROM ( SELECT s_id, max( CASE WHEN a.c_id = \u0026#39;01\u0026#39; THEN a.s_score END ) 01_s, max( CASE WHEN a.c_id = \u0026#39;02\u0026#39; THEN a.s_score END ) 02_s FROM score a GROUP BY a.s_id ) t, student WHERE t.s_id = student.s_id AND t.01_s IS NOT NULL AND t.02_s IS NOT NULL \u0026ndash; 10、查询学过编号为\u0026quot;01\u0026quot;但是没有学过编号为\u0026quot;02\u0026quot;的课程的同学的信息\nSELECT student.* FROM ( SELECT s_id, max( CASE WHEN a.c_id = \u0026#39;01\u0026#39; THEN a.s_score END ) 01_s, max( CASE WHEN a.c_id = \u0026#39;02\u0026#39; THEN a.s_score END ) 02_s FROM score a GROUP BY a.s_id ) t, student WHERE t.s_id = student.s_id AND t.01_s IS NOT NULL AND t.02_s IS NULL ","permalink":"https://www.heiok.top/posts/tutorial/mysql50%E9%A2%981-10/","summary":"\u003cp\u003e\u003ca href=\"http://www.heiok.top/article/189\"\u003e建表语句和数据参考\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u0026ndash; 数据库习题\u003c/p\u003e\n\u003cp\u003e\u0026ndash; 1、查询\u0026quot;01\u0026quot;课程比\u0026quot;02\u0026quot;课程成绩高的学生的信息及课程分数\n\u0026ndash; 1.1 联表查询\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e  st.\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e,sc.s_score \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e_score,sc01.s_score \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e02\u003c/span\u003e_score \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e  student st \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- 找出 01 课程 学生的成绩\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eleft\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ejoin\u003c/span\u003e score sc \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e st.s_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e sc.s_id  \u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e sc.c_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eor\u003c/span\u003e sc.c_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- 找出02课程学生的成绩\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ejoin\u003c/span\u003e score sc01 \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e st.s_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e sc01.s_id \u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e sc01.c_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhere\u003c/span\u003e sc.s_score \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e sc01.s_score\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u0026ndash; 1.2 自连接查询\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e,a.s_score \u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003escore,b.s_score \u003cspan style=\"color:#ae81ff\"\u003e02\u003c/span\u003escore\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003escore a,score b,student \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhere\u003c/span\u003e a.c_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e b.c_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e a.s_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e.s_id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e b.s_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e.s_id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e a.s_score \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003eb.s_score\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u0026ndash; 1.3 将长形数据变成宽型数据\u003c/p\u003e","title":"Mysql50题——1-10"},{"content":"20-30 20、查询学生的总成绩并进行排名 \u0026ndash; 总成绩 sum ROW_number\nSELECT DISTINCT t.s_id, ROW_NUMBER() over(ORDER BY t.s_id ) from (SELECT DISTINCT a.s_id, sum( a.s_score ) over ( PARTITION BY a.s_id ) AS sum_sc FROM score a ) t 21、查询不同老师所教不同课程平均分从高到低显示 -- 分组根据不同的老师 不同的课程 ，降序排序 -- 开窗函数不会导致结果集的行减少，因此会出现重复的行，可以使用 distinct 进行去重 SELECT a.t_id, a.t_name, b.c_name, avg( c.s_score ) over ( PARTITION BY a.t_name ) avg_sc FROM teacher a LEFT JOIN course b ON a.t_id = b.t_id LEFT JOIN score c ON b.c_id = c.c_id ORDER BY avg_sc DESC -- 不使用开窗 SELECT a.t_name, b.c_name, avg( c.s_score ) avg_s FROM teacher a LEFT JOIN course b ON a.t_id = b.t_id LEFT JOIN score c ON c.c_id = b.c_id GROUP BY a.t_name,b.c_name ORDER BY avg_s DESC\t22、查询所有课程的成绩第2名到第3名的学生信息及该课程成绩 \u0026ndash; 所有同学的成绩和学生信息\nSELECT t.* FROM ( SELECT a.c_id, a.s_score, b.*, ROW_NUMBER() over ( PARTITION BY a.c_id ORDER BY a.s_score desc) AS sc_pm FROM score a LEFT JOIN student b ON a.s_id = b.s_id ) t WHERE t.sc_pm in (2,3) 临时表\nWITH RankedScores AS ( SELECT s_id, c_id, s_score, ROW_NUMBER() OVER (PARTITION BY c_id ORDER BY s_score DESC) AS ranka FROM score ) SELECT rs.c_id AS 课程ID, c.c_name AS 课程名称, rs.s_id AS 学生ID, s.s_name AS 学生姓名, rs.s_score AS 成绩 FROM RankedScores rs JOIN Course c ON rs.c_id = c.c_id JOIN Student s ON rs.s_id = s.s_id WHERE rs.ranka in (2,3) 23、统计各科成绩各分数段人数：课程编号,课程名称,[100-85],[85-70],[70-60],[0-60]及所占百分比 \u0026ndash; 按照课程进行分组，并且统计人数 ,要统计分段，包括0分的吗，没有成绩不算对吧\nSELECT a.c_id,\tb.c_name, count( a.s_score ) 人数, sum( CASE WHEN a.s_score \u0026gt;= 85 AND a.s_score \u0026lt;= 100 THEN 1 ELSE 0 END ) \u0026#39;[100-85]\u0026#39;, sum( CASE WHEN a.s_score \u0026gt;= 70 AND a.s_score \u0026lt; 85 THEN 1 ELSE 0 END ) \u0026#39;[85-70]\u0026#39;, sum( CASE WHEN a.s_score \u0026gt;= 60 AND a.s_score \u0026lt; 70 THEN 1 ELSE 0 END ) \u0026#39;[70-60]\u0026#39;, sum( CASE WHEN a.s_score \u0026gt;= 0 AND a.s_score \u0026lt; 60 THEN 1 ELSE 0 END ) \u0026#39;[0-60]\u0026#39;, sum( CASE WHEN a.s_score \u0026gt;= 85 AND a.s_score \u0026lt;= 100 THEN 1 ELSE 0 END )/count(1) \u0026#39;[100-85]%\u0026#39;, sum( CASE WHEN a.s_score \u0026gt;= 70 AND a.s_score \u0026lt; 85 THEN 1 ELSE 0 END )/count(1) \u0026#39;[85-70]%\u0026#39;, sum( CASE WHEN a.s_score \u0026gt;= 60 AND a.s_score \u0026lt; 70 THEN 1 ELSE 0 END )/count(1)\u0026#39;[70-60]%\u0026#39;, sum( CASE WHEN a.s_score \u0026gt;= 0 AND a.s_score \u0026lt; 60 THEN 1 ELSE 0 END )/count(1) \u0026#39;[0-60]%\u0026#39; FROM score a LEFT JOIN course b on a.c_id = b.c_id GROUP BY a.c_id,b.c_name 24、查询学生平均成绩及其名次 \u0026ndash; 学生平均成绩\nSELECT t.s_id, t.avg_sc, ROW_NUMBER() over (ORDER BY t.avg_sc DESC ) 排名 FROM ( SELECT a.s_id, avg( a.s_score ) avg_sc FROM score a GROUP BY a.s_id ) t SELECT t1.s_id, t1.avg_sc, ( SELECT COUNT(*) FROM ( SELECT s_id, AVG( s_score ) AS avg_sc FROM score GROUP BY s_id ) AS t2 WHERE t2.avg_sc \u0026gt; t1.avg_sc ) + 1 AS 排名 FROM ( SELECT s_id, avg( score.s_score ) avg_sc FROM score GROUP BY s_id ) t1 ORDER BY 排名 解释 主查询: t1 是子查询的别名，它包含每个学生的平均成绩。 使用相关子查询来计算每个学生的排名。 相关子查询: 对于每一行，在 t1 中使用一个子查询 t2 计算比当前学生平均成绩高的学生数量。 子查询 t2 计算比当前学生 t1 的平均成绩高的学生的数量。 由于排名从 1 开始，所以需要 + 1。 ORDER BY: 按排名进行排序。 25、查询各科成绩前三名的记录 \u0026ndash; 各科成绩前三 between and \u0026ndash; 查询出所有的成绩，按照课程分类，分数降序排列\nSELECT t.c_id 课程id, t.s_id 学生id, t.cj_pm 排名 FROM -- 第一步 找出各科成绩排名 ( SELECT s.c_id, s.s_id, s.s_score, ROW_NUMBER() over ( PARTITION BY s.c_id ORDER BY s.s_score DESC ) cj_pm FROM score s ) t where t.cj_pm in (1,2,3) 26、查询每门课程被选修的学生数 \u0026ndash; 课程被多少学生选 count\nSELECT b.c_name, count( s_id ) FROM score a RIGHT JOIN course b ON b.c_id = a.c_id GROUP BY b.c_id,b.c_name 27、查询出只有两门课程的全部学生的学号和姓名 \u0026ndash; 只选了两门课程的学生学号和姓名 \u0026ndash; score student count\nSELECT a.s_id, c.s_name, count( a.s_id ) count_c FROM score a LEFT JOIN course b ON a.c_id = b.c_id LEFT JOIN student c ON a.s_id = c.s_id GROUP BY a.s_id,c.s_name HAVING count_c = 2\t28、查询男生、女生人数 \u0026ndash; student\nSELECT count( a.s_id ) FROM student a GROUP BY a.s_sex 29、查询名字中含有\u0026quot;风\u0026quot;字的学生信息 \u0026ndash; 含有 %like%\nSELECT a.* FROM student a WHERE a.s_name LIKE \u0026#39;%风%\u0026#39; 30、查询同名同性学生名单，并统计同名人数 \u0026ndash; 同名同姓 count\nSELECT a.s_name, count( a.s_id ) FROM student a, student b WHERE a.s_sex = b.s_sex AND a.s_name = b.s_name -- 确保自连接市不要连接到自己了 AND a.s_id != b.s_id GROUP BY a.s_name\tSELECT s_name AS 姓名, s_sex AS 性别, COUNT(*) AS 同名人数 FROM Student GROUP BY s_name, s_sex HAVING COUNT(*) \u0026gt; 1; ","permalink":"https://www.heiok.top/posts/tutorial/mysql50%E9%A2%9821-30/","summary":"\u003ch1 id=\"20-30\"\u003e20-30\u003c/h1\u003e\n\u003ch2 id=\"20查询学生的总成绩并进行排名\"\u003e20、查询学生的总成绩并进行排名\u003c/h2\u003e\n\u003cp\u003e\u0026ndash; 总成绩 sum ROW_number\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDISTINCT\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003et.s_id,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eROW_NUMBER() over(\u003cspan style=\"color:#66d9ef\"\u003eORDER\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e t.s_id )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDISTINCT\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\ta.s_id,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003esum\u003c/span\u003e( a.s_score ) over ( PARTITION \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e a.s_id ) \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e sum_sc \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tscore a ) t \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"21查询不同老师所教不同课程平均分从高到低显示\"\u003e21、查询不同老师所教不同课程平均分从高到低显示\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- 分组根据不同的老师 不同的课程  ，降序排序\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- 开窗函数不会导致结果集的行减少，因此会出现重复的行，可以使用 distinct 进行去重\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\ta.t_id,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\ta.t_name,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tb.c_name,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eavg\u003c/span\u003e( \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e.s_score ) over ( PARTITION \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e a.t_name ) avg_sc \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tteacher a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eLEFT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eJOIN\u003c/span\u003e course b \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e a.t_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e b.t_id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eLEFT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eJOIN\u003c/span\u003e score \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e b.c_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e.c_id \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eORDER\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tavg_sc \u003cspan style=\"color:#66d9ef\"\u003eDESC\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- 不使用开窗\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\ta.t_name,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tb.c_name,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eavg\u003c/span\u003e( \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e.s_score ) avg_s \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tteacher a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eLEFT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eJOIN\u003c/span\u003e course b \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e a.t_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e b.t_id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eLEFT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eJOIN\u003c/span\u003e score \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ec\u003c/span\u003e.c_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e b.c_id \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eGROUP\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\ta.t_name,b.c_name \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eORDER\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tavg_s \u003cspan style=\"color:#66d9ef\"\u003eDESC\u003c/span\u003e\t\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://file.heiok.top/note/202405172204908.png\" alt=\"image-20240517220439855\"  /\u003e\n\u003c/p\u003e","title":"Mysql50题——21-30"},{"content":"建表以及数据 create database Mysql_test use Mysql_test #–1.学生表 #Student(s_id,s_name,s_birth,s_sex) –学生编号,学生姓名, 出生年月,学生性别 CREATE TABLE `Student` ( `s_id` VARCHAR(20), s_name VARCHAR(20) NOT NULL DEFAULT \u0026#39;\u0026#39;, s_brith VARCHAR(20) NOT NULL DEFAULT \u0026#39;\u0026#39;, s_sex VARCHAR(10) NOT NULL DEFAULT \u0026#39;\u0026#39;, PRIMARY KEY(s_id) ); #–2.课程表 #Course(c_id,c_name,t_id) – –课程编号, 课程名称, 教师编号 create table Course( c_id varchar(20), c_name VARCHAR(20) not null DEFAULT \u0026#39;\u0026#39;, t_id VARCHAR(20) NOT NULL, PRIMARY KEY(c_id) ); /* –3.教师表 Teacher(t_id,t_name) –教师编号,教师姓名 */ CREATE TABLE Teacher( t_id VARCHAR(20), t_name VARCHAR(20) NOT NULL DEFAULT \u0026#39;\u0026#39;, PRIMARY KEY(t_id) ); /* –4.成绩表 Score(s_id,c_id,s_score) –学生编号,课程编号,分数 */ Create table Score( s_id VARCHAR(20), c_id VARCHAR(20) not null default \u0026#39;\u0026#39;, s_score INT(3), primary key(`s_id`,`c_id`) ); #--插入学生表测试数据 #(\u0026#39;01\u0026#39; , \u0026#39;赵雷\u0026#39; , \u0026#39;1990-01-01\u0026#39; , \u0026#39;男\u0026#39;) insert into Student values(\u0026#39;01\u0026#39; , \u0026#39;赵雷\u0026#39; , \u0026#39;1990-01-01\u0026#39; , \u0026#39;男\u0026#39;); insert into Student values(\u0026#39;02\u0026#39; , \u0026#39;钱电\u0026#39; , \u0026#39;1990-12-21\u0026#39; , \u0026#39;男\u0026#39;); insert into Student values(\u0026#39;03\u0026#39; , \u0026#39;孙风\u0026#39; , \u0026#39;1990-05-20\u0026#39; , \u0026#39;男\u0026#39;); insert into Student values(\u0026#39;04\u0026#39; , \u0026#39;李云\u0026#39; , \u0026#39;1990-08-06\u0026#39; , \u0026#39;男\u0026#39;); insert into Student values(\u0026#39;05\u0026#39; , \u0026#39;周梅\u0026#39; , \u0026#39;1991-12-01\u0026#39; , \u0026#39;女\u0026#39;); insert into Student values(\u0026#39;06\u0026#39; , \u0026#39;吴兰\u0026#39; , \u0026#39;1992-03-01\u0026#39; , \u0026#39;女\u0026#39;); insert into Student values(\u0026#39;07\u0026#39; , \u0026#39;郑竹\u0026#39; , \u0026#39;1989-07-01\u0026#39; , \u0026#39;女\u0026#39;); insert into Student values(\u0026#39;08\u0026#39; , \u0026#39;王菊\u0026#39; , \u0026#39;1990-01-20\u0026#39; , \u0026#39;女\u0026#39;); #--课程表测试数据 insert into Course values(\u0026#39;01\u0026#39; , \u0026#39;语文\u0026#39; , \u0026#39;02\u0026#39;); insert into Course values(\u0026#39;02\u0026#39; , \u0026#39;数学\u0026#39; , \u0026#39;01\u0026#39;); insert into Course values(\u0026#39;03\u0026#39; , \u0026#39;英语\u0026#39; , \u0026#39;03\u0026#39;); #--教师表测试数据 insert into Teacher values(\u0026#39;01\u0026#39; , \u0026#39;张三\u0026#39;); insert into Teacher values(\u0026#39;02\u0026#39; , \u0026#39;李四\u0026#39;); insert into Teacher values(\u0026#39;03\u0026#39; , \u0026#39;王五\u0026#39;); #--成绩表测试数据 insert into Score values(\u0026#39;01\u0026#39; , \u0026#39;01\u0026#39; , 80); insert into Score values(\u0026#39;01\u0026#39; , \u0026#39;02\u0026#39; , 90); insert into Score values(\u0026#39;01\u0026#39; , \u0026#39;03\u0026#39; , 99); insert into Score values(\u0026#39;02\u0026#39; , \u0026#39;01\u0026#39; , 70); insert into Score values(\u0026#39;02\u0026#39; , \u0026#39;02\u0026#39; , 60); insert into Score values(\u0026#39;02\u0026#39; , \u0026#39;03\u0026#39; , 80); insert into Score values(\u0026#39;03\u0026#39; , \u0026#39;01\u0026#39; , 80); insert into Score values(\u0026#39;03\u0026#39; , \u0026#39;02\u0026#39; , 80); insert into Score values(\u0026#39;03\u0026#39; , \u0026#39;03\u0026#39; , 80); insert into Score values(\u0026#39;04\u0026#39; , \u0026#39;01\u0026#39; , 50); insert into Score values(\u0026#39;04\u0026#39; , \u0026#39;02\u0026#39; , 30); insert into Score values(\u0026#39;04\u0026#39; , \u0026#39;03\u0026#39; , 20); insert into Score values(\u0026#39;05\u0026#39; , \u0026#39;01\u0026#39; , 76); insert into Score values(\u0026#39;05\u0026#39; , \u0026#39;02\u0026#39; , 87); insert into Score values(\u0026#39;06\u0026#39; , \u0026#39;01\u0026#39; , 31); insert into Score values(\u0026#39;06\u0026#39; , \u0026#39;03\u0026#39; , 34); insert into Score values(\u0026#39;07\u0026#39; , \u0026#39;02\u0026#39; , 89); insert into Score values(\u0026#39;07\u0026#39; , \u0026#39;03\u0026#39; , 98); 数据库习题 \u0026ndash; 1、查询\u0026quot;01\u0026quot;课程比\u0026quot;02\u0026quot;课程成绩高的学生的信息及课程分数\n\u0026ndash; 2、查询\u0026quot;01\u0026quot;课程比\u0026quot;02\u0026quot;课程成绩低的学生的信息及课程分数\n\u0026ndash; 3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩\n\u0026ndash; 4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩 \u0026ndash; (包括有成绩的和无成绩的)\n\u0026ndash; 出5、查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩\n\u0026ndash; 6、查询\u0026quot;李\u0026quot;姓老师的数量\n\u0026ndash; 7、查询学过\u0026quot;张三\u0026quot;老师授课的同学的信息\n\u0026ndash; 8、查询没学过\u0026quot;张三\u0026quot;老师授课的同学的信息\n\u0026ndash; 9、查询学过编号为\u0026quot;01\u0026quot;并且也学过编号为\u0026quot;02\u0026quot;的课程的同学的信息\n\u0026ndash; 10、查询学过编号为\u0026quot;01\u0026quot;但是没有学过编号为\u0026quot;02\u0026quot;的课程的同学的信息\n\u0026ndash; 12、查询至少有一门课与学号为\u0026quot;01\u0026quot;的同学所学相同的同学的信息\n\u0026ndash; 13、查询和\u0026quot;01\u0026quot;号的同学学习的课程完全相同的其他同学的信息\n\u0026ndash; 14、查询没学过\u0026quot;张三\u0026quot;老师讲授的任一门课程的学生姓名\n\u0026ndash; 15、查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩\n\u0026ndash; 16、检索\u0026quot;01\u0026quot;课程分数小于60，按分数降序排列的学生信息\n\u0026ndash; 17、按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩\n\u0026ndash; 18.查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率 \u0026ndash; 及格为\u0026gt;=60，中等为：70-80，优良为：80-90，优秀为：\u0026gt;=90\n\u0026ndash; 19、按各科成绩进行排序，并显示排名(实现不完全) \u0026ndash; mysql没有rank函数\n\u0026ndash; 20、查询学生的总成绩并进行排名\n\u0026ndash; 21、查询不同老师所教不同课程平均分从高到低显示\n\u0026ndash; 22、查询所有课程的成绩第2名到第3名的学生信息及该课程成绩\n\u0026ndash; 23、统计各科成绩各分数段人数：课程编号,课程名称,[100-85],[85-70],[70-60],[0-60]及所占百分比\n\u0026ndash; 24、查询学生平均成绩及其名次\n\u0026ndash; 25、查询各科成绩前三名的记录\n\u0026ndash; 26、查询每门课程被选修的学生数\n\u0026ndash; 27、查询出只有两门课程的全部学生的学号和姓名\n\u0026ndash; 28、查询男生、女生人数\n\u0026ndash; 29、查询名字中含有\u0026quot;风\u0026quot;字的学生信息\n\u0026ndash; 30、查询同名同性学生名单，并统计同名人数\n\u0026ndash; 31、查询1990年出生的学生名单\n\u0026ndash; 32、查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列\n\u0026ndash; 33、查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩\n\u0026ndash; 34、查询课程名称为\u0026quot;数学\u0026quot;，且分数低于60的学生姓名和分数\n\u0026ndash; 35、查询所有学生的课程及分数情况；\n\u0026ndash; 36、查询任何一门课程成绩在70分以上的姓名、课程名称和分数；\n\u0026ndash; 37、查询不及格的课程\n\u0026ndash; 38、查询课程编号为01且课程成绩在80分以上的学生的学号和姓名；\n\u0026ndash; 39、求每门课程的学生人数\n\u0026ndash; 40、查询选修\u0026quot;张三\u0026quot;老师所授课程的学生中，成绩最高的学生信息及其成绩\n\u0026ndash; 41、查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩\n\u0026ndash; 42、查询每门功成绩最好的前两名 \u0026ndash; 牛逼的写法\n\u0026ndash; 43、统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列\n\u0026ndash; 44、检索至少选修两门课程的学生学号\n\u0026ndash; 45、查询选修了全部课程的学生信息\n\u0026ndash; 46、查询各学生的年龄 \u0026ndash; 按照出生日期来算，当前月日 \u0026lt; 出生年月的月日则，年龄减一\n\u0026ndash; 47、查询本周过生日的学生\n\u0026ndash; 48、查询下周过生日的学生\n\u0026ndash; 49、查询本月过生日的学生\n\u0026ndash; 50、查询下月过生日的学生\n","permalink":"https://www.heiok.top/posts/tutorial/mysql%E7%AC%94%E8%AF%95%E7%BB%83%E4%B9%A0%E9%A2%98/","summary":"\u003ch2 id=\"建表以及数据\"\u003e建表以及数据\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-mysql\" data-lang=\"mysql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ecreate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edatabase\u003c/span\u003e Mysql_test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003euse\u003c/span\u003e Mysql_test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#–1.学生表 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Student(s_id,s_name,s_birth,s_sex) –学生编号,学生姓名, 出生年月,学生性别\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003eStudent\u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003es_id\u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    s_name \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    s_brith \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    s_sex \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ePRIMARY\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eKEY\u003c/span\u003e(s_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#–2.课程表 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Course(c_id,c_name,t_id) – –课程编号, 课程名称, 教师编号 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ecreate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etable\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eCourse\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    c_id \u003cspan style=\"color:#66d9ef\"\u003evarchar\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    c_name \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003enot\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    t_id \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ePRIMARY\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eKEY\u003c/span\u003e(c_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e/*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e–3.教师表 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003eTeacher(t_id,t_name) –教师编号,教师姓名 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e*/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTeacher\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    t_id \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    t_name \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ePRIMARY\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eKEY\u003c/span\u003e(t_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e/*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e–4.成绩表 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003eScore(s_id,c_id,s_score) –学生编号,课程编号,分数\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e*/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eCreate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etable\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eScore\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    s_id \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    c_id \u003cspan style=\"color:#66d9ef\"\u003eVARCHAR\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003enot\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    s_score \u003cspan style=\"color:#66d9ef\"\u003eINT\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprimary\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ekey\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003es_id\u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003e,\u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003ec_id\u003cspan style=\"color:#f92672\"\u003e`\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#--插入学生表测试数据\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#(\u0026#39;01\u0026#39; , \u0026#39;赵雷\u0026#39; , \u0026#39;1990-01-01\u0026#39; , \u0026#39;男\u0026#39;)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;赵雷\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1990-01-01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;男\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;钱电\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1990-12-21\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;男\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;孙风\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1990-05-20\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;男\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;04\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;李云\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1990-08-06\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;男\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;05\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;周梅\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1991-12-01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;女\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;06\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;吴兰\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1992-03-01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;女\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;07\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;郑竹\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1989-07-01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;女\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Student \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;08\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;王菊\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1990-01-20\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;女\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#--课程表测试数据\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Course \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;语文\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Course \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;数学\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Course \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;英语\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#--教师表测试数据\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Teacher \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;张三\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Teacher \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;李四\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Teacher \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;王五\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#--成绩表测试数据\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e90\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e99\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e70\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;04\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;04\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e30\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;04\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;05\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e76\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;05\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e87\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;06\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;01\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e31\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;06\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e34\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;07\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;02\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e89\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einsert\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einto\u003c/span\u003e Score \u003cspan style=\"color:#66d9ef\"\u003evalues\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;07\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;03\u0026#39;\u003c/span\u003e , \u003cspan style=\"color:#ae81ff\"\u003e98\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"数据库习题\"\u003e数据库习题\u003c/h2\u003e\n\u003cp\u003e\u0026ndash; 1、查询\u0026quot;01\u0026quot;课程比\u0026quot;02\u0026quot;课程成绩高的学生的信息及课程分数\u003c/p\u003e","title":"Mysql笔试练习题"},{"content":"错误总结 SELECT a.*,avg(b.s_score) as avgsc FROM student a left JOIN score b on a.s_id = b.s_id WHERE avgsc \u0026gt;60 这段SQL查询语句存在几个问题：\n聚合函数的使用：在WHERE子句中使用聚合函数（如AVG）是不允许的。聚合函数只能在SELECT子句中使用，并且需要配合GROUP BY子句。\n缺少GROUP BY子句：由于你在SELECT子句中使用了聚合函数AVG(b.s_score)，你需要使用GROUP BY子句来指定按哪些列进行分组。\n别名在WHERE子句中的使用：在WHERE子句中使用别名（如avgsc）是不允许的，因为WHERE子句在SELECT子句之前执行。\nSELECT a.*, avg(b.s_score) as avgsc FROM student a LEFT JOIN score b on a.s_id = b.s_id GROUP BY a.s_id HAVING avgsc \u0026gt; 60; ","permalink":"https://www.heiok.top/posts/tutorial/mysql%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93/","summary":"\u003ch2 id=\"错误总结\"\u003e错误总结\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e a.\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e,\u003cspan style=\"color:#66d9ef\"\u003eavg\u003c/span\u003e(b.s_score) \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e avgsc \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e student a \u003cspan style=\"color:#66d9ef\"\u003eleft\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eJOIN\u003c/span\u003e score b \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e a.s_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e b.s_id \u003cspan style=\"color:#66d9ef\"\u003eWHERE\u003c/span\u003e avgsc \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e这段SQL查询语句存在几个问题：\u003c/p\u003e\n\u003cp\u003e聚合函数的使用：在WHERE子句中使用聚合函数（如AVG）是不允许的。聚合函数只能在SELECT子句中使用，并且需要配合GROUP BY子句。\u003c/p\u003e\n\u003cp\u003e缺少GROUP BY子句：由于你在SELECT子句中使用了聚合函数AVG(b.s_score)，你需要使用GROUP BY子句来指定按哪些列进行分组。\u003c/p\u003e","title":"Mysql错误总结"},{"content":"排除非空的字段 is not null 和 is null 而不是 ！=null\n模糊查询 不包含和包含 not like 和 like\n请编写一条 SQL 查询语句，从名为 student 的数据表中选择出所有学生的姓名（name）和成绩（score），要求姓名（name）不包含 \u0026#34;李\u0026#34; 这个字。 select name,score from student where name not like \u0026#39;%李%\u0026#39; 逻辑运算 逻辑运算是一种在条件查询中使用的运算符，它允许我们结合多个条件来过滤出符合特定条件的数据。\n在逻辑运算中，常用的运算符有：\nAND：表示逻辑与，要求同时满足多个条件，才返回 true。 OR：表示逻辑或，要求满足其中任意一个条件，就返回 true。 NOT：表示逻辑非，用于否定一个条件（本来是 true，用了 not 后转为 false） 去重 distinct\n排序 order by desc 降序 asc 升序\n分页 limit 1,3 注意，第一条数据的下标就是0，和数组类似\n条件分支 case when 支持同时指定多个分支，示例语法如下： CASE WHEN (条件1) THEN 结果1 WHEN (条件2) THEN 结果2 ... ELSE 其他结果 END 题目 假设有一个学生表 student，包含以下字段：name（姓名）、age（年龄）。请你编写一个 SQL 查询，将学生按照年龄划分为三个年龄等级（age_level）：60 岁以上为 \u0026#34;老同学\u0026#34;，20 岁以上（不包括 60 岁以上）为 \u0026#34;年轻\u0026#34;，20 岁以下为 \u0026#34;小同学\u0026#34;。 返回结果应包含学生的姓名（name）和年龄等级（age_level），并按姓名升序排序。 SELECT name, CASE WHEN (age \u0026gt; 60) THEN \u0026#39;老同学\u0026#39; WHEN (age \u0026gt; 20) THEN \u0026#39;年轻\u0026#39; ELSE \u0026#39;小同学\u0026#39; END AS age_level FROM student ORDER BY name asc; 时间函数 在 SQL 中，时间函数是用于处理日期和时间的特殊函数。它们允许我们在查询中操作和处理日期、时间、日期时间数据，从而使得在数据库中进行时间相关的操作变得更加方便和灵活。\n常用的时间函数有：\nDATE：获取当前日期 DATETIME：获取当前日期时间 TIME：获取当前时间 示例\n假设有一个订单表 orders，包含以下字段：order_id（订单号）、order_date（下单日期）、order_time（下单时间）。数据如下：\norder_id order_date order_time 1 2023-08-01 12:30:45 2 2023-08-01 14:20:10 3 2023-08-02 09:15:00 4 2023-08-02 18:05:30 使用时间函数获取当前日期、当前日期时间和当前时间：\n-- 获取当前日期 SELECT DATE() AS current_date; -- 获取当前日期时间 SELECT DATETIME() AS current_datetime; -- 获取当前时间 SELECT TIME() AS current_time; 字符串处理 upper 将字符串转成大写\nlength 计算长度\nlower 小写\n聚合函数 max\nmin\ncount\navg\nsum\n分组聚合 - 单字段分组 假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、class_id（班级编号）、score（成绩）。请你编写一个 SQL 查询，统计学生表中每个班级的平均成绩（avg_score）。\nselect class_id, avg(score) as avg_score from student group by class_id 分组聚合 - 多字段分组 分组聚合 - having 子句 HAVING 子句与条件查询 WHERE 子句的区别在于，WHERE 子句用于在 分组之前 进行过滤，而 HAVING 子句用于在 分组之后 进行过滤。\n假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、class_id（班级编号）、score（成绩）。请你编写一个 SQL 查询，统计学生表中班级的总成绩超过 150 分的班级编号（class_id）和总成绩（total_score）。\n-- 请在此处输入 SQL select class_id,sum(score) as total_score from student group by class_id having total_score\u0026gt;150 查询进阶 - 关联查询 - cross join 假设有一个学生表 student ，包含以下字段：id（学号）、name（姓名）、age（年龄）、class_id（班级编号）；还有一个班级表 class ，包含以下字段：id（班级编号）、name（班级名称）。\n请你编写一个 SQL 查询，将学生表和班级表的所有行组合在一起，并返回学生姓名（student_name）、学生年龄（student_age）、班级编号（class_id）以及班级名称（class_name）。\n-- 请在此处输入 SQL select s.name as student_name, s.age as student_age,s.class_id as class_id,c.name as class_name from student s join class c 查询进阶 - 子查询 子查询是指在一个查询语句内部 嵌套 另一个完整的查询语句，内层查询被称为子查询。子查询可以用于获取更复杂的查询结果或者用于过滤数据。\n当执行包含子查询的查询语句时，数据库引擎会首先执行子查询，然后将其结果作为条件或数据源来执行外层查询。\n打个比方，子查询就像是在一个盒子中的盒子，外层查询是大盒子，内层查询是小盒子。执行查询时，我们首先打开小盒子获取结果，然后将小盒子的结果放到大盒子中继续处理。\n假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、age（年龄）、score（分数）、class_id（班级编号）。还有一个班级表 class，包含以下字段：id（班级编号）、name（班级名称）。\n请你编写一个 SQL 查询，使用子查询的方式来获取存在对应班级的学生的所有数据，返回学生姓名（name）、分数（score）、班级编号（class_id）字段。\nselect name,score, class_id from student where student.class_id in (select distinct id from class) 查询进阶 - 子查询 - exists 之前的教程讲到，子查询是一种强大的查询工具，它可以嵌套在主查询中，帮助我们进行更复杂的条件过滤和数据检索。\n其中，子查询中的一种特殊类型是 \u0026ldquo;exists\u0026rdquo; 子查询，用于检查主查询的结果集是否存在满足条件的记录，它返回布尔值（True 或 False），而不返回实际的数据。\n假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、age（年龄）、score（分数）、class_id（班级编号）。还有一个班级表 class，包含以下字段：id（班级编号）、name（班级名称）。\n请你编写一个 SQL 查询，使用 exists 子查询的方式来获取 不存在对应班级的 学生的所有数据，返回学生姓名（name）、年龄（age）、班级编号（class_id）字段。\n-- 请在此处输入 SQL select name,age,class_id from student where not exists (select id from class where student.class_id = class.id) 查询进阶 - 组合查询 在 SQL 中，组合查询是一种将多个 SELECT 查询结果合并在一起的查询操作。\n包括两种常见的组合查询操作：UNION 和 UNION ALL。\nUNION 操作：它用于将两个或多个查询的结果集合并， 并去除重复的行 。即如果两个查询的结果有相同的行，则只保留一行。 UNION ALL 操作：它也用于将两个或多个查询的结果集合并， 但不去除重复的行 。即如果两个查询的结果有相同的行，则全部保留。 假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、age（年龄）、score（分数）、class_id（班级编号）。还有一个新学生表 student_new，包含的字段和学生表完全一致。\n请编写一条 SQL 语句，获取所有学生表和新学生表的学生姓名（name）、年龄（age）、分数（score）、班级编号（class_id）字段，要求保留重复的学生记录。\n-- 请在此处输入 SQL select name,age,score,class_id from student union all select name,age,score,class_id from student_new 查询进阶 - 开窗函数 - sum over 在 SQL 中，开窗函数是一种强大的查询工具，它允许我们在查询中进行对分组数据进行计算、 同时保留原始行的详细信息 。\n开窗函数可以与聚合函数（如 SUM、AVG、COUNT 等）结合使用，但与普通聚合函数不同，开窗函数不会导致结果集的行数减少。\n打个比方，可以将开窗函数想象成一种 \u0026ldquo;透视镜\u0026rdquo;，它能够将我们聚焦在某个特定的分组，同时还能看到整体的全景。\n本节我们先讲第一个开窗函数：sum over。\n该函数用法为：\nSUM(计算字段名) OVER (PARTITION BY 分组字段名) 假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、age（年龄）、score（分数）、class_id（班级编号）。\n请你编写一个 SQL 查询，返回每个学生的详细信息（字段顺序和原始表的字段顺序一致），并计算每个班级的学生平均分（class_avg_score）。\n-- 请在此处输入 SQL select id, name, age, score, class_id , avg(score) over (partition by class_id) as class_avg_score from student 查询进阶 - 开窗函数 - sum over order by 之前的教程中，我们讲到了 sum over 开窗函数，并且用它实现了分组统计。\n本节教程我们将学习 sum over 函数的另一种用法：sum over order by，可以实现同组内数据的 累加求和 。\n示例用法如下：\nSUM(计算字段名) OVER (PARTITION BY 分组字段名 ORDER BY 排序字段 排序规则) 举一个应用场景：老师在每个班级里依次点名，每点到一个学生，老师都会记录当前已点到的学生们的分数总和。\n假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、age（年龄）、score（分数）、class_id（班级编号）。\n请你编写一个 SQL 查询，返回每个学生的详细信息（字段顺序和原始表的字段顺序一致），并且按照分数升序的方式累加计算每个班级的学生总分（class_sum_score）。\n-- 请在此处输入 SQL select id,name,age,score,class_id ,sum(score) over (partition by class_id order by score asc) as class_sum_score from student 查询进阶 - 开窗函数 - rank 查询进阶 - 开窗函数 - row_number Row_Number 开窗函数是 SQL 中的一种用于为查询结果集中的每一行 分配唯一连续排名 的开窗函数。\n它与之前讲到的 Rank 函数，Row_Number 函数为每一行都分配一个唯一的整数值，不管是否存在并列（相同排序值）的情况。每一行都有一个唯一的行号，从 1 开始连续递增。\nRow_Number 开窗函数的语法如下（几乎和 Rank 函数一模一样）：\nROW_NUMBER() OVER ( PARTITION BY column1, column2, ... -- 可选，用于指定分组列 ORDER BY column3 [ASC|DESC], column4 [ASC|DESC], ... -- 用于指定排序列及排序方式 ) AS row_number_column 其中，PARTITION BY子句可选，用于指定分组列，将结果集按照指定列进行分组。ORDER BY 子句用于指定排序列及排序方式，决定了计算 Row_Number 时的排序规则。AS row_number_column 用于指定生成的行号列的别名。\neg\n假设有一个学生表 student，包含以下字段：id（学号）、name（姓名）、age（年龄）、score（分数）、class_id（班级编号）。\n请你编写一个 SQL 查询，返回每个学生的详细信息（字段顺序和原始表的字段顺序一致），并且按照分数降序的方式给每个班级内的学生分配一个编号（row_number）。\n-- 请在此处输入 SQL select id,name,age,score,class_id,Row_number() over (partition by class_id order by score desc) as row_number from student 查询进阶 - 开窗函数 - lag / lead ","permalink":"https://www.heiok.top/posts/tutorial/mysql%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2%E7%9F%A5%E8%AF%86/","summary":"\u003ch3 id=\"排除非空的字段\"\u003e排除非空的字段\u003c/h3\u003e\n\u003cp\u003eis not null 和 is null 而不是 ！=null\u003c/p\u003e\n\u003ch3 id=\"模糊查询\"\u003e模糊查询\u003c/h3\u003e\n\u003cp\u003e不包含和包含 not like 和 like\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e请编写一条 SQL 查询语句，从名为 student 的数据表中选择出所有学生的姓名（name）和成绩（score），要求姓名（name）不包含 \u0026#34;李\u0026#34; 这个字。\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eselect name,score from student where name not like \u0026#39;%李%\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"逻辑运算\"\u003e逻辑运算\u003c/h3\u003e\n\u003cp\u003e逻辑运算是一种在条件查询中使用的运算符，它允许我们结合多个条件来过滤出符合特定条件的数据。\u003c/p\u003e","title":"Mysql基础查询知识"},{"content":" 本文汇总了不同版本的SQL面试50题的题目，删去了重复内容，并根据涉及知识点进行分类，按照由易到难、相似题放在一起的思路进行排序并重新编号。适合sql新手按知识点学习/检测自己的 学习效果。\n我使用软件是MySQL8.0，使用其他数据库软件，代码写法可能略有不同。文中给出的是我的解答，算是最近学习的小结。数据分析新手，欢迎交流指正（特别是52、53题，有没有什么更好的思路呢）。\n原始表和汇总后的53道题目分类如下所示。创建原始表非本文重点，代码放在文章最后，有需要的小伙伴可以先跳到最后。\n【Like】\nlike与%的三种用法：\u0026rsquo;%字符\u0026rsquo;/\u0026rsquo;%字符%\u0026rsquo;/\u0026lsquo;字符%\u0026rsquo; 查询「李」姓老师的数量 【Like】 -- 1. 查询「李」姓老师的数量 select count(*) from teacher where tname like \u0026#39;李%\u0026#39;; 查询名字中含有「风」字的学生信息【Like】 -- 2. 查询名字中含有「风」字的学生信息 select * from student where sname like \u0026#39;%风%\u0026#39;; 【聚合函数、group by和where的相爱相杀】\n1.聚合函数sum/avg/count/max/min经常与好基友group by搭配使用\n2.在使用group by时，select后面只能放\n常数（如数字/字符/时间）- 聚合函数- 聚合键（也就是group by后面的列名）； 因此，在使用group by时，千万不要在select后面放聚合键以外的列名！ 3.where函数后面不能直接使用聚合函数！（考虑放在having后面/变成子查询放在where后面）\n查询男生、女生人数【聚合函数】 -- 3. 查询男生、女生人数 select ssex, count(*) from student group by ssex; 查询课程编号为02的总成绩【聚合函数】 -- 4. 查询课程编号为02的总成绩 select cno, sum(score) from sc group by cno having cno=\u0026#39;02\u0026#39;; 查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列【聚合函数】 -- 5. 查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列 select cno, avg(score) as avg_score from sc group by cno order by avg_score desc, cno; 求每门课程的学生人数 【聚合函数】 -- 6. 求每门课程的学生人数 select cno, count(sno) as student_number from sc group by cno; 统计每门课程的学生选修人数（超过 5 人的课程才统计）【聚合函数】 -- 7. 统计每门课程的学生选修人数（超过 5 人的课程才统计） select cno, count(*) as student_number from sc group by cno having count(*)\u0026gt;5 order by student_number desc, cno; 检索至少选修两门课程的学生学号 【聚合函数】 -- 8. 检索至少选修两门课程的学生学号 select sno from sc group by sno having count(cno)\u0026gt;=2; 【子查询】\n1.select的结果列全部来自同一张表（而select的条件列来自不同表里），考虑子查询；\nselect的结果列来自多张表，考虑联结\n2.子查询与in/not in是好基友\n3.“所有/全部/都\u0026quot;类型的查询可以考虑not in求补集\n查询在 SC 表存在成绩的学生信息【子查询】 -- 9. 查询在 SC 表存在成绩的学生信息 select * from student where sno in (select sno from sc); 查询不存在\u0026quot; 01 \u0026ldquo;课程但存在\u0026rdquo; 02 \u0026ldquo;课程的情况【子查询】 -- 10. 查询不存在\u0026#34; 01 \u0026#34;课程但存在\u0026#34; 02 \u0026#34;课程的情况 select * from sc where sno not in (select sno from sc where cno =01) and sno in (select sno from sc where cno=02); 查询同时存在\u0026rdquo; 01 \u0026ldquo;课程和\u0026rdquo; 02 \u0026ldquo;课程的情况【子查询】 -- 11. 查询同时存在\u0026#34; 01 \u0026#34;课程和\u0026#34; 02 \u0026#34;课程的情况 select * from student where sno in(select sno from sc where cno=\u0026#39;01\u0026#39;) and sno in (select sno from sc where cno=\u0026#39;02\u0026#39;); 查询出只选修两门课程的学生学号和姓名【子查询】 -- 12. 查询出只选修两门课程的学生学号和姓名 select sno, sname from student where sno in (select sno from sc group by sno having count(cno)=2); 查询没有学全所有课程的同学的信息 【子查询】 -- 13. 查询没有学全所有课程的同学的信息 -- 注意：用子查询求所有课程数而不是直接写3；student表中有没选课的学生 select * from student where sno not in (select sno from sc group by sno having count(cno)=(select count(*) from course)); 查询选修了全部课程的学生信息【子查询】 -- 14. 查询选修了全部课程的学生信息 select * from student where sno in (select sno from sc group by sno having count(cno)=(select count(cno) from course)); 查询所有课程成绩均小于60分的学号、姓名【子查询】 -- 15. 查询所有课程成绩均小于60分的学号、姓名 /* 思路：先选出有课程成绩\u0026gt;=60分的学号，再用not in求补集得到所有成绩均\u0026lt;60的学号； 注意student表里有未选课的学生！*/ select sno, sname from student where sno not in (select distinct sno from sc where score\u0026gt;=60) and sno in (select distinct sno from sc); 查询课程编号为 01 且课程成绩在 80 分以上的学生的学号和姓名【子查询】 -- 16. 查询课程编号为 01 且课程成绩在 80 分以上的学生的学号和姓名 select sno, sname from student where sno in (select sno from sc where cno=\u0026#39;01\u0026#39; and score\u0026gt;80); 查询学过「张三」老师授课的同学的信息 【子查询】 -- 17. 查询学过「张三」老师授课的同学的信息 -- 四表串联查询。法1： select * from student where sno in (select sno from sc, course, teacher where teacher.tname=\u0026#39;张三\u0026#39; and course.tno=teacher.tno and sc.cno=course.cno); -- 经过试验，即使张三教了不止一门课，也可用使用等号的法1求出所有结果 -- 法2：直接套三个子查询也可以，但是过于冗长，当子查询串联的表比较多时，比较推荐法1用where和等号代替一部分子查询 select * from student where sno in (select sno from sc where cno in (select cno from course where tno= (select tno from teacher where tname=\u0026#39;张三\u0026#39;))); 查询没学过\u0026quot;张三\u0026quot;老师讲授的任一门课程的学生姓名 【子查询】 -- 18. 查询没学过\u0026#34;张三\u0026#34;老师讲授的任一门课程的学生姓名 -- 思路：先求出学过张三老师课程的学生，再在student表里面求补集。注意有没选课任何课的学生。 select sname from student where sno not in (select sno from sc, course, teacher where teacher.tname=\u0026#39;张三\u0026#39; and course.tno=teacher.tno and sc.cno=course.cno); 查询至少有一门课与学号为\u0026rdquo; 01 \u0026ldquo;的同学所学相同的同学的信息 【子查询】 -- 19. 查询至少有一门课与学号为\u0026#34; 01 \u0026#34;的同学所学相同的同学的信息 -- 注意：记得排除学号为“01”的同学本人 select * from student where sno in (select distinct sno from sc where cno in (select cno from sc where sno=\u0026#39;01\u0026#39;)and sno \u0026lt;\u0026gt;\u0026#39;01\u0026#39;); 查询和\u0026rdquo; 01 \u0026ldquo;号的同学学习的课程完全相同的其他同学的信息【子查询】 -- 20. 查询和\u0026#34; 01 \u0026#34;号的同学学习的课程完全相同的其他同学的信息 -- 思路：条件一（表a）：在19题选出至少一门课相同的同学的基础上（in子查询），与01同学选课相同的科目数=01同学的总科目数 -- 条件二（表b）：选课总数与01同学的选课总数也相同 -- 接下来的步骤，表a与表b相交求学号，再结合student表求信息 select * from student where sno in (select a.sno from -- 条件一：在19题选出至少一门课相同的同学的基础上（in子查询），与01同学选课相同的科目数=01同学的总科目数 (select sno, count(cno) from sc where cno in (select cno from sc where sno=01) group by sno having count(cno)=(select count(cno) from sc where sno=01) and sno \u0026lt;\u0026gt;01) a inner join -- 条件二：选课总数与01同学的选课总数也相同 (select sno, count(sno) from sc group by sno having count(sno)=(select count(cno) from sc where sno=01) and sno \u0026lt;\u0026gt;01) b on a.sno=b.sno) 查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩 【子查询】 -- 21. 查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩 /* 注意：题目本身有歧义，我的理解是找出选了不止一门课，且自己所有课程分数相同的学生。 思路：条件1：该学生总选课数\u0026gt;1 条件2：满足1，且该学生所有课程分数最大值=最小值，即可保证所有课程分数相等 */ select * from sc where sno in (select sno from sc group by sno having min(score)=max(score) and count(*)\u0026gt;1); 【联结：inner join/outer join】\n下面一张图就足以说明联结join的各种情况了- SQL面试50题只用到了inner join、简单的outer join(即 left join/right join)、三表联结 检索\u0026rdquo; 01 \u0026ldquo;课程分数小于 60，按分数降序排列的学生信息【inner join】 -- 22. 检索\u0026#34; 01 \u0026#34;课程分数小于 60，按分数降序排列的学生信息 /* 我的疑问：实际上下面两种方法都可以写联结，我的习惯是用法1，后面的联结题也都是这样写的。 但是有没有大神可以从效能或是什么其他角度讲解一下哪种联结的写法比较好？*/ -- 法1： select b.*, a.score from sc as a inner join student as b on a.sno=b.sno where a.cno=\u0026#39;01\u0026#39; and a.score\u0026lt;60 order by a.score desc; -- 法2：先子查询再联结 select a.*, b.score from student as a inner join (select sno, score from sc where cno=\u0026#39;01\u0026#39; and score\u0026lt;60) as b on a.sno=b.sno order by b.score desc; 查询不及格的课程及学生名，学号，按课程号从大到小排列【inner join】 -- 23. 查询不及格的课程及学生名，学号，按课程号从大到小排列 select a.cno, b.sname, b.sno from sc as a inner join student as b on a.sno=b.sno where a.score\u0026lt;60 order by a.cno desc; 查询课程名称为「数学」，且分数低于 60 的学生姓名和分数 【inner join】 -- 24. 查询课程名称为「数学」，且分数低于 60 的学生姓名和分数 select b.sname, a.score from sc as a inner join student as b on a.sno=b.sno where a.score\u0026lt;60 and a.cno =(select cno from course where cname=\u0026#39;数学\u0026#39;); 查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩 【inner join】 -- 25. 查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩 select a.sno, b.sname, avg(a.score) from sc as a inner join student as b on a.sno=b.sno group by a.sno having avg(a.score)\u0026gt;=85; 查询不同老师所教不同课程平均分从高到低显示【inner join】 -- 26. 查询不同老师所教不同课程平均分从高到低显示 select b.tno, a.cno, avg(a.score) from sc as a inner join course as b on a.cno=b.cno group by a.cno order by avg(a.score) desc; 查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩【inner join】 -- 27. 查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩 select a.sno, b.sname, avg(a.score) from sc as a inner join student as b on a.sno=b.sno group by a.sno having avg(a.score)\u0026gt;=60; 28.查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩【inner join】\n-- 28.查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩 select a.sno, b.sname, avg(a.score) from sc as a inner join student as b on a.sno=b.sno where a.score\u0026lt;60 group by a.sno having count(a.score)\u0026gt;=2; 查询同名同性学生名单，并统计同名同性人数【inner join】 -- 29. 查询同名同性学生名单，并统计同名同性人数 /* 思路：同时将姓名和性别2个字段作为分组依据并计数，超过1就说明有重复 注意：原student表中无同名同性别学生，想检验答案的正确性，可以自己添加记录 */ select a.*, b.student_number from student as a inner join (select sname, ssex, count(*) as student_number from student group by sname, ssex having count(*)\u0026gt;1) as b on a.sname=b.sname and a.ssex=b.ssex; 查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）【outer join】 -- 30. 查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况） -- 思路：需要将student表中非两表交集的部分也显示出来，用outer join select a.sno, a.sname, b.cno, b.score from student as a left join sc as b on a.sno=b.sno; 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩。(没成绩的显示为 null )【outer join】 -- 31. 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩(没成绩的显示为 null ) select b.sno, b.sname, count(a.score), sum(a.score) from sc as a right join student as b on a.sno=b.sno group by a.sno; 查询存在\u0026rdquo; 01 \u0026ldquo;课程但可能不存在\u0026rdquo; 02 \u0026ldquo;课程的情况(不存在时显示为 null )【outer join】 -- 32. 查询存在\u0026#34; 01 \u0026#34;课程但可能不存在\u0026#34; 02 \u0026#34;课程的情况(不存在时显示为 null ) -- 思路：1.在sc表中选出临时表a（存在\u0026#34; 01 \u0026#34;课程），临时表b（存在\u0026#34; 02 \u0026#34;课程）； 2. a left join b select a.*, b.cno, b.score from (select * from sc where cno=\u0026#39;01\u0026#39;) as a left join (select * from sc where cno=\u0026#39;02\u0026#39;) as b on a.sno=b.sno; 查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数【三表联结】 -- 33. 查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数 -- 法1：where 与等号 select sname, cname, score from student, course, sc where student.sno=sc.sno and course.cno=sc.cno and score\u0026gt;70; -- 法2 inner join*2 select a.sname, c.cname, b.score from student as a inner join (select * from sc where score\u0026gt;70) as b on a.sno=b.sno inner join course as c on b.cno=c.cno; 查询\u0026rdquo; 01 \u0026ldquo;课程比\u0026rdquo; 02 \u0026ldquo;课程成绩高的学生的信息及课程分数【三表联结】 -- 34. 查询\u0026#34; 01 \u0026#34;课程比\u0026#34; 02 \u0026#34;课程成绩高的学生的信息及课程分数 /* 思路：1.在sc表中选出临时表b（\u0026#34; 01 \u0026#34;课程），临时表c（\u0026#34; 02 \u0026#34;课程）; 2.ab表相交条件：学生号相同且a表成绩\u0026gt;b表成绩 3.再与student表相交 */ select a.*, b.score as \u0026#39;01\u0026#39;, c.score as \u0026#39;02\u0026#39; from student as a inner join (select * from sc where cno=\u0026#39;01\u0026#39;) as b on a.sno=b.sno inner join (select * from sc where cno=\u0026#39;02\u0026#39;) as c on b.sno=c.sno and b.score\u0026gt;c.score; 【limit易错点】\nlimit m,n 表示从第m+1条记录开始，共选n条记录，如limit 1,2 选的是第2、3条记录（很容易误以为是选1、2条记录）- limit n 表示选择前n条记录，是limit 0,n 的省略 成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩【limit】 -- 35. 成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩 /* 思路：1.表联结：可以用inner join；也可以用where+等号 2.成绩最高：成绩降序排列后limit 1；成绩不重复，也可以用max*/ -- 法1：where+等号+limit select student.*, sc.score from sc, course, teacher,student where teacher.tname=\u0026#39;张三\u0026#39; and course.tno=teacher.tno and course.cno=sc.cno and student.sno=sc.sno order by sc.score desc limit 1; -- 法2：where+等号+max select student.*, max(sc.score) as max_score from sc, course, teacher,student where teacher.tname=\u0026#39;张三\u0026#39; and course.tno=teacher.tno and course.cno=sc.cno and student.sno=sc.sno; -- 法3 inner join+limit select a.*, b.score from sc as b inner join student as a on a.sno=b.sno where b.cno=(select cno from course where tno=(select tno from teacher where tname=\u0026#39;张三\u0026#39;)) order by b.score desc limit 1; -- 法4 inner join+max select a.*, max(b.score) as max_score from sc as b inner join student as a on a.sno=b.sno where b.cno=(select cno from course where tno=(select tno from teacher where tname=\u0026#39;张三\u0026#39;)); 成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩【limit】 -- 36. 成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩 /* 思路：1.student表与sc表联结为临时表a；2.用limit/max，求出张三老师所授课程的课程号与最高分为临时表b 3.求表a表b的交集，条件是课程号、成绩与b相等。 */ -- 法1：limit select a.* from (select student.*, sc.cno, sc.score from student, sc where student.sno=sc.sno) as a inner join (select cno, score from sc where cno=(select cno from course, teacher where teacher.tname=\u0026#39;张三\u0026#39; and course.tno=teacher.tno )order by score desc limit 1) as b on a.cno=b.cno and a.score=b.score; -- 法2：max select a.* from (select student.*, sc.cno, sc.score from student, sc where student.sno=sc.sno) as a inner join (select cno, max(score) as score from sc where cno= (select cno from teacher, course where teacher.tname=\u0026#39;张三\u0026#39; and teacher.tno=course.tno) group by cno) as b on a.cno=b.cno and a.score=b.score; 【窗口函数 rank/dense_rank/row_number】\nrank/dense_rank/row_number等窗口函数只能写在select后面，不能直接写在where后面，要筛选窗口函数的结果列时，先写子查询，再用where+列别名完成 按各科成绩进行排序，并显示排名，Score 重复时保留名次空缺【窗口函数】 --37. 按各科成绩进行排序，并显示排名，Score 重复时保留名次空缺 select *, rank() over (partition by cno order by score desc) as ranking from sc; 按各科成绩进行排序，并显示排名，Score 重复时合并名次【窗口函数】 -- 38. 按各科成绩进行排序，并显示排名，Score 重复时合并名次 select *, dense_rank() over (partition by cno order by score desc) as ranking from sc; 查询学生的总成绩，并进行排名，总分重复时保留名次空缺【窗口函数】 -- 39. 查询学生的总成绩，并进行排名，总分重复时保留名次空缺 select sno, sum(score), rank() over (order by sum(score) desc) as ranking from sc group by sno; 查询学生的总成绩，并进行排名，总分重复时不保留名次空缺【窗口函数】 -- 40. 查询学生的总成绩，并进行排名，总分重复时不保留名次空缺 select sno, sum(score), dense_rank() over (order by sum(score) desc) as ranking from sc group by sno; 查询每门功成绩最好的前两名【窗口函数】 -- 41. 查询每门功成绩最好的前两名 /* 思路：“成绩最好的前两名”我的理解是在有成绩重复的时候，保留名次空缺，即用rank分科排名，名次\u0026lt;=2。 比如有2个人或者3个人并列第一，这种方法就能将这2个人/3个人都选出来。 3个人并列的情况中，我没有用limit2的原因是似乎没有恰当理由删去1个明明考了最高成绩的学生。 注意：rank函数只能用在select后面，不能用在where后面，所以要先写子查询，为子查询、rank函数结果分别起别名，再筛选名次\u0026lt;=2 */ select * from (select *, rank() over(partition by cno order by score desc) as ranking from sc) as a where ranking \u0026lt;=2; 查询各科成绩前三名的记录【窗口函数】 -- 42. 查询各科成绩前三名的记录 /* 思路：“成绩前三” 我的理解是出现成绩并列，不保留名次空缺。因此用dense_rank分科排名，名次\u0026lt;=3。 注意：dense_rank函数只能用在select后面，不能用在where后面，所以要先写子查询，为子查询、dense_rank函数结果分别起别名，再筛选名次\u0026lt;=3 */ select * from (select *, dense_rank() over(partition by cno order by score desc) as ranking from sc) as a where ranking \u0026lt;=3; 查询所有课程成绩第2名到第3名的学生信息及该课程成绩【窗口函数】 -- 43. 查询所有课程成绩第2名到第3名的学生信息及该课程成绩 -- 思路：同42，用dense_rank, 名次in (2,3) select a.*, b.cno, b.score, b.ranking from student a inner join (select *, dense_rank() over (partition by cno order by score desc) ranking from sc ) b on a.sno=b.sno where ranking in (2,3); 【case】case 结合聚合函数来旋转行列字段是一种常用技巧\n44.按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩【case】\n-- 44.按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩 /* 注意：1.case 结合聚合函数来旋转行列字段是一种常用技巧 2.else null不能写为else 0，因为0代表选了课但是得了0分 3.student表里面有没有选课的学生 */ select b.sno, a.avg_score, a.01, a.02, a.03 from (select sno, avg(score) as avg_score, max(case when cno=\u0026#39;01\u0026#39; then score else null end) as \u0026#39;01\u0026#39;, max(case when cno=\u0026#39;02\u0026#39; then score else null end) as \u0026#39;02\u0026#39;, max(case when cno=\u0026#39;03\u0026#39; then score else null end) as \u0026#39;03\u0026#39; from sc group by sno) as a right join student as b on a.sno=b.sno; 使用分段[100-85]，[85-70]，[70-60]，[\u0026lt;60]来统计各科成绩，分别统计各分数段人数：课程ID和课程名称【case】 -- 45. 使用分段[100-85]，[85-70]，[70-60]，[\u0026lt;60]来统计各科成绩，分别统计各分数段人数：课程ID和课程名称 -- 思路：要计数产生多个新的列，考虑用case+sum来完成 select a.cno, b.cname, sum(case when a.score\u0026gt;=85 then 1 else 0 end) as \u0026#39;[100-85]\u0026#39;, sum(case when a.score\u0026gt;=70 and a.score\u0026lt;85 then 1 else 0 end) as \u0026#39;[85-70]\u0026#39;, sum(case when a.score\u0026gt;=60 and a.score\u0026lt;70 then 1 else 0 end) as \u0026#39;[70-60]\u0026#39;, sum(case when a.score\u0026lt;60 then 1 else 0 end) as \u0026#39;[\u0026lt;60]\u0026#39; from sc as a inner join course as b on a.cno=b.cno group by a.cno; 查询各科成绩最高分、最低分和平均分：以如下形式显示：课程 ID ，课程 name ，最高分，最低分，平均分，及格率，中等率，优良率，优秀率。及格为\u0026gt;=60，中等为：70-80，优良为：80-90，优秀为：\u0026gt;=90 【case】 -- 46. 查询各科成绩最高分、最低分和平均分：以如下形式显示：课程 ID ，课程 name ，最高分，最低分，平均分，及格率，中等率，优良率，优秀率。及格为\u0026gt;=60，中等为：70-80，优良为：80-90，优秀为：\u0026gt;=90 -- 思路：1.用case+sum计数 2.分数比率=1.的结果/选课人数 select a.cno \u0026#39;课程ID\u0026#39;, b.cname \u0026#39;课程name\u0026#39;, max(a.score) \u0026#39;最高分\u0026#39;, min(a.score) \u0026#39;最低分\u0026#39;, avg(a.score) \u0026#39;平均分\u0026#39;, sum(case when a.score\u0026gt;=60 then 1 else 0 end)/count(a.score) \u0026#39;及格率\u0026#39;, sum(case when a.score\u0026gt;=70 and a.score\u0026lt;80 then 1 else 0 end)/count(a.score) \u0026#39;中等率\u0026#39;, sum(case when a.score\u0026gt;=80 and a.score\u0026lt;90 then 1 else 0 end)/count(a.score) \u0026#39;优良率\u0026#39;, sum(case when a.score\u0026gt;=90 then 1 else 0 end)/count(a.score) \u0026#39;优秀率\u0026#39; from sc a inner join course b on a.cno=b.cno group by a.cno; 统计各科成绩各分数段人数：课程编号，课程名称，[100-85]，[85-70]，[70-60]，[60-0] 及所占百分比【case】 -- 47. 统计各科成绩各分数段人数：课程编号，课程名称，[100-85]，[85-70]，[70-60]，[60-0] 及所占百分比 -- 思路同46 select a.cno, b.cname, sum(case when a.score\u0026gt;=85 then 1 else 0 end) as \u0026#39;[100-85]人数\u0026#39;, sum(case when a.score\u0026gt;=70 and a.score\u0026lt;85 then 1 else 0 end) as \u0026#39;[85-70]人数\u0026#39;, sum(case when a.score\u0026gt;=60 and a.score\u0026lt;70 then 1 else 0 end) as \u0026#39;[70-60]人数\u0026#39;, sum(case when a.score\u0026lt;60 then 1 else 0 end) as \u0026#39;[60-0]人数\u0026#39;, sum(case when a.score\u0026gt;=85 then 1 else 0 end)/count(a.sno) as \u0026#39;[100-85]百分比\u0026#39;, sum(case when a.score\u0026gt;=70 and a.score\u0026lt;85 then 1 else 0 end)/count(a.sno) as \u0026#39;[85-70]百分比\u0026#39;, sum(case when a.score\u0026gt;=60 and a.score\u0026lt;70 then 1 else 0 end)/count(a.sno) as \u0026#39;[70-60]百分比\u0026#39;, sum(case when a.score\u0026lt;60 then 1 else 0 end)/count(a.sno) as \u0026#39;[60-0]百分比\u0026#39; from sc as a inner join course as b on a.cno=b.cno group by a.cno; 【时间函数】\n在mysql里计算时间差：\n日期差：datediff(time终, time始)- 指定时间差：timestampdiff(timestamp, time始, time终) 令人崩溃的一点是，即便是如此相近的两个时间差函数，其后面时间参数的顺序居然是相反的，如果计算结果出现了负数，考虑参数写反的可能性。 查询各学生的年龄，只按年份来算【时间函数】 -- 48. 查询各学生的年龄，只按年份来算 -- 思路：year函数分别求出current_date和sage的年，相减即可 select sno, sname, year(current_date())-year(sage) as age from student; 按照出生日期来算，当前月日 \u0026lt; 出生年月的月日则，年龄减一【时间函数】 -- 49. 按照出生日期来算，当前月日 \u0026lt; 出生年月的月日则，年龄减一 -- 思路：使用timestampdiff()求差，将时间戳设置为年即可 Select sno, sname, timestampdiff(year, sage, current_date()) as age from student; 查询本月过生日的学生【时间函数】 -- 50. 查询本月过生日的学生 -- 思路：month函数分别求出current_date和sage的月份，相同即可 select sno, sname, sage from student where month(sage)=month(current_date()); 查询下月过生日的学生【时间函数】 -- 51. 查询下月过生日的学生 -- 思路参见50 select sno, sname, sage from student where month(sage)=month(current_date())+1; 查询本周过生日的学生【时间函数】* -- 52. 查询本周过生日的学生 /* 思路：1.replace将生日中的年换为今天的年，计算同学的生日在本年是第几周； 2.求出今天是本年的第几周 3.若相等，则符合条件 注意：这种方法存在问题，1月第一周和12月最后一周可能跨年，倒置结果出错。欢迎提供更好的方案。*/ select sno, sname, sage from student where week(replace(sage, year(sage), year(current_date())), 1) = week(current_date(),1); 查询下周过生日的学生【时间函数】* -- 53. 查询下周过生日的学生 -- 思路和存在问题参见52 select sno, sname, sage from student where week(replace(sage, year(sage), year(current_date())), 1) = week(current_date(),1)+1; 【创建原始表】\n插入数据 怕出错的话，可以先start transaction; 确认数据插入无误后再commit; -- 创建数据库exercise create database exercise; -- 使用数据库exercise use exercise; -- 创建学生表student create table student (Sno varchar(10) not null, Sname varchar(10) , Sage date , Ssex varchar(10) , primary key (Sno)); start transaction; insert into student values (\u0026#39;01\u0026#39;, \u0026#39;赵雷\u0026#39;, \u0026#39;1990-01-01\u0026#39;, \u0026#39;男\u0026#39;); insert into student values (\u0026#39;02\u0026#39;, \u0026#39;钱电\u0026#39;, \u0026#39;1990-12-21\u0026#39;, \u0026#39;男\u0026#39;); insert into student values (\u0026#39;03\u0026#39;, \u0026#39;孙风\u0026#39;, \u0026#39;1990-05-20\u0026#39;, \u0026#39;男\u0026#39;); insert into student values (\u0026#39;04\u0026#39;, \u0026#39;李云\u0026#39;, \u0026#39;1990-08-06\u0026#39;, \u0026#39;男\u0026#39;); insert into student values (\u0026#39;05\u0026#39;, \u0026#39;周梅\u0026#39;, \u0026#39;1991-12-01\u0026#39;, \u0026#39;女\u0026#39;); insert into student values (\u0026#39;06\u0026#39;, \u0026#39;吴兰\u0026#39;, \u0026#39;1992-03-01\u0026#39;, \u0026#39;女\u0026#39;); insert into student values (\u0026#39;07\u0026#39;, \u0026#39;郑竹\u0026#39;, \u0026#39;1989-07-01\u0026#39;, \u0026#39;女\u0026#39;); insert into student values (\u0026#39;08\u0026#39;, \u0026#39;王菊\u0026#39;, \u0026#39;1990-01-20\u0026#39;, \u0026#39;女\u0026#39;); commit; -- 创建科目表course create table course (Cno varchar(10) not null, Cname varchar(10) , Tno varchar(10) , primary key (Cno)); start transaction; insert into course values (\u0026#39;01\u0026#39;, \u0026#39;语文\u0026#39;, \u0026#39;02\u0026#39;); insert into course values (\u0026#39;02\u0026#39;, \u0026#39;数学\u0026#39;, \u0026#39;01\u0026#39;); insert into course values (\u0026#39;03\u0026#39;, \u0026#39;英语\u0026#39;, \u0026#39;03\u0026#39;); commit; -- 创建教师表teacher create table teacher (Tno varchar(10) not null, Tname varchar(10) , primary key (Tno)); strat transaction; insert into teacher values (\u0026#39;01\u0026#39;, \u0026#39;张三\u0026#39;); insert into teacher values (\u0026#39;02\u0026#39;, \u0026#39;李四\u0026#39;); insert into teacher values (\u0026#39;03\u0026#39;, \u0026#39;王五\u0026#39;); commit; -- 创建成绩表 sc create table sc (Sno varchar (10) , Cno varchar (10) , score decimal(18,1), primary key (Sno, Cno)); start transaction; insert into SC values(\u0026#39;01\u0026#39; , \u0026#39;01\u0026#39; , 80); insert into SC values(\u0026#39;01\u0026#39; , \u0026#39;02\u0026#39; , 90); insert into SC values(\u0026#39;01\u0026#39; , \u0026#39;03\u0026#39; , 99); insert into SC values(\u0026#39;02\u0026#39; , \u0026#39;01\u0026#39; , 70); insert into SC values(\u0026#39;02\u0026#39; , \u0026#39;02\u0026#39; , 60); insert into SC values(\u0026#39;02\u0026#39; , \u0026#39;03\u0026#39; , 80); insert into SC values(\u0026#39;03\u0026#39; , \u0026#39;01\u0026#39; , 80); insert into SC values(\u0026#39;03\u0026#39; , \u0026#39;02\u0026#39; , 80); insert into SC values(\u0026#39;03\u0026#39; , \u0026#39;03\u0026#39; , 80); insert into SC values(\u0026#39;04\u0026#39; , \u0026#39;01\u0026#39; , 50); insert into SC values(\u0026#39;04\u0026#39; , \u0026#39;02\u0026#39; , 30); insert into SC values(\u0026#39;04\u0026#39; , \u0026#39;03\u0026#39; , 20); insert into SC values(\u0026#39;05\u0026#39; , \u0026#39;01\u0026#39; , 76); insert into SC values(\u0026#39;05\u0026#39; , \u0026#39;02\u0026#39; , 87); insert into SC values(\u0026#39;06\u0026#39; , \u0026#39;01\u0026#39; , 31); insert into SC values(\u0026#39;06\u0026#39; , \u0026#39;03\u0026#39; , 34); insert into SC values(\u0026#39;07\u0026#39; , \u0026#39;02\u0026#39; , 89); insert into SC values(\u0026#39;07\u0026#39; , \u0026#39;03\u0026#39; , 98); commit; ","permalink":"https://www.heiok.top/posts/tutorial/mysql%E7%BB%83%E4%B9%A0%E9%A2%98-50/","summary":"\u003col\u003e\n\u003cli\u003e本文汇总了不同版本的SQL面试50题的题目，删去了重复内容，并根据涉及知识点进行分类，按照由易到难、相似题放在一起的思路进行排序并重新编号。适合sql新手按知识点学习/检测自己的\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e学习效果。\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e\n\u003cp\u003e我使用软件是MySQL8.0，使用其他数据库软件，代码写法可能略有不同。文中给出的是我的解答，算是最近学习的小结。数据分析新手，欢迎交流指正（特别是52、53题，有没有什么更好的思路呢）。\u003c/p\u003e","title":"Mysql练习题-50"},{"content":"索引 1.1 索引分类 1.1.1 主键索引 1.表中的列设定为主键后，数据库会自动建立主键索引。\n2.单独创建和删除主键索引语法：\n创建主键索引语法： alter table 表名 add primary key (字段);\n删除主键索引语法： alter table 表名 drop primary key;\n1.1.2 唯一索引 表中的列创建了唯一约束时，数据库会自动建立唯一索引。 单独创建和删除唯一索引语法： 创建唯一索引语法：alter table 表名 add unique 索引名(字段)；\n或 create unique index 索引名 on 表名(字段)；\n删除唯一索引语法：drop index 索引名 on 表名;\n1.1.3 单值索引 即一个索引只包含单个列，一个表可以有多个单值索引。\n建表时可随表一起建立单值索引 单独创建和删除单值索引： 创建单值索引： alter table 表名 add index 索引名(字段);\n或 create index 索引名 on 表名(字段);\n删除单值索引：drop index 索引名 on 表名;\n1.1.4 复合索引 即一个索引包含多个列：\n建表时可随表一起建立复合索引 单独创建和删除复合索引： 创建复合索引：create index 索引名 on 表名(字段1,字段2);\n或 alter table 表名 add index 索引名(字段,字段2);\n删除复合索引: drop index 索引名 on 表名;\n1.2. 性能分析 1.2.1 MySQL常见瓶颈 SQL中对大量数据进行比较、关联、排序、分组时CPU的瓶颈。\n实例内存满足不了缓存数据或排序等需要，导致产生大量的物理IO。查询数据时扫描过多数据行，导致查询效率低。\n1.2.2 Explain 使用EXPLAIN关键字可以模拟优化器执行SQL查询语句，从而知道MYSQL是如何处理SQL语句的。可以用来分析查询语句或是表的结构的性能瓶颈。其作用:\n1）表的读取顺序\n2）哪些索引可以使用\n3）数据读取操作的操作类型\n4）那些索引被实际使用\n5）表之间的引用\n6）每张表有多少行被优化器查询\nEXPLAIN关键字使用起来比较简单： explain + SQL语句：\n1.3 Explain重要字段名 1.3.1 id select查询的序列号，表示查询中执行select子句或操作表的顺序。\nid相同时，执行顺序由上至下。\nid不同，如果是子查询，id的序号会递增，id值越大优先级越高，则先被执行。\nid相同和不同都存在时，id相同的可以理解为一组，从上往下顺序执行，所有组中，id值越大，优先级越高越先执行。\n1.3.2 select_type 查询的类型，常见值有：\nSIMPLE :简单的 select 查询,查询中不包含子查询或者UNION。\nPRIMARY:查询中若包含任何复杂的子部分，最外层查询则被标记为Primary。\nDERIVED:在FROM列表中包含的子查询被标记为DERIVED(衍生),MySQL会递归执行这些子查询, 把结果放在临时表里。\nSUBQUERY: 在SELECT或WHERE列表中包含了子查询。\n1.3.3 table 显示这一行的数据是关于哪张表的。\n1.3.4 type 访问类型排序:\nSystem：表只有一行记录（等于系统表），这是const类型的特列，平时不会出现，这个也可以忽略不计。\nConst：表示通过索引一次就找到了,const用于比较primary key或者unique索引。因为只匹配一行数据，所以很快，如将主键置于where列表中，MySQL就能将该查询转换为一个常量。\neq_ref：唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配。常见于主键或唯一索引扫描。\nRef：非唯一性索引扫描，返回匹配某个单独值的所有行。本质上也是一种索引访问，它返回所有匹配某个单独值的行，然而，它可能会找到多个符合条件的行，所以他应该属于查找和扫描的混合体。\nRange：只检索给定范围的行,使用一个索引来选择行。key 列显示使用了哪个索引\n一般就是在你的where语句中出现了between、\u0026lt;、\u0026gt;、in等的查询这种范围扫描索引扫描比全表扫描要好，因为它只需要开始于索引的某一点，而结束语另一点，不用扫描全部索引。\nIndex：Full Index Scan，index与ALL区别为index类型只遍历索引树。这通常比ALL快，因为索引文件通常比数据文件小。也就是说虽然all和Index都是读全表，但index是从索引中读取的，而all是从硬盘中读的。\nAll：Full Table Scan，将遍历全表以找到匹配的行。\n从最好到最差依次是:system\u0026gt;const\u0026gt;eq_ref\u0026gt;ref\u0026gt;range\u0026gt;index\u0026gt;All 。一般来说，最好保证查询能达到range级别，最好能达到ref。\n","permalink":"https://www.heiok.top/posts/tutorial/mysql%E4%BC%98%E5%8C%96-%E7%B4%A2%E5%BC%95/","summary":"\u003ch2 id=\"索引\"\u003e索引\u003c/h2\u003e\n\u003ch2 id=\"11-索引分类\"\u003e1.1 索引分类\u003c/h2\u003e\n\u003ch3 id=\"111-主键索引\"\u003e1.1.1 主键索引\u003c/h3\u003e\n\u003cp\u003e1.表中的列设定为主键后，数据库会自动建立主键索引。\u003c/p\u003e\n\u003cp\u003e2.单独创建和删除主键索引语法：\u003c/p\u003e\n\u003cp\u003e创建主键索引语法： alter table 表名 add primary key (字段);\u003c/p\u003e\n\u003cp\u003e删除主键索引语法： alter table 表名 drop primary key;\u003c/p\u003e\n\u003ch3 id=\"112-唯一索引\"\u003e1.1.2 唯一索引\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e表中的列创建了唯一约束时，数据库会自动建立唯一索引。\u003c/li\u003e\n\u003cli\u003e单独创建和删除唯一索引语法：\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e创建唯一索引语法：alter table 表名 add unique 索引名(字段)；\u003c/p\u003e","title":"Mysql优化-索引"},{"content":"nginx配置ssl支持https的详细步骤 文章概要：在建站的时候我们通常要让网站通过https进行访问，不然使用http过程中，所有信息都是未加密的，并且用户访问的时候浏览器会屏蔽我们的网站。本文介绍如何通过nginx配置ssl以支持通过https协议访问网站。 本文内容来自：谷流仓AI - ai.guliucang.com\n一、修改nginx配置文件 打开nginx.conf配置文件，修改需要添加支持ssl的server块，比如 http { server { listen 443 ssl; # https默认为443端口，当然也可以用任何端口。后面ssl用于告诉Nginx在指定的端口上启用SSL/TLS加密 server_name example.com; # 你网站的域名 # 下面输入证书和私钥的地址（详细解释看下文的注释1） ssl_certificate certs/my_cert.crt; # 证书（查看注释2） ssl_certificate_key certs/my_cert.key; # 证书对应的私钥文件（查看注释3） ssl_session_cache shared:SSL:1m; # 可选配置，设置了 SSL 会话缓存的类型和大小。（具体查看注释5） ssl_session_timeout 5m; # 可选配置，设置了 SSL 会话缓存的超时时间为 5 分钟。 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; # 可选配置， 指定了 SSL/TLS 握手过程中允许使用的加密算法的优先级顺序。（具体查看注释7） ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3; # 可选配置，指定了允许使用的 SSL/TLS 协议版本。（具体查看注释8） ssl_prefer_server_ciphers on; # 可选配置（具体查看注释9） } } 修改保存了上面的配置文件之后，使用nginx -t验证一下配置文件是否正确配置。 提示syntax ok之后，就可以用nginx -s reload重载配置，使配置立即生效。 ###二、验证\n通过https访问上面配置好的网站，可以在浏览器地址栏左侧的锁图标点开看看是否显示证书是安全的了。\n三、（可选）HTTP重定向到HTTPS 如果希望将所有HTTP请求重定向到HTTPS,可以添加以下配置:\nserver { listen 80; server_name example.com; return 301 https://$server_name$request_uri; } 保存修改之后，nginx -s reload重载配置文件即可。\n相关注释 ssl证书：\n有免费的有也收费的，没钱的用免费的就行了， 比如Let\u0026rsquo;s Encrypt。\n如何下载证书？\n可以去阿里云的数字证书页面获取，可以申请20个免费的DigitCert证书 Let\u0026rsquo;s Encrypt的可以安装certbot自动化下载证书还可以自动续期 Let\u0026rsquo;s Encrypt如何通过certbot下载证书？\ncentos中通过yum安装certbot：yum install certbot -y\n签发下载泛域名证书*.example.com(这样所有子域名也可以用): certbot certonly -d \u0026quot;*.example.com\u0026quot; -d example.com --manual --preferred-challenges dns-01 --server https://acme-v02.api.letsencrypt.org/directory, 其中--preferred-challenges dns-01表示通过dns的方式验证自己对网站的所有权。比如我的域名解析服务是阿里云提供的，按照certbot的要求，去阿里云的云解析界面添加一个指定的TXT类域名解析就行了。\n签发成功后给出如下提示\nCongratulations! Your certificate and chain have been saved at: /etc/letsencrypt/live/example.com/fullchain.pem Your key file has been saved at: /etc/letsencrypt/live/example.com/privkey.pem Your certificate will expire on 2024-06-16. To obtain a new or tweaked version of this certificate in the future, simply run certbot again. To non-interactively renew *all* of your certificates, run \u0026#34;certbot renew\u0026#34; 之后快要过期之前通过certbot renew即可签发新的证书。\n证书有效期？\n免费的证书目前一般只有3个月有效期，到期之前需要重新签发新的证书 证书还没过期，直接新申请一个证书，旧的证书会立即失效吗？\n不会。旧证书的过期时间是固定的,不会因为申请了新证书而提前失效。除非你直接把旧的证书从服务器上删掉了。 可以在在过期前提前申请好一个新的证书，新的证书不会影响旧的证书。然后过期前把新的证书放到服务器替换掉旧的证书，并nginx -s reload重载配置就行了。 关于ssl_certificate\n证书文件包含服务器的公钥、服务器信息以及证书颁发机构（CA）的数字签名。 证书文件用于向客户端证明服务器的身份，并提供服务器的公钥。 可以是.pem格式的文件，也可以是.crt格式的文件（详情查看注释4） 关于ssl_certificate_key\n私钥文件包含与证书文件中公钥相对应的私钥。 私钥用于对数据进行解密和签名操作，必须严格保密。 可以是.pem格式的文件，也可以是.key格式的文件 pem文件和crt文件有啥区别，都能用吗？\nSSL证书的PEM和CRT格式都是用于存储SSL/TLS证书的文件格式，它们之间有一些区别，但在大多数情况下可以互换使用。 PEM（Privacy Enhanced Mail）格式是一种基于Base64编码的文件格式，以 -----BEGIN CERTIFICATE----- 开头，以 -----END CERTIFICATE----- 结尾。PEM文件可以包含证书、私钥或者公钥。PEM格式的文件可以用于存储SSL/TLS证书、私钥和公钥。 CRT（Certificate）格式与PEM格式类似，也是基于Base64编码，但通常只包含证书本身，不包含私钥。CRT格式的文件通常只用于存储SSL/TLS证书。 如果你有一个包含证书和私钥的PEM文件，可以直接在Nginx配置中使用该文件。以Let\u0026rsquo;s Encrypt签发的证书为例，ssl_certificate填/path/to/fullchain.pem和ssl_certificate_key填对应私钥地址/path/to/privkey.pem 如果你有单独的CRT证书文件和私钥文件，需要在Nginx配置中分别指定证书文件和私钥文件的路径。 ssl_session_cache\n这个配置设置了 SSL 会话缓存的类型和大小。 shared 表示在所有工作进程之间共享缓存。 SSL 是缓存的名称。 1m 表示缓存的最大大小为 1 兆字节。 启用 SSL 会话缓存可以提高性能，因为它允许客户端在后续连接中重用之前协商的会话参数，避免了重新进行完整的 SSL/TLS 握手过程。 ssl_session_timeout\n这个配置设置了 SSL 会话缓存的超时时间为 5 分钟。 ssl_ciphers\n这个配置指定了 SSL/TLS 握手过程中允许使用的加密算法的优先级顺序。 它使用了一个加密算法的列表，按照优先级从高到低排列。 建议使用安全性较高的加密算法，并禁用一些不安全的算法（如 NULL、aNULL、MD5、ADH、RC4 等）。 ssl_protocols\n指定了允许使用的 SSL/TLS 协议版本。 建议只启用安全的协议版本，如 TLSv1.1、TLSv1.2 和 TLSv1.3，禁用不安全的 SSL v2 和 SSL v3。 ssl_prefer_server_ciphers\n这个配置指定了在 SSL/TLS 握手过程中，优先使用服务器端指定的加密算法，而不是客户端提供的加密算法。 这样可以确保使用更安全的加密算法。 同一个域名不同端口，可以用同一个SSL证书吗？\n可以。SSL证书是基于域名颁发的，而不是基于端口号。 例如，假设你有一个域名为example.com的网站，并且你在nginx.conf中配置了多个服务器块，分别监听不同的端口： server { listen 443 ssl; server_name example.com; ssl_certificate /path/to/certificate.crt; ssl_certificate_key /path/to/private.key; ... } server { listen 8443 ssl; server_name example.com; ssl_certificate /path/to/certificate.crt; ssl_certificate_key /path/to/private.key; ... } 在上面的示例中，两个服务器块都使用相同的SSL证书（certificate.crt）和私钥（private.key），尽管它们监听不同的端口（443和8443）。\n当客户端通过不同的端口访问你的网站时，例如https://example.com或https://example.com:8443，Nginx将使用相同的SSL证书来建立安全连接，因为证书是基于域名example.com颁发的。\n","permalink":"https://www.heiok.top/posts/tutorial/nginx%E9%85%8D%E7%BD%AEssl%E6%94%AF%E6%8C%81https%E7%9A%84%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4/","summary":"\u003ch2 id=\"content_views\"\u003enginx配置ssl支持https的详细步骤\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e文章概要\u003c/strong\u003e：在建站的时候我们通常要让网站通过https进行访问，不然使用http过程中，所有信息都是未加密的，并且用户访问的时候浏览器会屏蔽我们的网站。本文介绍如何通过nginx配置ssl以支持通过https协议访问网站。\n\u003cstrong\u003e本文内容来自：\u003ca href=\"https://ai.guliucang.com\"\u003e谷流仓AI - ai.guliucang.com\u003c/a\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"一修改nginx配置文件\"\u003e一、修改nginx配置文件\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e打开nginx.conf配置文件，修改需要添加支持ssl的server块，比如\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehttp {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tserver {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        listen       443 ssl; # https默认为443端口，当然也可以用任何端口。后面ssl用于告诉Nginx在指定的端口上启用SSL/TLS加密\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        server_name  example.com; # 你网站的域名\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        # 下面输入证书和私钥的地址（详细解释看下文的注释1）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ssl_certificate      certs/my_cert.crt; # 证书（查看注释2）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ssl_certificate_key  certs/my_cert.key; # 证书对应的私钥文件（查看注释3）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ssl_session_cache    shared:SSL:1m; # 可选配置，设置了 SSL 会话缓存的类型和大小。（具体查看注释5）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ssl_session_timeout  5m; # 可选配置，设置了 SSL 会话缓存的超时时间为 5 分钟。\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; # 可选配置， 指定了 SSL/TLS 握手过程中允许使用的加密算法的优先级顺序。（具体查看注释7）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3; # 可选配置，指定了允许使用的 SSL/TLS 协议版本。（具体查看注释8）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ssl_prefer_server_ciphers  on; # 可选配置（具体查看注释9）\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"2\"\u003e\n\u003cli\u003e修改保存了上面的配置文件之后，使用\u003ccode\u003enginx -t\u003c/code\u003e验证一下配置文件是否正确配置。\u003c/li\u003e\n\u003cli\u003e提示syntax ok之后，就可以用\u003ccode\u003enginx -s reload\u003c/code\u003e重载配置，使配置立即生效。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e###二、验证\u003c/p\u003e","title":"nginx配置ssl支持https的详细步骤"},{"content":"fixture 是什么 fixture 是 pytest 测试框架中的一个核心概念，可以理解为测试的\u0026quot;固定装置\u0026quot;或\u0026quot;夹具\u0026quot;，主要用于为测试函数提供可复用的测试环境或数据。\nfixture 的主要功能： 准备测试环境：在测试前设置好需要的数据、资源或状态 提供测试数据：为测试函数提供输入数据 共享测试资源：让多个测试函数共享相同的测试资源 处理清理工作：测试完成后清理环境，释放资源 fixture 的定义和使用： @pytest.fixture def numbers(): # 设置测试数据 a = 10 b = 5 # 返回测试数据 return (a, b) # 使用 fixture def test_add_with_fixture(numbers): a, b = numbers assert add(a, b) == 15 特点： 自动注入：只需要在测试函数的参数中指定 fixture 的名称，pytest 就会自动将 fixture 的返回值注入到测试函数中 可配置作用域：可以设置 fixture 的作用域（function、class、module、session） 支持 setup/teardown：使用 yield 语句可以实现测试前的设置和测试后的清理工作 可以嵌套：fixture 可以依赖其他 fixture 示例：设置和清理 @pytest.fixture def database_connection(): print(\u0026#34;连接到测试数据库...\u0026#34;) # setup 部分 db = {\u0026#34;connected\u0026#34;: True} yield db # 提供资源给测试函数 print(\u0026#34;关闭数据库连接...\u0026#34;) # teardown 部分 在你的代码中的应用： 数据加载 fixture：yaml_test_data 加载 YAML 测试数据 对象创建 fixture：todo_lists_from_yaml 根据 YAML 数据创建测试对象 参数化 fixture：divide_test_case 和 scenario_data 提供多组测试数据 共享资源 fixture：load_yaml_file 提供可在多个测试间共享的功能 fixture 使测试代码更简洁、更模块化，降低了测试维护成本，是编写高质量测试的重要工具。\nPytest 中的标记(Markers) pytest中的标记(markers)分为两类：内置标记和自定义标记。\n标记类型 内置标记 pytest框架自带的一些常用内置标记：\n@pytest.mark.skip - 跳过测试 @pytest.mark.skipif - 有条件地跳过测试 @pytest.mark.xfail - 标记预期失败的测试 @pytest.mark.parametrize - 参数化测试 @pytest.mark.usefixtures - 使用指定的fixtures @pytest.mark.filterwarnings - 过滤警告信息 自定义标记 math和slow是自定义标记，它们是在代码中定义的，而不是pytest框架自带的。在项目中，这些标记通常在pytest.ini文件中注册：\n[pytest] markers = slow: 标记测试为慢速测试 math: 标记测试为数学相关测试 basic: 标记测试为基础测试 advanced: 标记测试为高级测试 math_class: 标记整个测试类为数学测试 你可以根据项目需要自由创建任意数量的自定义标记，但最好在pytest.ini文件中注册它们，以避免pytest警告。\n使用示例 自定义标记的使用 @pytest.mark.slow def test_slow_operation(): time.sleep(0.1) assert add(1, 1) == 2 @pytest.mark.math def test_only_math(): assert divide(10, 2) == 5 组合使用多个标记 @pytest.mark.slow @pytest.mark.math def test_slow_and_math(): time.sleep(0.1) assert multiply(2, 3) == 6 带参数的标记 @pytest.mark.parametrize(\u0026#34;a, b, expected\u0026#34;, [ pytest.param(1, 2, 3, marks=pytest.mark.basic), pytest.param(5, 7, 12, marks=pytest.mark.basic), pytest.param(-10, 10, 0, marks=pytest.mark.advanced), ]) def test_add_with_marks(a, b, expected): assert add(a, b) == expected 类级别的标记 @pytest.mark.math_class class TestMathClass: def test_add_in_class(self): assert add(3, 4) == 7 def test_subtract_in_class(self): assert subtract(10, 7) == 3 运行带标记的测试 # 运行所有标记为\u0026#39;math\u0026#39;的测试 pytest -m math # 运行所有标记为\u0026#39;slow\u0026#39;的测试 pytest -m slow # 运行所有不是\u0026#39;slow\u0026#39;的测试 pytest -m \u0026#34;not slow\u0026#34; # 运行同时具有\u0026#39;slow\u0026#39;和\u0026#39;math\u0026#39;标记的测试 pytest -m \u0026#34;slow and math\u0026#34; # 运行带有\u0026#39;basic\u0026#39;或\u0026#39;advanced\u0026#39;标记的测试 pytest -m \u0026#34;basic or advanced\u0026#34; 总结 @pytest.mark.math和@pytest.mark.slow等是项目中自定义的标记，用于对测试进行分类和筛选，而不是pytest框架自带的标记。标记提供了一种灵活的方式来组织测试并选择性地运行特定类型的测试。\n","permalink":"https://www.heiok.top/posts/tutorial/pytest_01/","summary":"\u003ch1 id=\"fixture-是什么\"\u003efixture 是什么\u003c/h1\u003e\n\u003cp\u003efixture 是 pytest 测试框架中的一个核心概念，可以理解为测试的\u0026quot;固定装置\u0026quot;或\u0026quot;夹具\u0026quot;，主要用于为测试函数提供可复用的测试环境或数据。\u003c/p\u003e\n\u003ch2 id=\"fixture-的主要功能\"\u003efixture 的主要功能：\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e准备测试环境\u003c/strong\u003e：在测试前设置好需要的数据、资源或状态\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e提供测试数据\u003c/strong\u003e：为测试函数提供输入数据\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e共享测试资源\u003c/strong\u003e：让多个测试函数共享相同的测试资源\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e处理清理工作\u003c/strong\u003e：测试完成后清理环境，释放资源\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"fixture-的定义和使用\"\u003efixture 的定义和使用：\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@pytest.fixture\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003enumbers\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 设置测试数据\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    a \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    b \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 返回测试数据\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e (a, b)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 使用 fixture\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_add_with_fixture\u003c/span\u003e(numbers):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    a, b \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e numbers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e add(a, b) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"特点\"\u003e特点：\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e自动注入\u003c/strong\u003e：只需要在测试函数的参数中指定 fixture 的名称，pytest 就会自动将 fixture 的返回值注入到测试函数中\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可配置作用域\u003c/strong\u003e：可以设置 fixture 的作用域（function、class、module、session）\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e支持 setup/teardown\u003c/strong\u003e：使用 yield 语句可以实现测试前的设置和测试后的清理工作\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e可以嵌套\u003c/strong\u003e：fixture 可以依赖其他 fixture\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"示例设置和清理\"\u003e示例：设置和清理\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@pytest.fixture\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edatabase_connection\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;连接到测试数据库...\u0026#34;\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e# setup 部分\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    db \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;connected\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eyield\u003c/span\u003e db  \u003cspan style=\"color:#75715e\"\u003e# 提供资源给测试函数\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;关闭数据库连接...\u0026#34;\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e# teardown 部分\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"在你的代码中的应用\"\u003e在你的代码中的应用：\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e数据加载 fixture\u003c/strong\u003e：\u003ccode\u003eyaml_test_data\u003c/code\u003e 加载 YAML 测试数据\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e对象创建 fixture\u003c/strong\u003e：\u003ccode\u003etodo_lists_from_yaml\u003c/code\u003e 根据 YAML 数据创建测试对象\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e参数化 fixture\u003c/strong\u003e：\u003ccode\u003edivide_test_case\u003c/code\u003e 和 \u003ccode\u003escenario_data\u003c/code\u003e 提供多组测试数据\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e共享资源 fixture\u003c/strong\u003e：\u003ccode\u003eload_yaml_file\u003c/code\u003e 提供可在多个测试间共享的功能\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003efixture 使测试代码更简洁、更模块化，降低了测试维护成本，是编写高质量测试的重要工具。\u003c/p\u003e","title":"pytest_01"},{"content":"Python 函数解析: enumerate 和 json.dumps enumerate 函数解释 enumerate() 是 Python 内置函数，用于在遍历可迭代对象（如列表、元组等）时同时获取索引和元素值。\n基本语法 enumerate(iterable, start=0) iterable: 要遍历的可迭代对象 start: 索引的起始值，默认为0 工作原理 当你使用 for i, x in enumerate(test_data) 时:\ni 是当前元素的索引（从0开始） x 是当前元素的值 每次循环，enumerate 会返回一个包含两个元素的元组 (索引, 值) 示例 如果 test_data 是 ['a', 'b', 'c']，那么循环结果是:\n第一次迭代: i=0, x='a' 第二次迭代: i=1, x='b' 第三次迭代: i=2, x='c' 使用场景 在你的代码中，enumerate 用于:\n知道当前处理的是第几个测试数据 生成默认的测试用例描述（如 \u0026ldquo;测试用例 #1\u0026rdquo;） 帮助在错误信息中标识出问题的测试用例编号 json.dumps() 参数解释 json.dumps() 是 Python 的 JSON 模块中的函数，用于将 Python 对象转换为 JSON 字符串。\n你使用的参数 json.dumps(test_data, indent=2, ensure_ascii=False) test_data: 要转换为 JSON 字符串的 Python 对象 indent=2: 设置缩进级别为2个空格，使输出的 JSON 格式化且易读 ensure_ascii=False: 允许输出非 ASCII 字符（如中文），而不将它们转换为 Unicode 编码 参数详解 indent:\n控制 JSON 输出的格式化和缩进 如果为 None（默认），则输出紧凑格式，没有空格和换行 如果为非负整数（如2），则进行格式化输出，使用指定数量的空格作为缩进 ensure_ascii:\n默认为 True，将所有非 ASCII 字符转换为 Unicode 转义序列 设为 False 时，会直接输出非 ASCII 字符 在处理中文等非英文字符时特别有用，让输出更易读 效果对比 不使用参数时:\njson.dumps({\u0026#39;测试\u0026#39;: \u0026#39;中文\u0026#39;, \u0026#39;a\u0026#39;: [1, 2]}) # 输出: \u0026#39;{\u0026#34;\\\\u6d4b\\\\u8bd5\u0026#34;: \u0026#34;\\\\u4e2d\\\\u6587\u0026#34;, \u0026#34;a\u0026#34;: [1, 2]}\u0026#39; 使用参数后:\njson.dumps({\u0026#39;测试\u0026#39;: \u0026#39;中文\u0026#39;, \u0026#39;a\u0026#39;: [1, 2]}, indent=2, ensure_ascii=False) # 输出: # { # \u0026#34;测试\u0026#34;: \u0026#34;中文\u0026#34;, # \u0026#34;a\u0026#34;: [ # 1, # 2 # ] # } 在你的测试代码中，这样设置可以让打印出的测试数据更加清晰易读，特别是当测试数据包含中文描述时。\n","permalink":"https://www.heiok.top/posts/tutorial/python-%E5%87%BD%E6%95%B0%E8%A7%A3%E6%9E%90-enumerate-%E5%92%8C-jsondumps/","summary":"\u003ch1 id=\"python-函数解析-enumerate-和-jsondumps\"\u003ePython 函数解析: enumerate 和 json.dumps\u003c/h1\u003e\n\u003ch2 id=\"enumerate-函数解释\"\u003e\u003ccode\u003eenumerate\u003c/code\u003e 函数解释\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eenumerate()\u003c/code\u003e 是 Python 内置函数，用于在遍历可迭代对象（如列表、元组等）时同时获取索引和元素值。\u003c/p\u003e\n\u003ch3 id=\"基本语法\"\u003e基本语法\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenumerate(iterable, start\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eiterable\u003c/code\u003e: 要遍历的可迭代对象\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estart\u003c/code\u003e: 索引的起始值，默认为0\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"工作原理\"\u003e工作原理\u003c/h3\u003e\n\u003cp\u003e当你使用 \u003ccode\u003efor i, x in enumerate(test_data)\u003c/code\u003e 时:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ei\u003c/code\u003e 是当前元素的索引（从0开始）\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ex\u003c/code\u003e 是当前元素的值\u003c/li\u003e\n\u003cli\u003e每次循环，\u003ccode\u003eenumerate\u003c/code\u003e 会返回一个包含两个元素的元组 \u003ccode\u003e(索引, 值)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"示例\"\u003e示例\u003c/h3\u003e\n\u003cp\u003e如果 \u003ccode\u003etest_data\u003c/code\u003e 是 \u003ccode\u003e['a', 'b', 'c']\u003c/code\u003e，那么循环结果是:\u003c/p\u003e","title":"Python 函数解析: enumerate 和 json.dumps"},{"content":"1. Redis Redis有哪些数据类型 难度系数： Redis本质上是一个Key-Value类型的内存数据库，整个数据库统统加载在内存当中进行操作，定期通过异步操作把数据库数据flush到 硬盘上进行保存。因为是纯内存操作，Redis的性能非常出色，每秒可以处理超过 10万次读写操作，是已知性能最快的Key-Value DB。 Redis的出色之处不仅仅是性能， Redis最大的魅力是支持保存多种数据结构，此外单个value的最大限制是1GB，不像 memcached只能保存1MB的数据，因此Redis可以用来实现很多有用的功能，比方说 用他的List来做FIFO双向链表，实现一个轻量级的高性 能消息队列服务，用他的Set可以做高性能的tag系统等等。另外Redis也可以对存入的Key-Value设置expire时间，因 此也可以被当作一 个功能加强版的memcached来用。 Redis的主要缺点是数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，因此Redis适合的场景主要 局限在较小数据量的高性能操作和运算上。 常用基本数据类型如下： ● string 字符串（一个字符串类型最大存储容量为512M） ● list 可以重复的集合 ● set 不可以重复的集合 ● hash 类似于Map ● zset(sorted set）带分数的set\n2. Redis为什么快 难度系数： 完全基于内存，绝大部分请求是纯粹的内存操作，非常快速。数据存在内存中，类似于HashMap，HashMap的优势就是查找和操作的时间复杂度都是O(1) 数据结构简单，对数据操作也简单，Redis中的数据结构是专门进行设计的 采用单线程，避免了不必要的上下文切换和竞争条件，也不存在多进程或者多线程导致的切换而消耗 CPU，不用去考虑各种锁的问题，不存在加锁释放锁操作，没有因 为可能出现死锁而导致的性能消耗 使用I/O多路复用模型，非阻塞IO 3.Redis数据和MySQL数据库的一致性如何实现 : 一、 延时双删策略 在写库前后都进行redis.del(key)操作，并且设定合理的超时时间。 具体步骤是： 1）先删除缓存 2）再写数据库 3）休眠500毫秒（根据具体的业务时间来定） 4）再次删除缓存。 那么，这个500毫秒怎么确定的，具体该休眠多久呢？ 需要评估自己的项目的读数据业务逻辑的耗时。这么做的目的，就是确保读请求结束，写请求可以删除读请求造成的缓存脏数据。 当然，这种策略还要考虑 redis 和数据库主从同步的耗时。最后的写数据的休眠时间：则在读数据业务逻辑的耗时的基础上，加上几百ms即可。比如：休眠1秒。 二、设置缓存的过期时间 从理论上来说，给缓存设置过期时间，是保证最终一致性的解决方案。所有的写操作以数据库为准，只要到达缓存过期时间，则后面的读请求自然会从数据库中读取 新值然后回填缓存 结合双删策略+缓存超时设置，这样最差的情况就是在超时时间内数据存在不一致，而且又增加了写请求的耗时。 三、如何写完数据库后，再次删除缓存成功？ 上述的方案有一个缺点，那就是操作完数据库后，由于种种原因删除缓存失败，这时，可能就会出现数据不一致的情况。这里，我们需要提供一个保障重试的方案。 1、方案一具体流程 （1）更新数据库数据； （2）缓存因为种种问题删除失败； （3）将需要删除的key发送至消息队列； （4）自己消费消息，获得需要删除的key； （5）继续重试删除操作，直到成功。 然而，该方案有一个缺点，对业务线代码造成大量的侵入。于是有了方案二，在方案二中，启动一个订阅程序去订阅数据库的binlog，获得需要操作的数据。在应用程 序中，另起一段程序，获得这个订阅程序传来的信息，进行删除缓存操作。 2、方案二具体流程 （1）更新数据库数据； （2）数据库会将操作信息写入binlog日志当中； （3）订阅程序提取出所需要的数据以及key； （4）另起一段非业务代码，获得该信息； （5）尝试删除缓存操作，发现删除失败； （6）将这些信息发送至消息队列； （7）重新从消息队列中获得该数据，重试操作。\n","permalink":"https://www.heiok.top/posts/tutorial/redis-%E9%9D%A2%E8%AF%95%E9%A2%98%E8%AE%B0%E5%BD%95/","summary":"\u003ch2 id=\"1-redis-redis有哪些数据类型-难度系数\"\u003e1. Redis Redis有哪些数据类型 难度系数：\u003c/h2\u003e\n\u003cp\u003eRedis本质上是一个Key-Value类型的内存数据库，整个数据库统统加载在内存当中进行操作，定期通过异步操作把数据库数据flush到 硬盘上进行保存。因为是纯内存操作，Redis的性能非常出色，每秒可以处理超过 10万次读写操作，是已知性能最快的Key-Value DB。 Redis的出色之处不仅仅是性能， Redis最大的魅力是支持保存多种数据结构，此外单个value的最大限制是1GB，不像 memcached只能保存1MB的数据，因此Redis可以用来实现很多有用的功能，比方说 用他的List来做FIFO双向链表，实现一个轻量级的高性 能消息队列服务，用他的Set可以做高性能的tag系统等等。另外Redis也可以对存入的Key-Value设置expire时间，因 此也可以被当作一 个功能加强版的memcached来用。 Redis的主要缺点是数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，因此Redis适合的场景主要 局限在较小数据量的高性能操作和运算上。 常用基本数据类型如下：\n● string 字符串（一个字符串类型最大存储容量为512M）\n● list 可以重复的集合\n● set 不可以重复的集合\n● hash 类似于Map\n● zset(sorted set）带分数的set\u003c/p\u003e","title":"Redis 面试题记录"},{"content":"\n目录 前言 nginx 反向代理 为什么我们需要用到反向代理？ 开始配置 软件版本 申请SSL证书 首先安装nginx 上传.crt和.key证书 创建配置文件 验证配置文件并重启nginx服务 成功 若有帮助，希望可以点赞收藏😁。 {#_1}前言 这段时间借助hexo粗略的搭建了一个自己的个人博客，通过域名访问时发现浏览器一直不安全，最后发现是因为一直通过的http访问。想着既然如此一步到位，完善成https访问方式。正巧腾讯云域名申请报备后， SSL证书的申请很容易， 查阅了不少资料，作为小白最后也完成了这一目标。 所以在这里将踩过的坑，以及经验步骤总结如下，欢迎指正😀。\n首先我会简单解释一下nginx、以及反向代理。\n{#nginx_5}nginx 能找到的大多数资料都是基于 nginx 实现的，那么什么是 nginx 呢？\nNginx（发音同\u0026quot;engine X\u0026quot;）是异步框架的网页服务器，也可以用作反向代理、负载平衡器和HTTP缓存。 \u0026mdash;\u0026mdash;摘自维基百科\n对于不熟悉web的人，或者小白可以将其看作一网页服务器就好，我们这里需要用到的主要有反向代理。\n{#_11}反向代理 借助在知乎上找到的一个图可以很好的解释\n没看明白？没事，来点形象的栗子😏\n正向代理：\n假如你们宿舍只有一位同学可以用手机上网购物，你们有购物的需求都需要借助这位同学来实现。在这个过程中，最终你们都可以达到在电商平台购物的目的，但对于电商平台或者说店家来说，他并不知道到底是谁购买了产品。\n在宿舍这可看作一个小的LAN，那位可以用手机上网的同学则充当了正向代理 的作用，即我们一般意义上的代理 。\n反向代理：\n换个栗子，你们社团需要买一些办公用品以及活动用品，交由一个同学外出采购，因为他有附近所有商家的联系方式。你们将需要购买的用品告诉那个同学后，那个同学外出采购，再带回来。在这个过程中，你们只提交了需求，交由那个同学去完成，而最终每一个物品在实际在哪家店购买，你们并不知晓。\n在上面这个过程中，那位 同学便 扮演了反向代理的角色。\n{#_24}为什么我们需要用到反向代理？ 1、保护服务安全\n隐藏服务节点的IP；\n将服务节点置于防火墙之后，避免直接攻击业务节点服务器。\n2、服务节点更专注于业务，同时提升性能\n由于有反向代理的存在，可以让反向代理服务器去实现比如https、gzip压缩等与业务无关的功能；\n提供动静态分离，将静态文件发往静态服务器或本地文件系统，避免业务节点处理这些与业务无关的请求；\n提供缓存机制，将一些短时间内不会变化的动态内容，在反向代理服务器这层增加缓存，降低业务服务器的请求量；\n由于控制权在代理服务这边，完全可以根据服务节点的性能动态分配请求，做到服务节点性能最佳。\n正是由于Ngxin引入了反向代理的特性，让请求和响应都要经过Nginx，因此给Nginx带来了非常多的可能。比如负载均衡、HTTP缓存等。\n以上内容来自：php中文网\n说回实际，因为 hexo 服务默认开启端口是4000，我们可以通过反向代理将 https 或者 http 指向4000端口。\n{#_38}开始配置 {#_39}软件版本 软件 版本 ubuntu 18.04.5 nginx 1.14.0(Ubuntu) 注意由于nginx版本不同，配置可能不同\n{#SSL_45}申请SSL证书 配置https服务，必须得有SSL证书。在某某云申请的域名、云服务器，都可以在对应的平台申请SSL 证书，很容易且快速。\n在腾讯云官网购买的云服务器，您可以登录 云服务器控制台 获取服务器 IP 地址、用户名及密码。\n申请下SSL证书，将其下载解压后，会发现有Nginx文件夹，打开里面的.crt和.key文件即分别是你的证书和密钥。\n{#nginx_53}首先安装nginx sudo apt install nginx {#crtkey_57}上传.crt和.key证书 安装好的 nginx 在 /etc/nginx 目录下，在此目录我们先创建一个ssl的目录用来存储证书。\ncd /etc/nginx sudo mkdir ssl 再通过ftp或者ssh将证书的.crt和.key文件上传到 ssl 这个目录下。\n故这样你的\n证书路径就是 /etc/nginx/ssl/1_xxxxxxx.xxx.crt\n密钥路径：/etc/nginx/ssl/2_xxxxxxxx.xxx.key\n{#_68}创建配置文件 在 /etc/nginx/conf.d 目录下，创建 yoursite.conf 文件，内容如下：\n以下配置参考自腾讯云文档中心\nserver { #SSL 访问端口号为 443 listen 443 ssl; #填写绑定证书的域名 server_name your_domain_name; #证书文件名称\t即.crt文件路径 ssl_certificate /etc/nginx/ssl/1_xxxxxxx.xxx.crt; #私钥文件名称\t即.key文件路径 ssl_certificate_key /etc/nginx/ssl/2_xxxxxxxx.xxx.key; ssl_session_timeout 5m; #请按照以下协议配置 ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location / { #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。 root html; index index.html index.htm; #配置代理 因为hexo默认端口为4000，故使其指向 proxy_pass http://localhost:4000; } } server { listen 80; #填写绑定证书的域名 server_name your_domain_name; #把http的域名请求转成https return 301 https://$host$request_uri; } 完成后，保存并退出。\n第一个 server 是配置443端口的https服务，第二个server 是使http自动跳转到Https的安全配置。\n{#nginx_106}验证配置文件并重启nginx服务 在nginx根目录下，通过执行以下指令验证配置文件是否正确\nsudo nginx -t 显示ok和successful则代表成功。\n重启nginx服务\nsudo systemctl restart nginx 检查nginx状态\nsystemctl status nginx {#_120}成功 到这里一切顺利的话，则代表你的配置成功了，现在已经可以通过Https访问你的网站，浏览器不会再显示不安全😏。\n{#_123}若有帮助，希望可以点赞收藏😁。 ","permalink":"https://www.heiok.top/posts/tutorial/%E5%80%9F%E5%8A%A9nginx%E5%AE%9E%E7%8E%B0%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%B9%B6%E9%80%9A%E8%BF%87ssl%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E8%AE%BF%E9%97%AE%E4%BB%A5%E5%8F%8Ahttp%E8%B0%83%E6%95%B4https%E8%AE%BF%E9%97%AE/","summary":"\u003cbr /\u003e\n\u003ch4 id=\"目录\"\u003e目录\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#_1\"\u003e前言\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#nginx_5\"\u003enginx\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#_11\"\u003e反向代理\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_24\"\u003e为什么我们需要用到反向代理？\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_38\"\u003e开始配置\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#_39\"\u003e软件版本\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#SSL_45\"\u003e申请SSL证书\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#nginx_53\"\u003e首先安装nginx\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#crtkey_57\"\u003e上传.crt和.key证书\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_68\"\u003e创建配置文件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#nginx_106\"\u003e验证配置文件并重启nginx服务\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_120\"\u003e成功\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_123\"\u003e若有帮助，希望可以点赞收藏😁。\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr /\u003e\n\u003ch2 id=\"content_views\"\u003e{#_1}前言\u003c/h2\u003e\n\u003cp\u003e这段时间借助hexo粗略的搭建了一个自己的个人博客，通过域名访问时发现浏览器一直不安全，最后发现是因为一直通过的http访问。想着既然如此一步到位，完善成https访问方式。正巧腾讯云域名申请报备后， SSL证书的申请很容易， 查阅了不少资料，作为小白最后也完成了这一目标。 所以在这里将踩过的坑，以及经验步骤总结如下，欢迎指正😀。\u003cbr\u003e\n首先我会简单解释一下nginx、以及反向代理。\u003c/p\u003e","title":"借助nginx实现反向代理，并通过SSL证书实现https访问以及http调整https访问。"},{"content":" 本文首发于只抄博客，欢迎点击原文链接了解更多内容。\n前言 Tailscale 是一款基于 WireGuard 的异地组网工具，它可以将不同网络环境的设备组成一个虚拟局域网，使其可以互相访问。我们只需要在路由器或者 Nas 上安装 Tailscale 进行组网，就可以实现以下效果：\n连接到 Tailscale 的设备，可以直接使用内网 IP 访问家庭局域网 内网设备可以直接使用 Tailscale 分配的 IP 来访问连接到 Tailscale 的设备 支持多个局域网互相访问，每个局域网只需一台设备安装 Tailscale ( 每个局域网的网段不能相同 ) 安装步骤 打开 Tailscale 官网，点击右上角的 Log in，可以直接选择 Google 或者 Microsoft 授权登录 根据提示下载对应平台的客户端，更多平台下载请参考官方文档 Windows Android (国区 Google Play 无法直接下载，可以在 APKMirror 下载) Linux 一键安装脚本 curl -fsSL https://tailscale.com/install.sh | sh 卸载 ：apt-get remove tailscale rm -rf /var/lib/tailscale/tailscaled.state 有图形化界面的平台，直接登录账号即可；而在无图形化界面的平台上，需要输入 tailscale up 打开出现的链接，进行登录即可 默认情况下，会开启 Key Expiry，设备一段时间后会自动失效，可以在设备列表中选择 Disable Key Expiry 完成以上步骤后，启动客户端，即可使用列表中的 IP 进行直接访问 访问局域网 此时，只有连接到 Tailscale 的设备可以互相访问，并不能直接使用内网 IP 来访问整个局域网，我们还需要进行以下配置\n开启 IP 转发 编辑 sysctl.conf 文件 vim /etc/sysctl.conf\n将以下代码取消注释\nnet.ipv4.ip_forward=1 net.ipv6.conf.all.forwarding=1 加载内核参数 sysctl -p {#_45}添加子网路由 例如我的路由器地址为 10.0.0.1，光猫地址为 192.168.1.1，则需要配置的网段为 10.0.0.0/24 与 192.168.1.0/24 tailscale up --advertise-routes=10.0.0.0/24,192.168.1.0/24 在 Tailscale 控制面板中，将刚才添加的子网路由进行开启 {#_Tailscale__59}访问 Tailscale 设备 通过上面的设置，已经实现了连接到 Tailscale 的设备使用内网 IP 访问局域网，但是局域网内的设备仍然无法使用 Tailscale 分配的 IP 来访问那些连接到 Tailscale 的设备，我们还需要在路由器中配置静态路由\n网络 / 主机 IP: Tailscale 的网段 100.64.0.0 网络掩码: 255.192.0.0 网关: 安装 Tailscale 设备的内网 IP {#_69}无法打开网页 部分设备在连接 Tailscale 后，可能存在无法打开网页的问题，只需要在 Tailscale 控制面板中的DNS设置中，将 MagicDNS 进行关闭即可\n","permalink":"https://www.heiok.top/posts/tutorial/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F-%E7%AF%87%E4%B8%80%E9%80%9A%E8%BF%87-tailscale-%E5%BC%82%E5%9C%B0%E7%BB%84%E7%BD%91-%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E5%B1%80%E5%9F%9F%E7%BD%91/","summary":"\u003cblockquote\u003e\n\u003cp\u003e本文首发于只抄博客，欢迎点击\u003ca href=\"https://zhichao.org/posts/tailscale\"\u003e原文链接\u003c/a\u003e了解更多内容。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"前言\"\u003e前言\u003c/h3\u003e\n\u003cp\u003eTailscale 是一款基于 WireGuard 的异地组网工具，它可以将不同网络环境的设备组成一个虚拟局域网，使其可以互相访问。我们只需要在路由器或者 Nas 上安装 Tailscale 进行组网，就可以实现以下效果：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e连接到 Tailscale 的设备，可以直接使用内网 IP 访问家庭局域网\u003c/li\u003e\n\u003cli\u003e内网设备可以直接使用 Tailscale 分配的 IP 来访问连接到 Tailscale 的设备\u003c/li\u003e\n\u003cli\u003e支持多个局域网互相访问，每个局域网只需一台设备安装 Tailscale ( 每个局域网的网段不能相同 )\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"安装步骤\"\u003e安装步骤\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e打开 \u003ca href=\"https://tailscale.com/\"\u003eTailscale 官网\u003c/a\u003e，点击右上角的 Log in，可以直接选择 Google 或者 Microsoft 授权登录\u003c/li\u003e\n\u003cli\u003e根据提示下载对应平台的客户端，更多平台下载请参考\u003ca href=\"https://tailscale.com/kb/installation/\"\u003e官方文档\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tailscale.com/download/windows\"\u003eWindows\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://play.google.com/store/apps/details?id=com.tailscale.ipn\"\u003eAndroid\u003c/a\u003e (国区 Google Play 无法直接下载，可以在 \u003ca href=\"https://www.apkmirror.com/?post_type=app_release\u0026amp;searchtype=apk\u0026amp;s=tailscale\"\u003eAPKMirror\u003c/a\u003e 下载)\u003c/li\u003e\n\u003cli\u003eLinux 一键安装脚本 \u003ccode\u003ecurl -fsSL https://tailscale.com/install.sh | sh\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e卸载\u003c/strong\u003e ：\u003ccode\u003eapt-get remove tailscale\u003c/code\u003e \u003ccode\u003erm -rf /var/lib/tailscale/tailscaled.state\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e有图形化界面的平台，直接登录账号即可；而在无图形化界面的平台上，需要输入 \u003ccode\u003etailscale up\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://img-blog.csdnimg.cn/img_convert/d72032d3828bc1b622c09ba0329c5b26.webp?x-oss-process=image/format,png\" alt=\"tailscale1\"  /\u003e\n\u003c/p\u003e","title":"内网穿透 篇一：通过 Tailscale 异地组网 实现远程访问局域网"},{"content":"如何指定运行特定的pytest测试方法 要指定运行test_divide_parametrized这个特定的测试函数，你可以使用pytest的命令行选项。以下是几种方式：\n1. 使用函数名直接指定 最简单的方法是直接指定测试文件和测试函数名：\npytest test_yaml_data.py::test_divide_parametrized -v 这个命令会:\n运行test_yaml_data.py文件中的 名为test_divide_parametrized的测试函数 -v参数表示详细输出，会显示每个测试用例的结果 2. 使用关键字过滤 如果测试函数名称很长或者不方便输入完整名称，可以使用关键字过滤：\npytest -k \u0026#34;divide_parametrized\u0026#34; -v 这个命令会运行所有名称中包含divide_parametrized的测试函数。\n3. 如果你为测试添加了标记(marker) 如果这个测试函数有特定的标记，比如@pytest.mark.divide：\npytest -m divide -v 4. 运行失败的测试后重新运行单个测试 如果你在全量测试中发现这个测试失败了，可以先运行所有测试，然后只重新运行这个失败的测试：\n# 第一次运行所有测试 pytest # 只重新运行上次失败的测试 pytest --lf # 或者只运行上次失败的第一个测试 pytest --ff 5. 结合其他选项 你还可以结合其他选项，比如:\n# 运行特定测试并显示详细输出 pytest test_yaml_data.py::test_divide_parametrized -v # 运行特定测试并显示捕获的输出（比如print语句） pytest test_yaml_data.py::test_divide_parametrized -v --capture=no # 在测试失败时立即停止 pytest test_yaml_data.py::test_divide_parametrized -v -x 注意事项 如果你的测试函数实际上没有使用@pytest.mark.parametrize，而是通过fixture进行参数化（如你的代码中所示），使用-v选项会看到更详细的输出，显示每个参数化的测试用例。\n如果test_divide_parametrized在不同的文件中有多个，你需要指定文件名确保运行正确的那个。\n如果你的测试在特定的目录下，需要先进入该目录或者在命令中指定路径。\n最常用和最简单的方法是第一种：直接指定文件名和函数名。\n","permalink":"https://www.heiok.top/posts/tutorial/%E5%A6%82%E4%BD%95%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%89%B9%E5%AE%9A%E7%9A%84pytest%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95/","summary":"\u003ch1 id=\"如何指定运行特定的pytest测试方法\"\u003e如何指定运行特定的pytest测试方法\u003c/h1\u003e\n\u003cp\u003e要指定运行\u003ccode\u003etest_divide_parametrized\u003c/code\u003e这个特定的测试函数，你可以使用pytest的命令行选项。以下是几种方式：\u003c/p\u003e\n\u003ch2 id=\"1-使用函数名直接指定\"\u003e1. 使用函数名直接指定\u003c/h2\u003e\n\u003cp\u003e最简单的方法是直接指定测试文件和测试函数名：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epytest test_yaml_data.py::test_divide_parametrized -v\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e这个命令会:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e运行\u003ccode\u003etest_yaml_data.py\u003c/code\u003e文件中的\u003c/li\u003e\n\u003cli\u003e名为\u003ccode\u003etest_divide_parametrized\u003c/code\u003e的测试函数\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-v\u003c/code\u003e参数表示详细输出，会显示每个测试用例的结果\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-使用关键字过滤\"\u003e2. 使用关键字过滤\u003c/h2\u003e\n\u003cp\u003e如果测试函数名称很长或者不方便输入完整名称，可以使用关键字过滤：\u003c/p\u003e","title":"如何指定运行特定的pytest测试方法"},{"content":"使用模式匹配来生成类型驱动和数据驱动的算法 题目：假设某大都市区通过通行费和高峰时段定价来管理交通。 你编写的应用程序根据车辆类型来计算车辆通行费。 后续增强功能包括，定价因车内乘客数而异。 进一步增强功能包括，定价因时间和周几而异。\nnamespace ConsumerVehicleRegistration { public class Car { public int Passengers { get; set; } } } namespace CommercialRegistration { public class DeliveryTruck { public int GrossWeightClass { get; set; } } } namespace LiveryRegistration { public class Taxi { public int Fares { get; set; } } public class Bus { public int Capacity { get; set; } public int Riders { get; set; } } } 附加功能 using NUnit.Framework; namespace Microsoft_learn._7_30; public class TollCalculator { /// \u0026lt;summary\u0026gt; /// 基础通行费计算 /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;vehicle\u0026#34;\u0026gt;车辆类型\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; /// \u0026lt;exception cref=\u0026#34;ArgumentException\u0026#34;\u0026gt;其他未统计车辆\u0026lt;/exception\u0026gt; /// \u0026lt;exception cref=\u0026#34;ArgumentNullException\u0026#34;\u0026gt;参数为空的情况\u0026lt;/exception\u0026gt; public decimal CalculateTollV1(object vehicle) =\u0026gt; vehicle switch { Car c =\u0026gt; 2.00m, Taxi t =\u0026gt; 3.50m, Bus b =\u0026gt; 5.00m, DeliveryTruck t =\u0026gt; 10.00m, { } =\u0026gt; throw new ArgumentException(message: \u0026#34;Not a known vehicle type\u0026#34;, paramName: nameof(vehicle)), null =\u0026gt; throw new ArgumentNullException(nameof(vehicle)) }; /// \u0026lt;summary\u0026gt; /// 通过乘客的数量来计算通行费 /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;vehicle\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; /// \u0026lt;exception cref=\u0026#34;ArgumentException\u0026#34;\u0026gt;\u0026lt;/exception\u0026gt; /// \u0026lt;exception cref=\u0026#34;ArgumentNullException\u0026#34;\u0026gt;\u0026lt;/exception\u0026gt; public decimal CalculateTollV2(object vehicle) =\u0026gt; vehicle switch { // Car {Passengers: 0} =\u0026gt; 2.00m + 0.50m, // Car {Passengers: 1} =\u0026gt; 2.0m, // Car {Passengers: 2} =\u0026gt; 2.0m - 0.50m, // Car =\u0026gt; 2.00m - 1.0m, // // Taxi {Fares: 0} =\u0026gt; 3.50m + 1.00m, // Taxi {Fares: 1} =\u0026gt; 3.50m, // Taxi {Fares: 2} =\u0026gt; 3.50m - 0.50m, // Taxi =\u0026gt; 3.50m - 1.00m, // // Bus b when ((double)b.Riders / (double)b.Capacity) \u0026lt; 0.50 =\u0026gt; 5.00m + 2.00m, // Bus b when ((double)b.Riders / (double)b.Capacity) \u0026gt; 0.90 =\u0026gt; 5.00m - 1.00m, // Bus =\u0026gt; 5.00m, // // DeliveryTruck t when (t.GrossWeightClass \u0026gt; 5000) =\u0026gt; 10.00m + 5.00m, // DeliveryTruck t when (t.GrossWeightClass \u0026lt; 3000) =\u0026gt; 10.00m - 2.00m, // DeliveryTruck =\u0026gt; 10.00m, // // { } =\u0026gt; throw new ArgumentException(message: \u0026#34;Not a known vehicle type\u0026#34;, paramName: nameof(vehicle)), // null =\u0026gt; throw new ArgumentNullException(nameof(vehicle)) // 可使用嵌套的 switch 来减少此代码中重复的地方。 在上面的示例中，Car 和 Taxi 都有四个不同的臂。 在这两种案例中，都可创建向常量模式馈送数据的声明模式。 下面的代码展示了这项技术： Car car =\u0026gt; car.Passengers switch { 1 =\u0026gt; 2.00m + 0.50m, 2 =\u0026gt; 2.00m, 3 =\u0026gt; 2.00m - 0.50m, _ =\u0026gt; 2.00m - 1.00m }, Taxi taxi =\u0026gt; taxi.Fares switch { 0 =\u0026gt; 3.50m + 1.00m, 1 =\u0026gt; 3.50m + 0.50m, 2 =\u0026gt; 3.50m, _ =\u0026gt; 3.50m - 1.00m }, Bus b when ((double)b.Riders / (double)b.Capacity) \u0026lt; 0.50 =\u0026gt; 5.00m + 2.00m, Bus b when ((double)b.Riders / (double)b.Capacity) \u0026gt; 0.90 =\u0026gt; 5.00m - 1.00m, Bus =\u0026gt; 5.00m, DeliveryTruck t when (t.GrossWeightClass \u0026gt; 5000) =\u0026gt; 10.00m + 5.00m, DeliveryTruck t when (t.GrossWeightClass \u0026lt; 3000) =\u0026gt; 10.00m - 2.00m, DeliveryTruck =\u0026gt; 10.00m, { } =\u0026gt; throw new ArgumentException(message: \u0026#34;Not a known vehicle type\u0026#34;, paramName: nameof(vehicle)), null =\u0026gt; throw new ArgumentNullException(nameof(vehicle)) }; public decimal CalculateTollV3(object vahicle) #region 附加功能 //对于最后一个功能，通行费收取机构希望添加有时效性的高峰时段定价。 在早晚高峰时段，通行费翻倍。 此规则只影响一个方向的交通：早高峰时段入城和晚高峰时段出城。 //在工作日的其他时段，通行费增加 50%。 在深夜和清晨，通行费减少 25%。 在周末，无论什么时间，都按正常费率收费 /// \u0026lt;summary\u0026gt; /// 判断当前时间是否为工作日 /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;dayOfWeek\u0026#34;\u0026gt;时间\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; public static bool IsWeekDay(DateTime timeOfToll) =\u0026gt; timeOfToll.DayOfWeek switch { // DayOfWeek.Monday =\u0026gt; true, // DayOfWeek.Tuesday =\u0026gt; true, // DayOfWeek.Wednesday =\u0026gt; true, // DayOfWeek.Thursday =\u0026gt; true, // DayOfWeek.Friday =\u0026gt; true, // DayOfWeek.Saturday =\u0026gt; false, // DayOfWeek.Sunday =\u0026gt; false // 此方法虽然正确，但是具有重复性。 可以简化它 DayOfWeek.Saturday =\u0026gt; false, DayOfWeek.Sunday =\u0026gt; false, _ =\u0026gt; true }; /// \u0026lt;summary\u0026gt; /// 时间分类枚举类 /// \u0026lt;/summary\u0026gt; private enum TimeBand { MorningRush, Daytime, EveningRush, Overnight }; /// \u0026lt;summary\u0026gt; /// 判断当前时间属于哪个时间段 /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;time\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; private static TimeBand GetTimeBand(DateTime time) =\u0026gt; time.Hour switch { \u0026lt; 6 or \u0026gt; 19 =\u0026gt; TimeBand.Overnight, \u0026lt; 10 =\u0026gt; TimeBand.MorningRush, \u0026lt; 16 =\u0026gt; TimeBand.Daytime, _ =\u0026gt; TimeBand.EveningRush, }; /// \u0026lt;summary\u0026gt; /// 根据时间和日期计算费用 /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;timeOfToll\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;inbound\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; public decimal PeakTimePremiumFull(DateTime timeOfToll, bool inbound) =\u0026gt; (IsWeekDay(timeOfToll), GetTimeBand(timeOfToll), inbound) switch { // (true, TimeBand.MorningRush, true) =\u0026gt; 2.00m, // (true, TimeBand.MorningRush, false) =\u0026gt; 1.00m, // (true, TimeBand.Daytime, true) =\u0026gt; 1.50m, // (true, TimeBand.Daytime, false) =\u0026gt; 1.50m, // (true, TimeBand.EveningRush, true) =\u0026gt; 1.00m, // (true, TimeBand.EveningRush, false) =\u0026gt; 2.00m, // (true, TimeBand.Overnight, true) =\u0026gt; 0.75m, // (true, TimeBand.Overnight, false) =\u0026gt; 0.75m, // (false, TimeBand.MorningRush, true) =\u0026gt; 1.00m, // (false, TimeBand.MorningRush, false) =\u0026gt; 1.00m, // (false, TimeBand.Daytime, true) =\u0026gt; 1.00m, // (false, TimeBand.Daytime, false) =\u0026gt; 1.00m, // (false, TimeBand.EveningRush, true) =\u0026gt; 1.00m, // (false, TimeBand.EveningRush, false) =\u0026gt; 1.00m, // (false, TimeBand.Overnight, true) =\u0026gt; 1.00m, // (false, TimeBand.Overnight, false) =\u0026gt; 1.00m, //上面的代码虽起作用，但可以进行简化。 周末对应的所有八个组合的通行费都相同 // (false, _, _) =\u0026gt; 1.00m, // (true, TimeBand.MorningRush, true) =\u0026gt; 2.00m, // (true, TimeBand.MorningRush, false) =\u0026gt; 1.00m, // (true, TimeBand.Daytime, _) =\u0026gt; 1.50m, // (true, TimeBand.EveningRush, true) =\u0026gt; 1.00m, // (true, TimeBand.EveningRush, false) =\u0026gt; 2.00m, // (true, TimeBand.Overnight, _) =\u0026gt; 0.75m, //可以删除通行费正常的两个高峰时段 (false, _, _) =\u0026gt; 1.00m, (true, TimeBand.MorningRush, true) =\u0026gt; 2.00m, (true, TimeBand.Daytime, _) =\u0026gt; 1.50m, (true, TimeBand.EveningRush, true) =\u0026gt; 1.00m, (true, TimeBand.Overnight, _) =\u0026gt; 0.75m, _ =\u0026gt; 1.00m }; #endregion [Test] public void Test01() { decimal calculateToll = CalculateTollV1(new Bus(1, 5)); Console.WriteLine(calculateToll); } } ","permalink":"https://www.heiok.top/posts/tutorial/%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E6%9D%A5%E7%94%9F%E6%88%90%E7%B1%BB%E5%9E%8B%E9%A9%B1%E5%8A%A8%E5%92%8C%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E7%9A%84%E7%AE%97%E6%B3%95/","summary":"\u003ch2 id=\"使用模式匹配来生成类型驱动和数据驱动的算法\"\u003e使用模式匹配来生成类型驱动和数据驱动的算法\u003c/h2\u003e\n\u003cp\u003e题目：\u003cstrong\u003e假设某大都市区通过通行费和高峰时段定价来管理交通。 你编写的应用程序根据车辆类型来计算车辆通行费。 后续增强功能包括，定价因车内乘客数而异。 进一步增强功能包括，定价因时间和周几而异。\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e ConsumerVehicleRegistration\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eCar\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e Passengers { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e CommercialRegistration\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDeliveryTruck\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e GrossWeightClass { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e LiveryRegistration\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTaxi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e Fares { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eBus\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e Capacity { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e Riders { \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003eset\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"附加功能\"\u003e附加功能\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c#\" data-lang=\"c#\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e NUnit.Framework;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e Microsoft_learn._7_30;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTollCalculator\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// 基础通行费计算\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;param name=\u0026#34;vehicle\u0026#34;\u0026gt;车辆类型\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;exception cref=\u0026#34;ArgumentException\u0026#34;\u0026gt;其他未统计车辆\u0026lt;/exception\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;exception cref=\u0026#34;ArgumentNullException\u0026#34;\u0026gt;参数为空的情况\u0026lt;/exception\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edecimal\u003c/span\u003e CalculateTollV1(\u003cspan style=\"color:#66d9ef\"\u003eobject\u003c/span\u003e vehicle) =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        vehicle \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Car c =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Taxi t =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e3.50\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Bus b =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e5.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            DeliveryTruck t =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e10.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            { } =\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003ethrow\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e ArgumentException(message: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Not a known vehicle type\u0026#34;\u003c/span\u003e, paramName: nameof(vehicle)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003ethrow\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e ArgumentNullException(nameof(vehicle))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// 通过乘客的数量来计算通行费\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;param name=\u0026#34;vehicle\u0026#34;\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;exception cref=\u0026#34;ArgumentException\u0026#34;\u0026gt;\u0026lt;/exception\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;exception cref=\u0026#34;ArgumentNullException\u0026#34;\u0026gt;\u0026lt;/exception\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edecimal\u003c/span\u003e CalculateTollV2(\u003cspan style=\"color:#66d9ef\"\u003eobject\u003c/span\u003e vehicle) =\u0026gt; vehicle \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Car {Passengers: 0}        =\u0026gt; 2.00m + 0.50m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Car {Passengers: 1}        =\u0026gt; 2.0m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Car {Passengers: 2}        =\u0026gt; 2.0m - 0.50m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Car                        =\u0026gt; 2.00m - 1.0m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Taxi {Fares: 0}  =\u0026gt; 3.50m + 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Taxi {Fares: 1}  =\u0026gt; 3.50m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Taxi {Fares: 2}  =\u0026gt; 3.50m - 0.50m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Taxi             =\u0026gt; 3.50m - 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Bus b when ((double)b.Riders / (double)b.Capacity) \u0026lt; 0.50 =\u0026gt; 5.00m + 2.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Bus b when ((double)b.Riders / (double)b.Capacity) \u0026gt; 0.90 =\u0026gt; 5.00m - 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// Bus =\u0026gt; 5.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// DeliveryTruck t when (t.GrossWeightClass \u0026gt; 5000) =\u0026gt; 10.00m + 5.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// DeliveryTruck t when (t.GrossWeightClass \u0026lt; 3000) =\u0026gt; 10.00m - 2.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// DeliveryTruck =\u0026gt; 10.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e//\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// { }     =\u0026gt; throw new ArgumentException(message: \u0026#34;Not a known vehicle type\u0026#34;, paramName: nameof(vehicle)),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// null    =\u0026gt; throw new ArgumentNullException(nameof(vehicle))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 可使用嵌套的 switch 来减少此代码中重复的地方。 在上面的示例中，Car 和 Taxi 都有四个不同的臂。 在这两种案例中，都可创建向常量模式馈送数据的声明模式。 下面的代码展示了这项技术：\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Car car =\u0026gt; car.Passengers \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em + \u003cspan style=\"color:#ae81ff\"\u003e0.50\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em - \u003cspan style=\"color:#ae81ff\"\u003e0.50\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            _ =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em - \u003cspan style=\"color:#ae81ff\"\u003e1.00\u003c/span\u003em\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Taxi taxi =\u0026gt; taxi.Fares \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e3.50\u003c/span\u003em + \u003cspan style=\"color:#ae81ff\"\u003e1.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e3.50\u003c/span\u003em + \u003cspan style=\"color:#ae81ff\"\u003e0.50\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e3.50\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            _ =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e3.50\u003c/span\u003em - \u003cspan style=\"color:#ae81ff\"\u003e1.00\u003c/span\u003em\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Bus b when ((\u003cspan style=\"color:#66d9ef\"\u003edouble\u003c/span\u003e)b.Riders / (\u003cspan style=\"color:#66d9ef\"\u003edouble\u003c/span\u003e)b.Capacity) \u0026lt; \u003cspan style=\"color:#ae81ff\"\u003e0.50\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e5.00\u003c/span\u003em + \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Bus b when ((\u003cspan style=\"color:#66d9ef\"\u003edouble\u003c/span\u003e)b.Riders / (\u003cspan style=\"color:#66d9ef\"\u003edouble\u003c/span\u003e)b.Capacity) \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e0.90\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e5.00\u003c/span\u003em - \u003cspan style=\"color:#ae81ff\"\u003e1.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Bus =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e5.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        DeliveryTruck t when (t.GrossWeightClass \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e) =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e10.00\u003c/span\u003em + \u003cspan style=\"color:#ae81ff\"\u003e5.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        DeliveryTruck t when (t.GrossWeightClass \u0026lt; \u003cspan style=\"color:#ae81ff\"\u003e3000\u003c/span\u003e) =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e10.00\u003c/span\u003em - \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        DeliveryTruck =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e10.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        { } =\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003ethrow\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e ArgumentException(message: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Not a known vehicle type\u0026#34;\u003c/span\u003e, paramName: nameof(vehicle)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003ethrow\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e ArgumentNullException(nameof(vehicle))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edecimal\u003c/span\u003e CalculateTollV3(\u003cspan style=\"color:#66d9ef\"\u003eobject\u003c/span\u003e vahicle)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#region\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e附加功能\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e//对于最后一个功能，通行费收取机构希望添加有时效性的高峰时段定价。 在早晚高峰时段，通行费翻倍。 此规则只影响一个方向的交通：早高峰时段入城和晚高峰时段出城。\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e//在工作日的其他时段，通行费增加 50%。 在深夜和清晨，通行费减少 25%。 在周末，无论什么时间，都按正常费率收费\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// 判断当前时间是否为工作日\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;param name=\u0026#34;dayOfWeek\u0026#34;\u0026gt;时间\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e IsWeekDay(DateTime timeOfToll) =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        timeOfToll.DayOfWeek \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// DayOfWeek.Monday    =\u0026gt; true,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// DayOfWeek.Tuesday   =\u0026gt; true,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// DayOfWeek.Wednesday =\u0026gt; true,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// DayOfWeek.Thursday  =\u0026gt; true,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// DayOfWeek.Friday    =\u0026gt; true,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// DayOfWeek.Saturday  =\u0026gt; false,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// DayOfWeek.Sunday    =\u0026gt; false\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// 此方法虽然正确，但是具有重复性。 可以简化它\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            DayOfWeek.Saturday =\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            DayOfWeek.Sunday =\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            _ =\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// 时间分类枚举类\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eenum\u003c/span\u003e TimeBand\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        MorningRush,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Daytime,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        EveningRush,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Overnight\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// 判断当前时间属于哪个时间段\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;param name=\u0026#34;time\u0026#34;\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e TimeBand GetTimeBand(DateTime time) =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        time.Hour \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u0026lt; \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e or \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e19\u003c/span\u003e =\u0026gt; TimeBand.Overnight,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u0026lt; \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e =\u0026gt; TimeBand.MorningRush,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u0026lt; \u003cspan style=\"color:#ae81ff\"\u003e16\u003c/span\u003e =\u0026gt; TimeBand.Daytime,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            _ =\u0026gt; TimeBand.EveningRush,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// 根据时间和日期计算费用\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;param name=\u0026#34;timeOfToll\u0026#34;\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;param name=\u0026#34;inbound\u0026#34;\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edecimal\u003c/span\u003e PeakTimePremiumFull(DateTime timeOfToll, \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e inbound) =\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        (IsWeekDay(timeOfToll), GetTimeBand(timeOfToll), inbound) \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.MorningRush, true) =\u0026gt; 2.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.MorningRush, false) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.Daytime, true) =\u0026gt; 1.50m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.Daytime, false) =\u0026gt; 1.50m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.EveningRush, true) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.EveningRush, false) =\u0026gt; 2.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.Overnight, true) =\u0026gt; 0.75m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.Overnight, false) =\u0026gt; 0.75m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.MorningRush, true) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.MorningRush, false) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.Daytime, true) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.Daytime, false) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.EveningRush, true) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.EveningRush, false) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.Overnight, true) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, TimeBand.Overnight, false) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e//上面的代码虽起作用，但可以进行简化。 周末对应的所有八个组合的通行费都相同\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (false, _, _) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.MorningRush, true) =\u0026gt; 2.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.MorningRush, false) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.Daytime, _) =\u0026gt; 1.50m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.EveningRush, true) =\u0026gt; 1.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.EveningRush, false) =\u0026gt; 2.00m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// (true, TimeBand.Overnight, _) =\u0026gt; 0.75m,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e//可以删除通行费正常的两个高峰时段\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            (\u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e, _, _) =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e1.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            (\u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e, TimeBand.MorningRush, \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e) =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e2.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            (\u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e, TimeBand.Daytime, _) =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e1.50\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            (\u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e, TimeBand.EveningRush, \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e) =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e1.00\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            (\u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e, TimeBand.Overnight, _) =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e0.75\u003c/span\u003em,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            _ =\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e1.00\u003c/span\u003em\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#endregion\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e    [Test]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e Test01()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003edecimal\u003c/span\u003e calculateToll = CalculateTollV1(\u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e Bus(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Console.WriteLine(calculateToll);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"使用模式匹配来生成类型驱动和数据驱动的算法"},{"content":"数据库语法 DDL\u0026ndash;创建表 操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。\n查询当前数据库下所有表名称\nshow databases;--单行注释 /*多行注释*/ 创建数据库\ncreate databases 数据库名称; 删除\ndrop databases 数据库名称; 使用数据库\nselect database();--查看当前使用的数据库 use 数据库名称; ##DDl\u0026ndash;操作表\n查询表 查询当前数据库下所有的表名称\nshow tables;--先进入表（use 数据库名称）在使用 查询表结构\ndesc 表结构; 创建表 最后一行不加逗号\nCREATE TABLE 表名 ( 字段名1 数据类型1, 字段名2 数据类型2, … 字段名n 数据类型n ); 数据类型 数值\ntinyint : 小整数型，占一个字节 int ： 大整数类型，占四个字节 eg ： age int double ： 浮点类型 使用格式： 字段名 double(总长度,小数点后保留的位数) eg ： score double(5,2) 日期\ndate ： 日期值。只包含年月日 eg ：birthday date ： datetime ： 混合日期和时间值。包含年月日时分秒 字符串\nchar ： 定长字符串。 优点：存储性能高 缺点：浪费空间 eg ： name char(10) 如果存储的数据字符个数不足10个，也会占10个的空间 varchar ： 变长字符串。 优点：节约空间 缺点：存储性能底 eg ： name varchar(10) 如果存储的数据字符个数不足10个，那就数据字符个数是几就占几个的空间 删除表 删除表\ndrop table 表名; 删除表时判断表是否存在\ndrop table if exists 表名; 修改表 修改表名\nalter table 表名 rename to 新的表名; -- 将表名student修改为stu alter table student rename to stu; 添加一列\nalter table 表名 add 列名 数据类型; -- 给stu表添加一列address，该字段类型是varchar(50) alter table stu add address varchar(50); 修改数据类型\nalter table 表名 modify 列名 新数据类型 -- 将stu表中的address字段名改为 addr，类型改为varchar(50) alter table stu change address addr varchar(50); 修改列名和数据类型\nalter table 表名 change 列名 新列名 新数据类型; -- 将stu表中的address字段名改为 addr，类型改为varchar(50) alter table stu change address addr varchar(50); 删除列\nalter table 表名 drop 列名 -- 将stu表中的addr字段 删除 alter table stu drop addr; DML\u0026ndash;数据操作 添加数据 给指定列添加数据\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…); 给全部列添加数据\nINSERT INTO 表名 VALUES(值1,值2,…); 批量添加数据\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…; INSERT INTO 表名 VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…; eg\n-- 给指定列添加数据 INSERT INTO stu (id, NAME) VALUES (1, \u0026#39;张三\u0026#39;); -- 给所有列添加数据，列名的列表可以省略的 INSERT INTO stu (id,NAME,sex,birthday,score,email,tel,STATUS) VALUES (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11- 11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1); INSERT INTO stu VALUES (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1); -- 批量添加数据 INSERT INTO stu VALUES (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1), (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1), (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1); 修改数据 修改表数据\nUPDATE 表名 SET 列名1=值1,列名2=值2,… [WHERE 条件] ; 修改语句中如果不加条件，则将所有数据都修改 像上面的语句中的中括号，表示在写sql语句中可以省略这部分 将张三的性别改为女\n1 update stu set sex = \u0026#39;女\u0026#39; where name = \u0026#39;张三\u0026#39;; 将张三的生日改为 1999-12-12 分数改为99.99\nupdate stu set birthday = \u0026#39;1999-12-12\u0026#39;, score = 99.99 where name = \u0026#39;张三\u0026#39;; ###删除数据\n删除数据\nDELETE FROM 表名 [WHERE 条件] ; -- 删除张三记录 delete from stu where name = \u0026#39;张三\u0026#39;; -- 删除stu表中所有的数据 delete from stu; DQL\u0026ndash;查询数据 SELECT 字段列表 FROM 表名列表 WHERE 条件列表 GROUP BY 分组字段 HAVING 分组后条件 ORDER BY 排序字段 LIMIT 分页限定 基础查询 查询多个字段\nSELECT 字段列表 FROM 表名; SELECT * FROM 表名; -- 查询所有数据 去除重复记录\n1 SELECT DISTINCT 字段列表 FROM 表名; 起别名\nAS: AS 也可以省略 练习 查询name、age两列\nselect name,age from stu; 查询所有列的数据，列名可用*代替\nselect * from stu; 去除重复记录\nselect distinct address from stu; 查询姓名、数学成绩、英语成绩。并通过as给math和english起别名（as关键字可以省略）\nselect name,math as 数学成绩,english as 英文成绩 from stu; select name,math 数学成绩,english 英文成绩 from stu; 范围查询\nselect * from emp where sal in(1500,3000,5000); 条件查询 语法\nSELECT 字段列表 FROM 表名 WHERE 条件列表; 练习 查询年龄大于20岁的学员信息\n1 select * from stu where age \u0026gt; 20; 查询年龄大于等于20岁的学员信息\nselect * from stu where age \u0026gt;= 20; 查询年龄大于等于20岁 并且 年龄 小于等于 30岁 的学员信息\nselect * from stu where age \u0026gt;= 20 \u0026amp;\u0026amp; age \u0026lt;= 30; select * from stu where age \u0026gt;= 20 and age \u0026lt;= 30; 上面语句中 \u0026amp;\u0026amp; 和 and 都表示并且的意思。建议使用 and 。 也可以使用 between \u0026hellip; and 来实现上面需求\nselect * from stu where age BETWEEN 20 and 30; 查询入学日期在'1998-09-01\u0026rsquo; 到 \u0026lsquo;1999-09-01\u0026rsquo; 之间的学员信息\nselect * from stu where hire_date BETWEEN \u0026#39;1998-09-01\u0026#39; and \u0026#39;1999-09-01\u0026#39;; 查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学员信息\nselect * from stu where age = 18 or age = 20 or age = 22; select * from stu where age in (18,20 ,22); 查询英语成绩为 null的学员信息 null值的比较不能使用 = 或者 != 。需要使用 is 或者 is not\nselect * from stu where english = null; -- 这个语句是不行的 select * from stu where english is null; select * from stu where english is not null; 模糊查询 模糊查询使用like关键字，可以使用通配符进行占位: （1）_ : 代表单个任意字符\n（2）% : 代表任意个数字符\n查询姓\u0026rsquo;马\u0026rsquo;的学员信息\nselect * from stu where name like \u0026#39;马%\u0026#39;; 查询第二个字是\u0026rsquo;花\u0026rsquo;的学员信息\nselect * from stu where name like \u0026#39;_花%\u0026#39;; 查询名字中包含 \u0026lsquo;德\u0026rsquo; 的学员信息\nselect * from stu where name like \u0026#39;%德%\u0026#39;; 排序查询 语法\nselect字段列表 from 表名 order by 排序字段名1 [排序方式1],排序字段名2 [排序方式2] …; ASC ： 升序排列 （默认值）\nDESC ： 降序排列\n注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序\n查询学生信息，按照年龄升序排列\nselect * from stu order by age ; 查询学生信息，按照数学成绩降序排列，如果数学成绩一样，再按照英语成绩升序排列\nselect * from stu order by math desc , english asc ; 聚合函数 概念\n将一列数据作为一个整体，进行纵向计算。\n分类\n聚合函数语法\nselect 聚合函数名(列名) from 表; 注意：null 值不参与所有聚合函数运算\n练习 统计班级一共有多少个学生(后面可以加条件查询语句)\nselect count from stu; select count(english) from stu; 上面语句根据某个字段进行统计，如果该字段某一行的值为null的话，将不会被统计。所以可以在count() 来实现。 表 示所有字段数据，一行中也不可能所有的数据都为null，所以建议使用 count(*)\n1 select count(*) from stu; 查询数学成绩的最高分\nselect max(math) from stu; ###分组查询\n语法\nSELECT 字段列表 FROM 表名 [WHERE 分组前条件限定] GROUP BY 分组字段名 [HAVING 分组后条件过滤]; 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n练习 查询男同学和女同学各自的数学平均分\nselect sex, avg(math) from stu group by sex; 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n查询男同学和女同学各自的数学平均分，以及各自人数\nselect avg(age) \u0026#39;年龄\u0026#39;,count(*) \u0026#39;性别\u0026#39; from xsjbxxb group by xb; 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组\nselect sex, avg(math),count(*) from stu where math \u0026gt; 70 group by sex; 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的\nselect sex, avg(math),count(*) from stu where math \u0026gt; 70 group by sex having count(*) \u0026gt; 2; 执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过 滤。\n可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。\n分页查询 语法\nSELECT 字段列表 FROM 表名 LIMIT 起始索引 , 查询条目数; 从0开始查询，查询3条数据（这里0就是起始索引）\nselect * from stu limit 0 , 3; 公式\n起始索引 = (当前页码 - 1) * 每页显示的条数 ","permalink":"https://www.heiok.top/posts/tutorial/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/","summary":"\u003ch1 id=\"数据库语法\"\u003e数据库语法\u003c/h1\u003e\n\u003ch2 id=\"ddl创建表\"\u003eDDL\u0026ndash;创建表\u003c/h2\u003e\n\u003cp\u003e操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e查询当前数据库下所有表名称\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eshow\u003c/span\u003e databases;\u003cspan style=\"color:#75715e\"\u003e--单行注释 /*多行注释*/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e创建数据库\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ecreate\u003c/span\u003e databases \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e数据库名称\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edrop\u003c/span\u003e databases \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e数据库名称\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用数据库\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edatabase\u003c/span\u003e();\u003cspan style=\"color:#75715e\"\u003e--查看当前使用的数据库\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003euse \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e数据库名称\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e##DDl\u0026ndash;操作表\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"查询表\"\u003e查询表\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e查询当前数据库下所有的表名称\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eshow\u003c/span\u003e tables;\u003cspan style=\"color:#75715e\"\u003e--先进入表（use 数据库名称）在使用\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查询表结构\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edesc\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e表结构\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"创建表\"\u003e创建表\u003c/h3\u003e\n\u003cp\u003e最后一行不加逗号\u003c/p\u003e","title":"数据库基础语法"},{"content":"在 ASP.NET Core 中 ，HttpContextAccessor 是一个用于访问当前 HTTP 请求的工具类。它通常用于在应用程序中获取当前 HTTP 请求的上下文信息，例如请求的路由、头部信息、用户身份验证状态等。\nHttpContextAccessor 类通常在需要访问当前 HTTP 请求上下文信息的服务或组件中使用，例如在控制器、中间件、过滤器等地方。通过 HttpContextAccessor，我们可以方便地获取当前 HTTP 请求的上下文信息，而无需直接依赖于 HttpContext 对象。\n以下是 HttpContextAccessor 的一些常见用途：\n获取用户身份验证信息：通过 HttpContextAccessor，我们可以获取当前用户的身份验证信息，包括用户的标识、角色等信息，从而可以根据用户的身份进行相应的逻辑处理。\n访问请求头部信息：HttpContextAccessor 可以帮助我们获取当前 HTTP 请求的头部信息，例如 User-Agent、Referer 等，以便我们根据请求头部信息做出相应的处理。\n访问请求路由信息：通过 HttpContextAccessor，我们可以获取当前 HTTP 请求的路由信息，包括控制器、动作、路由参数等，从而可以根据请求的路由信息进行相应的逻辑处理。\n访问 Session 数据：HttpContextAccessor 也可以用于访问当前 HTTP 请求的 Session 数据，以便在应用程序中进行会话管理和状态维护。\n需要注意的是，在使用 HttpContextAccessor 时，我们需要确保在 ASP.NET Core 中已经正确配置了服务容器以支持依赖注入。通常情况下，我们需要将 HttpContextAccessor 注册到依赖注入容器中，以便在需要的地方进行注入和使用。\n总的来说，HttpContextAccessor 在 ASP.NET Core 中是用于访问当前 HTTP 请求的上下文信息的工具类，它为我们提供了方便的方式来获取并操作当前请求的相关信息，从而可以更灵活地处理 HTTP 请求。\n要在 ASP.NET Core 中使用 HttpContextAccessor，首先需要在应用程序中配置依赖注入服务。以下是使用 HttpContextAccessor 的基本步骤：\n在 Startup.cs 文件的 ConfigureServices 方法中注册 HttpContextAccessor 服务： public void ConfigureServices(IServiceCollection services) { services.AddHttpContextAccessor(); // 其他服务的注册 } 通过调用 AddHttpContextAccessor() 方法，将 HttpContextAccessor 添加到依赖注入容器中，以便在需要的地方进行注入和使用。\n在需要访问当前 HTTP 请求的地方进行注入 HttpContextAccessor： 可以在控制器、服务、中间件、过滤器等地方注入 HttpContextAccessor 对象。例如，在控制器中可以这样注入：\npublic class MyController : ControllerBase { private readonly IHttpContextAccessor _httpContextAccessor; public MyController(IHttpContextAccessor httpContextAccessor) { _httpContextAccessor = httpContextAccessor; } // 控制器的其他方法 } 使用 HttpContextAccessor 获取当前 HTTP 请求的上下文信息： 通过注入的 HttpContextAccessor 对象，可以方便地获取当前 HTTP 请求的上下文信息，例如请求的路由、头部信息、用户身份验证状态等。以下是一些示例用法：\n// 获取当前 HTTP 请求的用户身份验证信息 var user = _httpContextAccessor.HttpContext.User; // 获取当前 HTTP 请求的路由数据 var routeData = _httpContextAccessor.HttpContext.GetRouteData(); // 获取当前 HTTP 请求的请求头部信息 var userAgent = _httpContextAccessor.HttpContext.Request.Headers[\u0026#34;User-Agent\u0026#34;]; 通过上述步骤，我们就可以在 ASP.NET Core 应用程序中使用 HttpContextAccessor 来访问当前 HTTP 请求的上下文信息。这样我们可以根据需要，方便地获取和操作当前请求的相关信息，从而实现更灵活的请求处理逻辑。\n","permalink":"https://www.heiok.top/posts/tutorial/aspnet-core-httpcontextaccessor%E7%B1%BB/","summary":"\u003cp\u003e在 ASP.NET Core 中 ，HttpContextAccessor 是一个用于访问当前 HTTP 请求的工具类。它通常用于在应用程序中获取当前 HTTP 请求的上下文信息，例如请求的路由、头部信息、用户身份验证状态等。\u003c/p\u003e\n\u003cp\u003eHttpContextAccessor 类通常在需要访问当前 HTTP 请求上下文信息的服务或组件中使用，例如在控制器、中间件、过滤器等地方。通过 HttpContextAccessor，我们可以方便地获取当前 HTTP 请求的上下文信息，而无需直接依赖于 HttpContext 对象。\u003c/p\u003e","title":"asp.net core HttpContextAccessor类"},{"content":"Async 1.await async 不等于多线程 2.异步阻塞 3.取消异步 4.其他 yield\n在旧版c#中，async方法中不能用yield。从c#8.0开始，把返回值声明为lAsyncEnumerable（不要带Task），然后遍历的时候用await foreach()即可。\nlinq 1.委托\u0026ndash;\u0026gt;lambda\u0026ndash;\u0026gt;linq C# 委托(delegate)、泛型委托和Lambda表达式 - willingtolove - 博客园 (cnblogs.com)\n依赖注入 概念 生活中的“控制反转”：自己发电和用电网的电。依赖注入（Dependency Injection，DI））是控制反转(Inversion of Control, loc)思想的实现方式。依赖注入简化模块的组装过程，降低模块之间的耦合度\n实现的两中方式\n服务定位器(ServiceLocator);\n依赖注入(Dependency Injection， DI);\nDI 服务(service)：对象； 注册服务； 服务容器：负责管理注册的服务； 查询服务：创建对象及关联对象； 对象生命周期：Transient(瞬态);Scoped(范围）;Singleton（单例）; 在.NET 中使用\n.NET中使用DI 1、测试代码见备注 2、根据类型来获取和注册服务。可以分别指定服务类型（service type）和实现类型（implementation type）。这两者可能相同，也可能不同。服务类型可以是类，也可以是接口！建议面向接口编程，更灵活。 3、.NET控制反转组件取名为Dependencylnjection，但它包含ServiceLocator的功能。 NET中使用DI2 1、Install-Package Microsoft.Extensions.Dependencylnjection 2、using Microsoft.Extensions.Dependencylnjection 3、ServiceCollection用来构造容器对象 调用ServiceCollection的BuildServiceProvider() 创建ServiceProvider， 可以用来获取BuildServiceProvider()之前ServiceCollection中的对象。示例代码见备注。 class Program { static void Main(string[] args) { // 服务收集器 ServiceCollection serviceCollection = new ServiceCollection(); // 想容器中添加对象 serviceCollection.AddScoped\u0026lt;ChinaTestServiceImpl\u0026gt;(); using (ServiceProvider provider = serviceCollection.BuildServiceProvider()) { // ChinaTestServiceImpl chinaTestServiceImpl = provider.GetService\u0026lt;ChinaTestServiceImpl\u0026gt;(); // GetService：当你不确定服务是否总是存在，或者你希望优雅地处理服务不存在的情况时，可以使用 GetService。例如，你可能希望提供一个默认实现或返回一个空对象。 // GetRequiredService：当你确定服务必须存在，并且希望如果服务不存在时立即抛出异常来提醒开发者时，可以使用 GetRequiredService。这通常用于核心业务逻辑中，确保所有必需的服务都已被正确注册和配置。 // 总结 // GetService：返回服务实例或 null。 // GetRequiredService：返回服务实例或抛出 InvalidOperationException。 ChinaTestServiceImpl chinaTestServiceImpl = provider.GetRequiredService\u0026lt;ChinaTestServiceImpl\u0026gt;(); chinaTestServiceImpl.Name = \u0026#34;tom\u0026#34;; chinaTestServiceImpl.SayHi(); } } } 输出： HI tom 生命周期 1、给类构造函数中打印，看看不同生命周期的对象创建，使用serviceProvider.CreateScope()创建Scope。 2、如果一个类实现了IDisposable接口，则离开作用域之后容器会自动调用对象的Dispose方法。 3、不要在长生命周期的对象中引用比它短的生命周期的对象。在ASP.NET Core中这样做默认会抛异常. 4、生命周期的选择：如果类无状态(无成员变量，无属性)，建议为Singleton；如果类有状态，且有Scope控制，建议为Scoped，因为通常这种scope控制下的代码都是运行在同一个线程中的，没有并发修改的问题；在使用Transient的时候要谨慎。 5、.NET注册服务的重载方法很多，看着文档琢磨吧。\n配置文件 namespace Config40_45; /// \u0026lt;summary\u0026gt; /// 本解决方案用于演示在 .NET 6 中使用配置文件。，读取配置文件中的配置 /// \u0026lt;/summary\u0026gt; class Program { static void Main(string[] args) { // 第一种方式读取配置文件（不常用） ConfigurationBuilder configurationBuilder = new ConfigurationBuilder(); configurationBuilder.AddJsonFile(\u0026#34;config.json\u0026#34;); // 添加配置文件 IConfigurationRoot configurationRoot = configurationBuilder.Build(); string? name = configurationRoot[\u0026#34;name\u0026#34;]; Console.WriteLine(name); string? msg1 = configurationRoot.GetSection(\u0026#34;msg:msg1\u0026#34;).Value; string? msg2 = configurationRoot.GetSection(\u0026#34;msg:msg2\u0026#34;).Value; Console.WriteLine(msg1+msg2); } } 常用的读取方式 1、推荐使用选项方式读取，和DI结合更好，且更好利用\u0026quot;reloadonchange\u0026quot;机制。 2、NuGet安装: Microsoft.Extensions.Options、Microsoft.Extensions.Configuration.Binder，当然也需要Microsoft.Extensions.Configuration、Microsoft.Extensions.Configuration.Json. 3、读取配置的时候，DI要声明IOptions、IOptionsMonitor、IOptionsSnapshot等类型。IOptions不会读取到新的值；和lOptionsSnapshot相比，lOptionsSnapshot会在同一个范围内（比如ASP.NETCore一个 请求中）保持一致。建议用lOptionsSnapshot。\n实现方式 日志记录(nlog) NuGet:Microsoft.Extensions.LoggingMicrosoft.Extensions.Logging.Console. DI注入:services.AddLogging(logBuilder=\u0026gt; logBuilder.AddConsole;//可多个Provider); 需要记录日志的代码，注入ILoggerr即可，T一般就用当前类，这个类的名字会输出到日志，方便定位错误。然后调用LogInformationO、LogError等方法输出不同级别的日志，还支持输出异常对象。 如何注入使用 class Program { static void Main(string[] args) { ServiceCollection serviceCollection = new ServiceCollection(); // 将nlog添加到日志系统中 serviceCollection.AddLogging(log =\u0026gt; { log.AddConsole(); log.AddNLog(); log.SetMinimumLevel(LogLevel.Trace); }); serviceCollection.AddScoped\u0026lt;Test01\u0026gt;(); using (ServiceProvider sp = serviceCollection.BuildServiceProvider()) { Test01 requiredService = sp.GetRequiredService\u0026lt;Test01\u0026gt;(); requiredService.TestLog(); } } } 配置文件\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34; ?\u0026gt; \u0026lt;nlog xmlns=\u0026#34;http://www.nlog-project.org/schemas/NLog.xsd\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; autoReload=\u0026#34;true\u0026#34; internalLogLevel=\u0026#34;Info\u0026#34; internalLogFile=\u0026#34;internal-nlog-AspNetCore.txt\u0026#34;\u0026gt; \u0026lt;!-- enable asp.net core layout renderers --\u0026gt; \u0026lt;extensions\u0026gt; \u0026lt;add assembly=\u0026#34;NLog.Web.AspNetCore\u0026#34;/\u0026gt; \u0026lt;/extensions\u0026gt; \u0026lt;!-- the targets to write to --\u0026gt; \u0026lt;targets\u0026gt; \u0026lt;target xsi:type=\u0026#34;File\u0026#34; name=\u0026#34;defaultFilefile\u0026#34; fileName=\u0026#34;log/log-${shortdate}.log\u0026#34; layout=\u0026#34;${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${message} ${exception:format=tostring}\u0026#34; /\u0026gt; \u0026lt;!-- archiveAboveSize 单个日志最大 maxArchiveFiles 日志文件最大数量 fileName 输出路径--\u0026gt; \u0026lt;target xsi:type=\u0026#34;File\u0026#34; name=\u0026#34;sysServicesFile\u0026#34; archiveAboveSize=\u0026#34;10000\u0026#34; maxArchiveFiles=\u0026#34;5\u0026#34; fileName=\u0026#34;log/sysServicesFile-${shortdate}.log\u0026#34; layout=\u0026#34;${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${message} ${exception:format=tostring}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action}\u0026#34; /\u0026gt; \u0026lt;target xsi:type=\u0026#34;ColoredConsole\u0026#34; name=\u0026#34;targetConsole\u0026#34; layout=\u0026#34;${MicrosoftConsoleLayout}\u0026#34; /\u0026gt; \u0026lt;/targets\u0026gt; \u0026lt;!-- rules to map from logger name to target --\u0026gt; \u0026lt;rules\u0026gt; \u0026lt;logger name=\u0026#34;*\u0026#34; minlevel=\u0026#34;Warn\u0026#34; writeTo=\u0026#34;targetConsole\u0026#34; /\u0026gt; \u0026lt;!-- SystemServicesm 命名空间为SystemServices.*的日志，输出到sysServicesFile --\u0026gt; \u0026lt;logger name=\u0026#34;SystemServices.*\u0026#34; minlevel=\u0026#34;Info\u0026#34; writeTo=\u0026#34;sysServicesFile\u0026#34; final=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;logger name=\u0026#34;*\u0026#34; minlevel=\u0026#34;Info\u0026#34; writeTo=\u0026#34;defaultFilefile\u0026#34; /\u0026gt; \u0026lt;/rules\u0026gt; \u0026lt;/nlog\u0026gt; 解析 rules 1、rules节点下可以添加多个logger，每个logger都有名字（name属性），name是通配符格式的。 2、logger节点的minlevel属性和maxlevel属性，表示这个logger接受日志的最低级别和最高级别。 3、日志输出时，会从上往下匹配rules节点下所有的logger，若发现当前日志的分类名符合这个logger的 name的通配符，就会把日志输出给这个logger。如果匹配多个logger，就把这条日志输出给多个logger。但 是如果一个logger设置了final=\u0026ldquo;true\u0026rdquo;，那么如果匹配到这个logger，就不继续向下匹配其他logger了。 ","permalink":"https://www.heiok.top/posts/tutorial/aspnet-core-%E4%B8%AD%E9%97%B4%E4%BB%B6-%E4%B8%AD%E9%97%B4%E4%BB%B6middleware%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8filter%E7%9A%84%E5%8C%BA%E5%88%AB/","summary":"\u003ch2 id=\"async\"\u003eAsync\u003c/h2\u003e\n\u003ch3 id=\"1await-async-不等于多线程\"\u003e1.await async 不等于多线程\u003c/h3\u003e\n\u003ch3 id=\"2异步阻塞\"\u003e2.异步阻塞\u003c/h3\u003e\n\u003ch3 id=\"3取消异步\"\u003e3.取消异步\u003c/h3\u003e\n\u003ch3 id=\"4其他\"\u003e4.其他\u003c/h3\u003e\n\u003cp\u003eyield\u003c/p\u003e\n\u003cp\u003e在旧版c#中，async方法中不能用yield。从c#8.0开始，把返回值声明为lAsyncEnumerable（不要带Task），然后遍历的时候用await foreach()即可。\u003c/p\u003e\n\u003ch2 id=\"linq\"\u003elinq\u003c/h2\u003e\n\u003ch3 id=\"1委托lambdalinq\"\u003e1.委托\u0026ndash;\u0026gt;lambda\u0026ndash;\u0026gt;linq\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://www.cnblogs.com/willingtolove/p/11279562.html#1func%E5%A7%94%E6%89%98\"\u003eC# 委托(delegate)、泛型委托和Lambda表达式 - willingtolove - 博客园 (cnblogs.com)\u003c/a\u003e\u003c/p\u003e","title":"ASP.NET Core 中间件 中间件（Middleware）和过滤器（Filter）的区别"},{"content":"什么是 Dockerfile？ Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。使用docker build命令，用户可以创建基于基础镜像的自定义镜像。\nDockerfile格式 # Comment INSTRUCTION arguments # INSTRUCTION表示指令（不止一条） Dockerfile指令详解 FROM-指定基础镜像 指定基础镜像，并且Dockerfile中第一条指令必须是FROM指令，且在同一个Dockerfile中创建多个镜像时，可以使用多个FROM指令。\n语法格式如下：\nFROM \u0026lt;image\u0026gt; FROM \u0026lt;image\u0026gt;:\u0026lt;tag\u0026gt; 其中\u0026lt;tag\u0026gt;是可选项，如果没有选择，那么默认值为latest。\n如果不以任何镜像为基础，那么写法为：FROM scratch。\nRUN-运行指定的命令 运行指定的命令。\n包含两种语法格式，如下所示：\n# shell格式：就像在命令行中输入的Shell脚本命令一样。 RUN \u0026lt;command\u0026gt; # exec格式：就像是函数调用的格式。 RUN [\u0026#34;executable\u0026#34;, \u0026#34;param1\u0026#34;, \u0026#34;param2\u0026#34;] 第一种后边直接跟shell命令。\n在linux操作系统上默认为/bin/sh -c 在windows操作系统上默认为cmd /S /C 第二种是类似于函数调用。可将executable理解成为可执行文件，后面就是两个参数。\n样例：\nRUN /bin/bash -c \u0026#39;source $HOME/.bashrc; echo $HOME\u0026#39; RUN [\u0026#34;/bin/bash\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;echo hello\u0026#34;] 注意：\n多行命令不要写多个RUN，原因是Dockerfile中每一个指令都会建立一层。多少个RUN就构建了多少层镜像，会造成镜像的臃肿、多层，不仅仅增加了构件部署的时间，还容易出错。RUN书写时的换行符是\\\nCMD-容器启动时要运行的命令 容器启动时要运行的命令。\n包含三种语法格式，如下所示：\n# 第一种就是shell这种执行方式和写法 CMD command param1 param2 # 第二种是可执行文件加上参数的形式（推荐） CMD [\u0026#34;executable\u0026#34;,\u0026#34;param1\u0026#34;,\u0026#34;param2\u0026#34;] # 该写法是为 ENTRYPOINT 指令指定的程序提供默认参数 CMD [\u0026#34;\u0026lt;param1\u0026gt;\u0026#34;,\u0026#34;\u0026lt;param2\u0026gt;\u0026#34;,...] 推荐使用第二种格式，执行过程比较明确。第一种格式实际上在运行的过程中也会自动转换成第二种格式运行，并且默认可执行文件是sh。\n样例：\nCMD [ \u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;echo $HOME\u0026#34; ] CMD [ \u0026#34;echo\u0026#34;, \u0026#34;$HOME\u0026#34; ] 注意：\n这里边包括参数的一定要用双引号,不能是单引号。千万不能写成单引号。原因是参数传递后，docker解析的是一个JSON array.\nENTRYPOINT-为容器指定默认运行程序 类似CMD指令的功能，用于为容器指定默认运行程序，从而使得容器像是一个单独的可执行程序。\n在写Dockerfile时, ENTRYPOINT或者CMD指令会自动覆盖之前的ENTRYPOINT或者CMD指令。即ENTRYPOINT或者CMD指令只能写一条，如果写了多条，那么，ENTRYPOINT或者CMD都只有最后一条生效。\n在Docker镜像运行时, 用户也可以在命令行指定具体命令, 覆盖在Dockerfile里的命令。\n与CMD不同的是，由ENTRYPOINT启动的程序不会被docker run命令行指定的参数所覆盖，而且，这些命令行参数会被当作参数传递给ENTRYPOINT指令指定的程序 ，不过，docker run命令的--entrypoint选项的参数可覆盖ENTRYPOINT指令指定的程序。\n其语法如下：\n# exec格式（推荐） ENTRYPOINT [\u0026#34;executable\u0026#34;, \u0026#34;param1\u0026#34;, \u0026#34;param2\u0026#34;] # shell格式 ENTRYPOINT command param1 param2 第一种就是可执行文件加参数。与CMD指令一样，ENTRYPOINT也更加推荐使用exec格式。\n第二种就是shell格式。\n样例：\nFROM ubuntu RUN apt-get update \u0026amp;\u0026amp; apt-get install -y curl \u0026amp;\u0026amp; rm -rf /var/lib/apt/lists/* ENTRYPOINT [\u0026#34;curl\u0026#34;, \u0026#34;-s\u0026#34;, \u0026#34;http://ip.cn\u0026#34;] # 将其构建成镜像ubuntu:v1.2，下面我们创建并启动容器： docker run -it ubuntu:v1.2 # 将会在控制台输出我们相应的公网IP信息！ # 此时，如果我们还需要获取HTTP头信息时，我们可以这样： docker run -it ubuntu:v1.2 -i CMD与ENTRYPOINT的异同点 这俩命令非常像，而且还可以配合使用。\n相同点：\n只能写一条，如果写了多条，那么只有最后一条生效。 容器启动时才运行，运行时机相同。 不同点：\nENTRYPOINT不会被运行的command覆盖，而CMD则会被覆盖。 如果我们在Dockerfile中同时写了ENTRYPOINT和CMD，并且CMD指令不是一个完整的可执行命令，那么CMD指定的内容将会作为ENTRYPOINT的参数。如下所示： FROM ubuntu ENTRYPOINT [\u0026#34;rm\u0026#34;, \u0026#34;docker2\u0026#34;] CMD [\u0026#34;-rf\u0026#34;] 它真正执行的命令将会是：rm docker2 -rf。\n如果我们在Dockerfile种同时写了ENTRYPOINT和CMD，并且CMD是一个完整的指令，那么它们两个会互相覆盖，谁在最后谁生效。如下所示： FROM ubuntu ENTRYPOINT [\u0026#34;top\u0026#34;, \u0026#34;-b\u0026#34;] CMD ls -al 那么将执行ls -al,top -b不会执行。\n下表显示了针对不同的ENTRYPOINT/CMD进行组合后执行的命令：\nNo ENTRYPOINT ENTRYPOINT exec_entry p1_entry ENTRYPOINT [\u0026ldquo;exec_entry\u0026rdquo;, \u0026ldquo;p1_entry\u0026rdquo;] No CMD error, not allowed /bin/sh -c exec_entry p1_entry exec_entry p1_entry CMD [\u0026ldquo;exec_cmd\u0026rdquo;, \u0026ldquo;p1_cmd\u0026rdquo;] exec_cmd p1_cmd ~/bin/sh -c exec_entry p1_entry~ exec_entry p1_entry exec_cmd p1_cmd CMD [\u0026ldquo;p1_cmd\u0026rdquo;, \u0026ldquo;p2_cmd\u0026rdquo;] p1_cmd p2_cmd ~/bin/sh -c exec_entry p1_entry~ exec_entry p1_entry p1_cmd p2_cmd CMD exec_cmd p1_cmd /bin/sh -c exec_cmd p1_cmd ~/bin/sh -c exec_entry p1_entry~ ~exec_entry p1_entry /bin/sh -c exec_cmd p1_cmd~ 虽然这2个指令功能类似，但是这两个指令不是互斥的. 在很多情况下, 你可以组合ENTRYPOINT和CMD指令, 提升最终用户的体验。同时我们从上表也发现在使用SHELL去执行ENTRYPOINT时，ENTRYPOINT会无视从CMD传来的任何参数，所以CMD只传参数是无效的。\n组合ENTRYPOINT和CMD指令的最佳实践：\n组合使用ENTRYPOINT和CMD命令式, 确保你一定用的是exec表示法. 如果有其中一个用的是shell表示法, 或者一个是shell表示法, 另一个是exec表示法, 你永远得不到你预期的效果。只有当ENTRYPOINT和CMD都用exec表示法, 才能得到预期的效果。\nCOPY-复制文件或者目录到容器里指定路径 从上下文目录中复制文件或者目录到容器里指定路径。\n语法格式如下：\nCOPY [--chown=\u0026lt;user\u0026gt;:\u0026lt;group\u0026gt;] \u0026lt;src\u0026gt;... \u0026lt;dest\u0026gt; COPY [--chown=\u0026lt;user\u0026gt;:\u0026lt;group\u0026gt;] [\u0026#34;\u0026lt;src\u0026gt;\u0026#34;,... \u0026#34;\u0026lt;dest\u0026gt;\u0026#34;] 参数说明：\n[\u0026ndash;chown=:] ：可选参数，用户改变复制到容器内文件的拥有者和属组。 \u0026lt;源路径\u0026gt; ：源文件或者源目录，这里可以是通配符表达式，其通配符规则要满足 Go 的 filepath.Match 规则。例如：COPY hom* /mydir/，COPY hom?.txt /mydir/。源路径必须是build上下文中的路径，不能是其父目录中的文件。如果源路径是目录，则其内部文件或子目录会被递归复制，但源路径目录自身不会被复制 。如果指定了多个源路径，或在源路径中使用了通配符，则目标路径必须是一个目录，且必须以/结尾。 \u0026lt;目标路径\u0026gt; ：容器内的指定路径，建议为目标路径使用绝对路径，否则，COPY指令则以WORKDIR为其起始路径；如果目标路径事先不存在，它将会被自动创建，这包括其父目录路径。 样例：\n# 复制宿主机文件index.html到容器/data/html/index.html COPY index.html /data/html/index.html # 复制宿主机data目录下文件（包括子目录）到容器/data/目录下，并不会复制目录本身 COPY data /data/ ADD-复制文件或者目录到容器里指定路径 ADD 指令和 COPY 的使用类似 （同样需求下，官方推荐使用 COPY） ，功能也类似。除此之外，ADD还支持使用TAR文件和URL路径，并且会将tar压缩文件（gzip, bzip2以及 xz格式）解压缩，如果指定的是url，会从指定的url下载文件放到目录中（ 如果url下载的文件为tar文件，则不会展开）。\n其语法格式如下：\nADD [--chown=\u0026lt;user\u0026gt;:\u0026lt;group\u0026gt;] \u0026lt;src\u0026gt;... \u0026lt;dest\u0026gt; ADD [--chown=\u0026lt;user\u0026gt;:\u0026lt;group\u0026gt;] [\u0026#34;\u0026lt;src\u0026gt;\u0026#34;,... \u0026#34;\u0026lt;dest\u0026gt;\u0026#34;] 样例：\nADD /data/src/nginx-1.14.0.tar.gz /data/src/ # 构建镜像 docker build -t nginx:v1.1 . # 创建容器 docker run --rm --name nginx -it nginx:v1.1 ls /data/src # 我们可以发现已经解压了nginx-1.14.0.tar.gz文件 LABEL-为镜像指定标签 为镜像指定标签，其格式为：\nLABEL \u0026lt;key1\u0026gt;=\u0026lt;value1\u0026gt; \u0026lt;key2\u0026gt;=\u0026lt;value2\u0026gt; ... LABEL后面是键值对，多个键值对以空格进行隔开，如果value中包含空格，请使用\u0026quot;\u0026quot;将value进行圈起来。\n# 如果太长需要换行的话，则使用\\符号 LABEL name=test \\ description=\u0026#34;a container is used to test\u0026#34; 我们可以使用docker inspect命令，来查看镜像的标签：\ndocker inspect --format \u0026#39;{{json .Config.Labels}}\u0026#39; test | python3 -m json.tool 其中，\u0026ldquo;test\u0026quot;为容器名称，\u0026ldquo;python3 -m json.tool\u0026quot;为将其格式化为JSON输出。\nMAINTAINER-指定生成镜像的作者名称 用于指定生成镜像的作者名称，其格式为：\nMAINTAINER \u0026lt;name\u0026gt; MAINTAINER指令已经被弃用，可以使用LABEL指令进行替代，样例如下：\nLABEL maintainer=\u0026#39;Stephen Chow\u0026#39; 说明：\nLABEL会继承基础镜像中的LABEL，如遇到key相同，则值覆盖。\nEXPOSE-为容器打开指定要监听的端口以实现与外部通信 用于为容器打开指定要监听的端口以实现与外部通信，这个只是声明，真正要暴露这个端口需要再构建容器的时候使用\u0026rdquo;-P\u0026quot;选项。其格式为：\nEXPOSE \u0026lt;port\u0026gt; [\u0026lt;port\u0026gt;/\u0026lt;protocol\u0026gt;...] 示例：\nEXPOSE 80/tcp EXPOSE 80/udp 如果想使得容器与主机的端口有映射关系，需要在启动容器时指定-P.\n# 这里的\u0026#34;-P\u0026#34;选项是关键，在启动容器的使用使用-P， # Docker会自动分配一个端口和转发指定的端口， # 使用-p可以具体指定使用哪个本地的端口来映射对外开放的端口。 docker run --rm --name nginx -itd -P nginx:v1.4 ENV-设置环境变量 设置环境变量，无论是接下来的指令（如ENV、ADD、COPY等，其调用格式为$variable_name或${variable_name}），还是在容器中运行的程序，都可以使用这里定义的环境变量。\n它有两种语法格式，如下所示：\nENV \u0026lt;key\u0026gt; \u0026lt;value\u0026gt; ENV \u0026lt;key1\u0026gt;=\u0026lt;value1\u0026gt; \u0026lt;key2\u0026gt;=\u0026lt;value2\u0026gt; ... 两者的区别就是第一种是一次设置一个，第二种是一次设置多个。\n示例：\nENV word hello ENV guodong xxxx ENV name1=ping name2=on_ip RUN echo $word 注意：\n如果你想通过CMD或者ENTRYPOINT指令的exec格式来打印环境，就像下面这样：\nCMD [\u0026quot;echo\u0026quot;, $MODE]\nCMD [\u0026quot;echo\u0026quot;, \u0026quot;$MODE\u0026quot;]\n这样都是不能正确输出环境变量的值的，你可以改成exec格式来执行shell命令，如下所示：\nCMD [\u0026quot;sh\u0026quot;, \u0026quot;-c\u0026quot;, \u0026quot;echo $MODE\u0026quot;]\n如此，就能正确输出环境变量的值了！\n{#ARG_366}ARG-设置环境变量 构建参数ARG和ENV指令一样，都是设置环境变量。不过作用域不一样。ARG 设置的环境变量仅对 Dockerfile 内有效，也就是说只有 docker build 的过程中有效，构建好的镜像内不存在此环境变量。即在将来容器运行时是不会存在这些环境变量的。但是不要因此就用ARG来保存密码之类的信息，因为通过docker history还是能够看得到的。\nARG构建命令在docker build 中可以用 --build-arg \u0026lt;参数名\u0026gt;=\u0026lt;值\u0026gt; 来覆盖。\n语法格式如下：\nARG \u0026lt;参数名\u0026gt;[=\u0026lt;默认值\u0026gt;] 示例：\nFROM ubuntu:16.04 ARG app=\u0026#34;python-pip\u0026#34; RUN apt-get update \u0026amp;\u0026amp; apt-get install -y $app \u0026amp;\u0026amp; rm -rf /var/lib/apt/lists/* # 我们可以定义多个参数 FROM busybox ARG user1 ARG buildno # 也可以给参数一个默认值 FROM busybox ARG user1=someuser ARG buildno=1 # 如果我们给ARG定义了参数默认值，那么当build镜像时，如果没有指定参数值，将会使用这个默认值。 WORKDIR-指定工作目录 用于为Dockerfile中所有的RUN、CMD、ENTRYPOINT、COPY和ADD指令设定工作目录。用 WORKDIR 指定的工作目录，会在构建镜像的每一层中都存在。（WORKDIR 指定的工作目录，必须是提前创建好的）。\ndocker build 构建镜像过程中的，每一个 RUN 命令都是新建的一层。只有通过 WORKDIR 创建的目录才会一直存在。\n在Dockerfile文件中，WORKDIR指令可出现多次，其路径也可以为相对路径，不过，它的路径是相对此前一个WORKDIR指令指定的路径。另外，WORKDIR也可调用由ENV指定定义的变量。\n格式：\nWORKDIR \u0026lt;工作目录路径\u0026gt; 样例：\nWORKDIR /var/log # 解析环境变量 ENV DIRPATH /path WORKDIR $DIRPATH # 也可以设置多次 WORKDIR /a WORKDIR b WORKDIR c RUN pwd # pwd执行的结果是/a/b/c VOLUME-定义匿名数据卷 定义匿名数据卷，可实现挂载功能，可以将内地文件夹或者其他容器中得文件夹挂在到这个容器中。在启动容器时忘记挂载数据卷，会自动挂载到匿名卷。\n作用：\n避免重要的数据，因容器重启而丢失，这是非常致命的。（容器使用的是AUFS，这种文件系统不能持久化数据，当容器关闭后，所有的更改都会丢失。） 避免容器不断变大。 语法格式如下：\nVOLUME [\u0026#34;\u0026lt;路径1\u0026gt;\u0026#34;, \u0026#34;\u0026lt;路径2\u0026gt;\u0026#34;...] VOLUME \u0026lt;路径\u0026gt; 在启动容器 docker run 的时候，我们可以通过 -v 参数修改挂载点。\n样例：\n# 定义一个匿名卷 FROM ubuntu:16.04 VOLUME /data # 定义多个匿名卷 FROM ubuntu:16.04 VOLUME [\u0026#34;/data\u0026#34;, \u0026#34;/command\u0026#34;] 这里的/data和/command目录在容器运行时会自动挂载为匿名卷，任何向/data和/command目录中写入的信息都不会记录进容器存储层，从而保证了容器存储层的无状态化！容器匿名卷目录指定可以通过docker run命令中指定-v参数来进行覆盖。\nUSER-指定执行后续命令的用户和用户组 用于指定执行后续命令的用户和用户组，这里只是切换后续命令执行的用户（用户和用户组必须提前已经存在）。在USER命令之前可以使用RUN命令创建需要的用户。\n默认情况下，容器的运行身份为root用户。\n语法格式如下：\n# 可以指定用户名或者UID，组名或者GID USER \u0026lt;user\u0026gt;[:\u0026lt;group\u0026gt;] USER \u0026lt;UID\u0026gt;[:\u0026lt;GID\u0026gt;] USER指令还可以在docker run命令中使用-u参数进行覆盖。\n样例：\nRUN groupadd -r docker \u0026amp;\u0026amp; useradd -r -g docker docker USER docker ONBUILD-用于延迟构建命令的执行 用于延迟构建命令的执行。简单的说，就是 Dockerfile 里用 ONBUILD 指定的命令，在本次构建镜像的过程中不会执行（假设镜像为 test-build）。当有新的 Dockerfile 使用了之前构建的镜像 FROM test-build ，这时执行新镜像的 Dockerfile 构建时候，会执行 test-build 的 Dockerfile 里的 ONBUILD 指定的命令。\nONBUILD是一个特殊的指令，它后面跟着的是其他指令，比如COPY、RUN等，而这些命令在当前镜像被构建时，并不会被执行。只有以当前镜像为基础镜像去构建下一级镜像时，才会被执行。\nDockerfile中的其他指令都是为了构建当前镜像准备的，只有ONBUILD指令是为了帮助别人定制而准备的。\n语法格式如下：\nONBUILD \u0026lt;其他指令\u0026gt; 样例：\nfrom ubuntu:16.04 WORKDIR /data ONBUILD RUN mkdir test STOPSIGNAL 设置将发送到容器以退出 的系统调用信号。这个信号可以是一个有效的无符号数字，与内核的syscall表中的位置相匹配，如9，或者是SIGNAME格式的信号名，如SIGKILL。\n语法格式如下：\nSTOPSIGNAL signal 默认的停止信号是SIGTERM，在docker stop的时候会给容器内PID为1的进程发送这个signal，通过--stop-signal可以设置自己需要的signal，主要的目的是为了让容器内的应用程序在接收到signal之后可以先做一些事情，实现容器的平滑退出。如果不做任何处理，容器将在一段时间之后强制退出，会造成业务的强制中断，这个时间默认是10s。\nHEALTHCHECK-容器健康状况检查 用于指定某个程序或者指令来监控 docker 容器服务的运行状态是否正常。\n语法格式如下：\n# 设置检查容器健康状况的命令 HEALTHCHECK [OPTIONS] CMD \u0026lt;命令\u0026gt; # 如果基础镜像有健康检查指令，使用这行可以屏蔽掉其健康检查指令 HEALTHCHECK NONE OPTIONS参数说明：\n\u0026ndash;interval=\u0026lt;间隔\u0026gt; ：两次检查的时间间隔，默认为30s \u0026ndash;timeout=\u0026lt;时长\u0026gt; ：健康检查命令运行超时时间，如果超过这个时间，本次健康检查将会判定为失败，默认为30s \u0026ndash;retries=\u0026lt;次数\u0026gt; ：当连续失败指定次数之后，则将容器状态视为unhealthy，默认为3次。 \u0026ndash;start-period=DURATION ：启动时间，默认为0s， 如果指定这个参数， 则必须大于 0s ；--start-period 为需要启动的容器提供了初始化的时间段， 在这个时间段内如果检查失败， 则不会记录失败次数。 如果在启动时间内成功执行了健康检查， 则容器将被视为已经启动， 如果在启动时间内再次出现检查失败， 则会记录失败次数。 在 CMD 关键字之后的 command 可以是一个 shell 命令（例如： HEALTHCHECK CMD /bin/check-running）或者一个 exec 数组（与其它 Dockerfile 命令相同， 参考 [ENTRYPOINT]）。\n该命令的返回值说明了容器的状态， 可能是值为：\n0: healthy - 容器健康，可以使用； 1: unhealthy - 容器工作不正常，需要诊断； 2: reserved - 保留，不要使用这个返回值； 当容器的健康状态发生变化时，会生成一个带有新状态的 health_status 事件。\n样例：\nHEALTHCHECK --interval=5m --timeout=3s \\ CMD curl -f http://localhost/ || exit 1 注意：\n和CMD、NETRYPOINT一样，HEALTHCHECK指令只可以出现一次，如果有多个HEALTHCHECK指令，那么只有最后一个才会生效！\nSHELL-重写xxx指令的shell格式所使用的默认shell SHELL指令允许重写xxx指令的shell格式所使用的默认shell。关于默认的shell，Linux是[\u0026quot;/bin/sh\u0026quot;, \u0026quot;-c\u0026quot;]，Windows是[\u0026quot;cmd\u0026quot;, \u0026quot;/S\u0026quot;, \u0026quot;/C\u0026quot;]。\nSHELL 指令必须在dockerfile中以JSON格式编写。\nSHELL 指令在 Windows 上特别有用，Windows 有两种常用且截然不同的本机 shell：cmd 和 powershell，以及可用的备用 shell，包括 sh。\nSHELL 指令可以出现多次。 每条 SHELL 指令都会覆盖所有先前的 SHELL 指令，并影响所有后续指令。\n样例：\nFROM microsoft/windowsservercore # Executed as cmd /S /C echo default RUN echo default # Executed as cmd /S /C powershell -command Write-Host default RUN powershell -command Write-Host default # Executed as powershell -command Write-Host hello SHELL [\u0026#34;powershell\u0026#34;, \u0026#34;-command\u0026#34;] RUN Write-Host hello # Executed as cmd /S /C echo hello SHELL [\u0026#34;cmd\u0026#34;, \u0026#34;/S\u0026#34;, \u0026#34;/C\u0026#34;] RUN echo hello ","permalink":"https://www.heiok.top/posts/tutorial/docker-dockerfile%E6%8C%87%E4%BB%A4%E5%A4%A7%E5%85%A8/","summary":"\u003ch3 id=\"什么是-dockerfile\"\u003e什么是 Dockerfile？\u003c/h3\u003e\n\u003cp\u003eDockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。使用\u003ccode\u003edocker build\u003c/code\u003e命令，用户可以创建基于基础镜像的自定义镜像。\u003c/p\u003e\n\u003ch3 id=\"dockerfile格式\"\u003eDockerfile格式\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e#\u003c/span\u003e Comment \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eINSTRUCTION arguments  \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e#\u003c/span\u003e INSTRUCTION表示指令\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e（\u003c/span\u003e不止一条\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"dockerfile指令详解\"\u003eDockerfile指令详解\u003c/h3\u003e\n\u003ch4 id=\"from-指定基础镜像\"\u003eFROM-指定基础镜像\u003c/h4\u003e\n\u003cp\u003e指定基础镜像，并且Dockerfile中第一条指令必须是FROM指令，且在同一个Dockerfile中创建多个镜像时，可以使用多个FROM指令。\u003c/p\u003e","title":"Docker Dockerfile指令大全"},{"content":" Docker 安装 (完整详细版)\nDocker 日常命令大全(完整详细版)\n说明： Docker如果想安装软件 , 必须先到 Docker 镜像仓库下载镜像。\nDocker官方镜像\n1、寻找Nginx镜像 2、下载Nginx镜像 命令 描述 docker pull nginx 下载最新版Nginx镜像 (其实此命令就等同于 : docker pull nginx:latest ) docker pull nginx:xxx 下载指定版本的Nginx镜像 (xxx指具体版本号) 检查当前所有Docker下载的镜像\ndocker images 3、创建Nginx配置文件 启动前需要先创建Nginx外部挂载的配置文件（ /home/nginx/conf/nginx.conf）\n之所以要先创建 , 是因为Nginx本身容器只存在/etc/nginx 目录 , 本身就不创建 nginx.conf 文件\n当服务器和容器都不存在 nginx.conf 文件时, 执行启动命令的时候 docker会将nginx.conf 作为目录创建 , 这并不是我们想要的结果 。\n# 创建挂载目录 mkdir -p /home/nginx/conf mkdir -p /home/nginx/log mkdir -p /home/nginx/html 容器中的nginx.conf文件和conf.d文件夹复制到宿主机\n# 生成容器 docker run --name nginx -p 9001:80 -d nginx # 将容器nginx.conf文件复制到宿主机 docker cp nginx:/etc/nginx/nginx.conf /home/nginx/conf/nginx.conf # 将容器conf.d文件夹下内容复制到宿主机 docker cp nginx:/etc/nginx/conf.d /home/nginx/conf/conf.d # 将容器中的html文件夹复制到宿主机 docker cp nginx:/usr/share/nginx/html /home/nginx/ 4、创建Nginx容器并运行 Docker 创建Nginx容器\n# 直接执行docker rm nginx或者以容器id方式关闭容器 # 找到nginx对应的容器id docker ps -a # 关闭该容器 docker stop nginx # 删除该容器 docker rm nginx # 删除正在运行的nginx容器 docker rm -f nginx docker run \\ -p 9002:80 \\ --name nginx \\ -v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \\ -v /home/nginx/conf/conf.d:/etc/nginx/conf.d \\ -v /home/nginx/log:/var/log/nginx \\ -v /home/nginx/html:/usr/share/nginx/html \\ -d nginx:latest 命令 描述 \u0026ndash;name nginx 启动容器的名字 -d 后台运行 -p 9002:80 将容器的 9002(后面那个) 端口映射到主机的 80(前面那个) 端口 -v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf 挂载nginx.conf配置文件 -v /home/nginx/conf/conf.d:/etc/nginx/conf.d 挂载nginx配置文件 -v /home/nginx/log:/var/log/nginx 挂载nginx日志文件 -v /home/nginx/html:/usr/share/nginx/html 挂载nginx内容 nginx:latest 本地运行的版本 \\ shell 命令换行 单行模式\ndocker run -p 9002:80 --name nginx -v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /home/nginx/conf/conf.d:/etc/nginx/conf.d -v /home/nginx/log:/var/log/nginx -v /home/nginx/html:/usr/share/nginx/html -d nginx:latest 5、结果检测 6、修改内容进行展示 # 重启容器 docker restart nginx ","permalink":"https://www.heiok.top/posts/tutorial/docker-%E5%AE%89%E8%A3%85-nginx-%E5%AE%B9%E5%99%A8-%E5%AE%8C%E6%95%B4%E8%AF%A6%E7%BB%86%E7%89%88/","summary":"\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://blog.csdn.net/BThinker/article/details/123358697\" title=\"Docker 安装 (完整详细版)\"\u003eDocker 安装 (完整详细版)\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://blog.csdn.net/BThinker/article/details/123355362\" title=\"Docker 日常命令大全(完整详细版)\"\u003eDocker 日常命令大全(完整详细版)\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"说明\"\u003e说明：\u003c/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://so.csdn.net/so/search?q=Docker\u0026amp;spm=1001.2101.3001.7020\" title=\"Docker\"\u003eDocker\u003c/a\u003e如果想安装软件 , 必须先到 \u003ca href=\"https://so.csdn.net/so/search?q=Docker\u0026amp;spm=1001.2101.3001.7020\" title=\"Docker\"\u003eDocker\u003c/a\u003e 镜像仓库下载镜像。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://hub.docker.com/\" title=\"Docker官方镜像 \"\u003eDocker官方镜像\u003c/a\u003e\u003c/p\u003e\n\u003ch4 id=\"1寻找nginx镜像\"\u003e1、寻找Nginx镜像\u003c/h4\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/blog_migrate/5b067431092502af0634593c457c19f0.png\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/blog_migrate/018947ab9a59dc9b83eb634c51b436a9.png\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003ch4 id=\"2下载nginx镜像\"\u003e2、下载Nginx镜像\u003c/h4\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e命令\u003c/th\u003e\n          \u003cth\u003e描述\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003edocker pull nginx\u003c/td\u003e\n          \u003ctd\u003e下载最新版Nginx镜像 (其实此命令就等同于 : docker pull nginx:latest )\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003edocker pull nginx:xxx\u003c/td\u003e\n          \u003ctd\u003e下载指定版本的Nginx镜像 (xxx指具体版本号)\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/blog_migrate/b3fc0f9f1602f6b916f0faef2a3f05fb.png\" alt=\"\"  /\u003e\n\u003c/p\u003e","title":"Docker 安装 Nginx 容器 (完整详细版)"},{"content":"相关链接 https://gitcode.com/gh_mirrors/an/AnotherRedisDesktopManager/releases/v1.6.6\n","permalink":"https://www.heiok.top/posts/tutorial/domain-service%E5%BA%94%E4%B8%8D%E5%BA%94%E8%AF%A5%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8repository/","summary":"\u003cp\u003e\u003ca href=\"https://cloud.tencent.com/developer/article/1803939\"\u003e相关链接\u003c/a\u003e\n\u003ca href=\"https://gitcode.com/gh_mirrors/an/AnotherRedisDesktopManager/releases/v1.6.6\"\u003ehttps://gitcode.com/gh_mirrors/an/AnotherRedisDesktopManager/releases/v1.6.6\u003c/a\u003e\u003c/p\u003e","title":"domain service应不应该直接调用repository"},{"content":"目录\n[一、git clone 命令获取] [二、git fetch 命令获取] [三、 git checkout -b 命令获取]\n平时在做项目的时候，我们很多时候都是使用Git来管理我们项目代码的版本。当从远程仓库拉取代码的时候一般都是使用git clone \u0026lt;url\u0026gt;命令来获取，这样我们是将项目整个都克隆到我们本地仓库，并且分支还是主分支maser。当然有时候我们只需拉取远程仓库指定的某一个分支，那么用git命令该怎么拉取指定某一个分支呢？下面楼主记录了三种方法供大家参考。\n一、git clone 命令获取 使用git管理代码版本的时候，本地分支默认与远程同名分支建立追踪关系。文章开始也提到git clone \u0026lt;url\u0026gt;命令默认将整个远程版本库克隆到本地，但是git clone -b \u0026lt;分支名称\u0026gt;命令可以将指定的某一个远程分支拉取到我们本地，而且拉取的本地分支自动和远程同名分支建立追踪关系，它不会将新创建的HEAD指向克隆仓库中HEAD指向的maser主分支，而是指向我们刚拉取下来的分支；示例如下：\n$ git clone -b dev开发分支 https://github.com/521/springboot-rabbitmq.git 分支拉取结束以后，执行git branch -a 命令，结果如下：\n$ git branch -a * dev开发分支 remotes/origin/HEAD -\u0026gt; origin/master remotes/origin/dev开发分支 remotes/origin/master remotes/origin/test测试分支 从执行结果可以看出，当前分支为\u0026quot;dev开发分支\u0026quot; ，剩余的四个都是远程分支；\n注意：用git clone -b \u0026lt;分支名称\u0026gt; \u0026lt;url\u0026gt;拉取指定的某一个分支时，我们本地是没有克隆url对应的远程仓库代码，也就是说进入某个路径的文件夹后直接使用该命令去拉取指定分支，而不是先执行git clone \u0026lt;url\u0026gt;将远程代码库克隆到本地以后进入项目目录再执行该命令去拉取指定分支。否则，拉取下来的还是master主分支。\n二、git fetch 命令获取 {#%E4%BA%8C%E3%80%81git%20fetch%20%E5%91%BD%E4%BB%A4%E8%8E%B7%E5%8F%96} git fetch命令从远程仓库拉取指定某一个分支时，和上面的git clone -b命令时不一样。使用git fetch命令时，需要先将远程的仓库克隆到本地，然后在执行git fetch命令。该命令执行完以后还是处在master主分支的，如果进去目录没有发现想要拉取的仓库文件。此时并不是git fetch命令没有执行，而是我们还没有切换到我们想要拉取的分支上，需要我们执行git checkout命令切换到我们想要拉取的分支上。示例如下：\n1.拉取整个远程代码库\n$ git clone https://github.com/521/springboot-rabbitmq.git 2.进入项目目录，也就是进入master主分支\n$ cd springboot-rabbitmq/ 3.执行git fetch命令，将远程仓库的所有分支拷贝到本地仓库\n$ git fetch 4.执行git checkout \u0026lt;分支名称\u0026gt;命令，切换到我们想要拉取的指定某一个分支的本地分支\n$ git checkout dev开发分支 这是就会看到本地仓库的dev开发分支和远程仓库的dev开发分支一样的内容， 默认情况下，git fetch下载的分支和远程的分支名相同。\n5.执行git branch -a命令查看所有分支情况\n$ git branch -a * dev开发分支 master remotes/origin/HEAD -\u0026gt; origin/master remotes/origin/dev开发分支 remotes/origin/master remotes/origin/test测试分支 可以看到本地有两个分支，目前所在的分支为dev开发分支，还有三个远程分支。到此通过git fetch命令来获取远程仓库某一个指定分支的步骤就执行完毕了。\n三、 git checkout -b 命令获取 第三种获取远程仓库某一个指定分支的方法和第二种方法有点类似，都是将远程仓库克隆到本地仓库，然后执行git checkout -b \u0026lt;本地分支名称\u0026gt; origin/\u0026lt;远程分支名称\u0026gt;，具体步骤如下：\n1.进入某个文件夹执行克隆远程仓库的git\n$ git clone https://github.com/521/springboot-rabbitmq.git 此时远程仓库就克隆到了本地仓库。\n进入项目目录，也就是进入master主分支 $ cd springboot-rabbitmq/ 3.执行git branch -a查看所有分支名称，* 号表示当前分支\n$ git branch -a * master remotes/origin/HEAD -\u0026gt; origin/master remotes/origin/dev开发分支 remotes/origin/master remotes/origin/test测试分支 4.执行git checkout -b \u0026lt;本地分支名称\u0026gt; origin/\u0026lt;远程分支名称\u0026gt;，拉取指定的某一个分支\n$ git checkout -b dev开发分支 origin/dev开发分支 该命令的作用是：checkout远程仓库origin的分支\u0026quot;dev开发分支\u0026quot;，在本地起名为\u0026quot;dev开发分支\u0026quot;分支，并切换到本地的\u0026quot;dev开发分支\u0026quot;分支。\n5.拉取该分支的最新代码\n$ git pull origin dev开发分支 至此，通过三种方法从远程仓库拉取指定某一分支就总结完了，如果有不同见解请指出。\n","permalink":"https://www.heiok.top/posts/tutorial/git%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%E4%BB%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%8B%89%E5%8F%96%E6%8C%87%E5%AE%9A%E7%9A%84%E6%9F%90%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF/","summary":"\u003cp\u003e\u003cstrong\u003e目录\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e[一、git clone 命令获取]\n[二、git fetch 命令获取]\n[三、 git checkout -b 命令获取]\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e平时在做项目的时候，我们很多时候都是使用Git来管理我们项目代码的版本。当从远程仓库拉取代码的时候一般都是使用git clone \u0026lt;url\u0026gt;命令来获取，这样我们是将项目整个都克隆到我们本地仓库，并且分支还是主分支maser。当然有时候我们只需拉取远程仓库指定的某一个分支，那么用git命令该怎么拉取指定某一个分支呢？下面楼主记录了三种方法供大家参考。\u003c/p\u003e","title":"Git三种方法从远程仓库拉取指定的某一个分支"},{"content":" javase java中ArrayList在遍历的时候能否执行插入操作 在Java中，如果在使用ArrayList迭代器进行遍历时，尝试执行插入操作，就会抛出ConcurrentModificationException异常，因为在迭代器遍历期间，ArrayList的结构发生了变化，导致迭代器失效。\n例如，以下代码会抛出异常：\njavaCopy codeArrayList\u0026lt;String\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(); list.add(\u0026#34;one\u0026#34;); list.add(\u0026#34;two\u0026#34;); list.add(\u0026#34;three\u0026#34;); for (String item : list) { if (item.equals(\u0026#34;two\u0026#34;)) { list.add(\u0026#34;four\u0026#34;); // 尝试在遍历时插入元素 } } 为了避免这种异常，可以使用ListIterator的add()方法进行插入操作。ListIterator允许在遍历期间插入元素，并且可以选择在当前迭代器位置之前或之后插入元素。\n例如，以下代码可以在遍历时插入元素而不会抛出异常：\njavaCopy codeArrayList\u0026lt;String\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(); list.add(\u0026#34;one\u0026#34;); list.add(\u0026#34;two\u0026#34;); list.add(\u0026#34;three\u0026#34;); ListIterator\u0026lt;String\u0026gt; iterator = list.listIterator(); while (iterator.hasNext()) { String item = iterator.next(); if (item.equals(\u0026#34;two\u0026#34;)) { iterator.add(\u0026#34;four\u0026#34;); // 在当前位置之后插入元素 } } java的多态体现在那些方面 Java中的多态是一种重要的面向对象编程的概念，它允许不同的对象以不同的方式对同一个方法进行响应。\n多态可以体现在以下方面：\n方法重载：在Java中，可以定义多个具有相同名称但参数列表不同的方法，这被称为方法重载。在方法调用时，根据参数类型和数量的不同，Java编译器可以自动选择合适的方法进行调用。这是静态多态的一种形式。 方法重写：在Java中，子类可以重写其父类中的方法，以便子类在其特定的上下文中提供更具体的实现。在运行时，具体对象的方法调用将调用正确的重写版本。这是动态多态的一种形式。 向上转型：Java允许将子类的对象赋给父类引用变量，这被称为向上转型。在这种情况下，可以访问父类中定义的方法和属性，但无法访问子类中定义的方法和属性。在运行时，具体对象的方法调用将调用正确的版本，而不是编译时的版本。 接口：Java中的接口是一种特殊的类，它只包含方法的签名而没有实现。一个类可以实现一个或多个接口，并提供实现接口中的所有方法。这种实现方式使得类可以适应不同的接口类型，从而实现多态性。 总之，Java中的多态可以通过方法重载、方法重写、向上转型和接口来实现，这些特性可以使得代码更加灵活、可扩展和易于维护。\n如何理解java中多态的向上转型 在Java中，多态是面向对象编程中的一个重要概念，它可以让同一个方法在不同的对象上产生不同的行为。而向上转型是多态的一种表现形式，它是指将一个子类对象赋值给一个父类类型的变量或者参数。\n理解Java中多态的向上转型，可以从以下几个方面入手：\n继承和多态：在Java中，继承是实现多态的基础。通过继承，子类可以继承父类的属性和方法，并且可以在子类中重写父类的方法，实现多态。 类型转换：在Java中，对象之间可以进行类型转换。向上转型是指将一个子类对象转换成它的父类对象，这个过程是自动的，无需显式地进行类型转换操作。 使用多态的好处：通过向上转型，可以将一个对象的类型抽象为它的父类类型，从而提高代码的灵活性和可扩展性。通过向上转型，可以将不同的子类对象赋值给同一个父类类型的变量，从而可以更方便地实现代码复用和重构。 总之，Java中的多态和向上转型是面向对象编程中的重要概念，它们可以提高代码的灵活性和可扩展性，同时也可以提高代码的复用性和重构性。要理解Java中多态的向上转型，需要深入理解继承、多态和类型转换等概念，并且在实际编程中不断积累经验。\nlock 和 synchronized的区别 synchronized是java 中的同步关键字，lock是juc包下的接口，有很多实现类 reentranlock(重入锁) synchronized有两种方式去控制锁的力度， 修饰方法和修饰代码块，我们可以通过加锁对象的生命周期来控制锁的作用范围，比如锁对象是静态对象或者是类对象，此时这个锁就是全局锁，如果是普通实例对象，这个锁的范围取决于这个实例的生命周期，lock锁的粒度是通过里面提供的lock()和unlock()方法来控制的，锁的作用域，取决与lock实例的生命周期，lock的灵活的比synchronized更高，只需要调用加锁和释放锁的方法就实现了，同时lock还提供了非阻塞的竞争锁方法，trylock()，通过返回true/false来告诉当前线程是否有线程正在使用锁，而synchronized因为是关键字所以无法实现，另外synchronized释放锁是被动的，需要等代码执行完毕，或者代码快中出现异常才释放锁。 Spring Spring如果通过@autoware实现依赖的注入（做了那些事），如果让你来实现，怎么实现 使用Spring的@Autowired注解可以实现依赖注入，主要是通过反射来自动解析和设置依赖对象。当Spring容器初始化Bean时，会扫描Bean中的@Autowired注解，并查找可用的Bean类型。如果找到多个符合条件的Bean，则会根据@Primary和@Qualifier注解进行筛选，最终注入符合条件的Bean到目标Bean中。\n如果要手动实现依赖注入，可以按照以下步骤：\n创建Bean容器：定义一个类似于Spring的Bean容器，用于管理Bean对象的生命周期和依赖关系。 扫描类：扫描所有需要注入依赖的类，并记录它们的依赖关系。 创建Bean对象：根据类定义创建Bean对象，并将其放入Bean容器中。 解决依赖关系：遍历Bean容器中的每个Bean对象，查找并设置它们的依赖关系。 返回Bean容器：返回已经完成依赖注入的Bean容器，供调用者使用。 实现依赖注入的关键在于如何解决依赖关系。可以通过以下方式来解决：\n构造函数注入：定义类的构造函数，使用它来注入依赖对象。 Setter方法注入：定义类的setter方法，使用它来注入依赖对象。 字段注入：在类中定义需要注入的字段，并在Bean容器中查找并设置它们的值。 总之，手动实现依赖注入的过程比较复杂，需要考虑到多个方面，包括Bean对象的生命周期、依赖关系的解析和设置等。而Spring的@Autowired注解可以自动实现依赖注入，并且提供了更为方便的使用方式。\n事务在一个方法内读取的数据进行下一步操作需要开启事务吗？ 如果一个方法内读取的数据需要进行下一步操作，且下一步操作与该数据具有关联，那么通常需要在该方法内开启事务。\n事务是用来维护数据的一致性和完整性的，它可以保证一系列操作要么全部成功，要么全部失败。如果一个方法内需要读取的数据涉及到后续操作的一致性和完整性，那么为了保证数据的正确性，需要在该方法内开启事务。这样可以保证所有的读取和操作都在同一个事务中进行，从而保证数据的一致性和完整性。\n如果一个方法内的操作只涉及到读取数据，而没有后续操作或者后续操作与读取的数据没有关联，那么不一定需要开启事务。在这种情况下，读取数据只是查询操作，不会对数据造成影响，也不会影响数据的一致性和完整性。但是，如果该方法的调用者希望保证数据的一致性和完整性，也可以在外部事务中调用该方法。\n总之，是否需要在一个方法内开启事务，取决于该方法涉及到的数据读取和操作是否需要保证数据的一致性和完整性。如果需要，那么应该在该方法内开启事务，如果不需要，那么可以不用开启事务。\n说一下HashMap数据结构有什么特点? HashMap 是一种常见的哈希表实现，它是一种用于存储键-值对的数据结构。以下是 HashMap 的主要特点：\n快速检索： HashMap 提供了快速的查找操作。通过哈希函数，它可以在常量时间内定位到存储桶（bucket）中的位置，从而实现快速的键值查找。 键唯一性： 每个键都必须是唯一的。当插入新的键值对时，如果键已经存在，新的值会替换旧的值。这确保了每个键都映射到唯一的值。 哈希冲突： 不同的键可能映射到相同的哈希值，这就是哈希冲突。HashMap 使用一种解决冲突的方法，例如链地址法或开放地址法。在链地址法中，每个桶存储一个链表或其他数据结构，用于存储哈希冲突的键值对。 动态扩容： 当 HashMap 中的元素数量达到一定阈值时，它会自动进行扩容，重新分配更大的存储空间。这有助于保持较低的负载因子，提高性能。 无序性： HashMap 中的键值对没有固定的顺序。如果需要有序性，可以考虑使用 TreeMap 或其他有序映射实现。 允许 null 值和 null 键： HashMap 允许存储 null 值，同时也允许将 null 作为键。 总的来说，HashMap 提供了高效的查找操作，但在存储大量数据时，需要注意合理设置初始容量和负载因子，以避免频繁的扩容操作。\nSpringBoot 自动装配机制的原理 SpringBoot 解释约定大于配置 Springboot自动装配是什么 自动把第三方组件中的bean装载在Ioc容器内，不需要开发人员手动的去写bean的配置，在Springboot中只需要在启动类上加上SpringBootApplication来实现自动装配，这个注解是一个复合注解，主要是@enableAutoConfiguration，自动装配的实现主要依靠三个关键技术，\n引入Starter，启动依赖组件时，这个组件里面必须要包含一个‘@Configuration配置类，在这个类里面使用@Bean注解 去声明要装配到ioc容器的bean对象\n这个类是放在第三方jar包里面，通过springboot中约定大于配置的理念去吧这个配置类的全路径放在classPath:/META-INF/spring.factories这里，这样springboot就可以的到第三方jar这个配置类的位置，这个步骤主要是用到了springboot中的springFactioriesloader来完成的。\nspringboot拿到第三方声明的配置类之后，使用ImportSelector这个接口来实现对这个配置类的动态加载，由此来完成自动装配。\nSpringboot中有哪些方式可以把Bean注入到IOC容器 *使用xml声明Bean，Spring容器在启动的时候会解析这个xml，并且把bean注入到ioc容器 *使用@CompontScan注解扫描声明了@Controller，@Service，@Repository，@Component注解的类 *使用@Configuration注解声明配置类，使用@Bean注解实现bean的定义 *使用@Import注解，导入配置类或者普通的Bean 使用FacoryBean工厂bean，动态构建Bean实例，springCloud中的openFegin里面的动态代理就是通过FacoryBean实现的 实现ImportBeanDefinition-Register接口，可以动态注入Bean实例，这个在Springboot启动类中有用到 实现ImportSelector接口，动态批量注入配置类或者Bean\u0026rsquo;对象，这个在springboot自动装配里面有用到 mybatis Mybatis中#{}和${}的区别 这两种都是mybatis去实现动态SQL的方式，可以把参数传递到xml文件中 #占位符等同于jdbc中的一个？占位符，可以防止SQL注入，而$占位符相当于把参数直接拼接到sql中，mybatis不会对其做任何处理，无法防止SQL注入 总结，$相当与动态参数（可以用在动态传递表名，设置排序字段等），#是占位符。 Mybatis里面的缓存机制 mybatis的一级缓存是SQLSession级别的缓存，在操作数据库时需要构造SqlSession对象，不同的SqlSession之间缓存数据区域（HashMap）是互相不影响的。 一级缓存的作用域是SqlSession范围的，需要注意的是：如果SqlSession执行了DML操作（insert、update、delete），并执行commit（）操作，mybatis则会清空SqlSession中的一级缓存，这样做的目的是为了保证缓存数据中存储的是最新的信息，避免出现脏读现象。\n二级缓存是mapper级别的缓存，使用二级缓存时，多个SqlSession使用同一个Mapper的sql语句去操作数据库，得到的数据会存在二级缓存区域，相比一级缓存，二级缓存是跨SqlSession的。 二级缓存是多个SqlSession共享的，其作用域是mapper的同一个namespace，Mybatis默认没有开启二级缓存，需要在setting全局参数中配置开启二级缓存。\n共同点两者都它是使用HashMap进行数据存储，且都是在第一次执行完毕会将数据库中查询的数据写到缓存（内存），第二次查询时会从缓存中获取数据，不再去底层数据库查询，从而提高查询效率。\n","permalink":"https://www.heiok.top/posts/tutorial/java%E4%B8%ADarraylist%E5%9C%A8%E9%81%8D%E5%8E%86%E7%9A%84%E6%97%B6%E5%80%99%E8%83%BD%E5%90%A6%E6%89%A7%E8%A1%8C%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C/","summary":"\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/api/uploads/89ba4ceb8a864305bd266fd519cee15e.jpg\" alt=\"image\"  /\u003e\n\u003c/p\u003e\n\u003ch1 id=\"javase\"\u003ejavase\u003c/h1\u003e\n\u003ch2 id=\"java中arraylist在遍历的时候能否执行插入操作\"\u003e\u003cstrong\u003ejava中ArrayList在遍历的时候能否执行插入操作\u003c/strong\u003e\u003c/h2\u003e\n\u003cp\u003e在Java中，如果在使用\u003ccode\u003eArrayList\u003c/code\u003e迭代器进行遍历时，尝试执行插入操作，就会抛出\u003ccode\u003eConcurrentModificationException\u003c/code\u003e异常，因为在迭代器遍历期间，\u003ccode\u003eArrayList\u003c/code\u003e的结构发生了变化，导致迭代器失效。\u003c/p\u003e\n\u003cp\u003e例如，以下代码会抛出异常：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ejavaCopy codeArrayList\u0026lt;String\u0026gt; list = new ArrayList\u0026lt;\u0026gt;();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elist.add(\u0026#34;one\u0026#34;);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elist.add(\u0026#34;two\u0026#34;);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elist.add(\u0026#34;three\u0026#34;);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efor (String item : list) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    if (item.equals(\u0026#34;two\u0026#34;)) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        list.add(\u0026#34;four\u0026#34;); // 尝试在遍历时插入元素\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e为了避免这种异常，可以使用\u003ccode\u003eListIterator\u003c/code\u003e的\u003ccode\u003eadd()\u003c/code\u003e方法进行插入操作。\u003ccode\u003eListIterator\u003c/code\u003e允许在遍历期间插入元素，并且可以选择在当前迭代器位置之前或之后插入元素。\u003c/p\u003e","title":"java中ArrayList在遍历的时候能否执行插入操作"},{"content":"Homebrew笔记 1. 介绍 官网： https://brew.sh/\n对于习惯了使用命令来完成一切的程序员来说，安装软件这种小事，自然是能够用命令解决，就不用图形界面选择。但是在 Linux 中，我们有 yum、apt、dnf、pkg等命令来完成软件的安装，macOS 却并未为我们提供一个好用的包管理器，帮助我们更好的使用 macOS。\n好在，虽然官方没有提供，我们却可以使用 Homebrew 这一神器，来完成类似的工作，就如同 Homebrew 的 Slogan ：\u0026ldquo;The missing package manager for macOS (or Linux)\u0026rdquo;\nHomebrew 由开发者 Max Howell 开发，并基于 BSD 开源，是一个非常方便的包管理器工具。在早期， Homebrew 仅有 macOS 的版本，后续随着用户的增多，Homebrew 还提供了 Linux 的版本，帮助开发者在 Linux 同样使用 Homebrew 来配置环境。\n1.1 组成部分 Homebrew 是一款包管理工具，目前支持 macOS 和 linux 系统。主要有四个部分组成: brew、homebrew-core 、homebrew-cask、homebrew-bottles。\n名称 说明 brew Homebrew 源代码仓库 homebrew-core Homebrew 核心源 homebrew-cask 提供 macOS 应用和大型二进制文件的安装 homebrew-bottles 预编译二进制软件包 1.2 核心概念 在正式介绍 Homebrew 的使用之前，我先为你介绍一下 Homebrew 中的一些核心的概念，了解这些概念，就可以帮助你更好的去使用 Homebrew。\n词汇 含义 formula (e) 安装包的描述文件，formulae 为复数 cellar 安装好后所在的目录 keg 具体某个包所在的目录，keg 是 cellar 的子目录 bottle 预先编译好的包，不需要现场下载编译源码，速度会快很多；官方库中的包大多都是通过 bottle 方式安装 tap 下载源，可以类比于 Linux 下的包管理器 repository cask 安装 macOS native 应用的扩展，你也可以理解为有图形化界面的应用。 bundle 描述 Homebrew 依赖的扩展 其中，最关键的是 tap 、cask，我们在后续会经常用到。\n2. 安装 复制下方命令到终端一键执行即可，我这里用的第一个，是一个知乎博主分享的。\n苹果电脑 常规安装脚本（推荐 完全体 几分钟安装完成）：\n/bin/zsh -c \u0026#34;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\u0026#34; 苹果电脑 极速安装脚本（精简版 几秒钟安装完成）：\n/bin/zsh -c \u0026#34;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\u0026#34; speed 苹果电脑 卸载脚本：\n/bin/zsh -c \u0026#34;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)\u0026#34; 常见错误 去下方地址查看\nhttps://gitee.com/cunkai/HomebrewCN/blob/master/error.md Linux电脑 安装脚本：\nrm Homebrew.sh ; wget https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh ; bash Homebrew.sh Linux电脑 卸载脚本：\nrm HomebrewUninstall.sh ; wget https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh ; bash HomebrewUninstall.sh 3. 更换为国内镜像源 本教程以更改中科大源为例。\n中科大源地址 ：https://mirrors.ustc.edu.cn/\nHomebrew 源使用帮助 http://mirrors.ustc.edu.cn/help/brew.git.html Homebrew Core 源使用帮助 http://mirrors.ustc.edu.cn/help/homebrew-core.git.html Homebrew Cask 源使用帮助 http://mirrors.ustc.edu.cn/help/homebrew-cask.git.html Homebrew Bottles 源使用帮助 http://mirrors.ustc.edu.cn/help/homebrew-bottles.html 最终效果查看，最下面的两行 origin 表示，按照 3.1 教程演示即可\n# 切换当前工作目录到 Homebrew 的仓库目录 cd \u0026#34;$(brew --repo)\u0026#34; #显示当前工作目录的路径 pwd # 查看当前 Git 仓库所配置的远程仓库的详细信息 git remote -v git remote -v 命令用于查看当前 Git 仓库的远程仓库信息。\n输出结果显示 origin https://mirrors.ustc.edu.cn/brew.git (fetch) 和 origin https://mirrors.ustc.edu.cn/brew.git (push) 。这表明当前 Homebrew 仓库的远程源（名为origin）的 URL 是 https://mirrors.ustc.edu.cn/brew.git 。(fetch)表示从这个 URL 拉取代码更新，(push)表示向这个 URL 推送代码更改。\n以上为最终效果，大家最后有时间看就行\n3.1 更换 brew.git 源 执行下方命令，并看到 ORIGNN 地址已经更新\n# 切换到 Homebrew 的仓库目录 cd \u0026#34;$(brew --repo)\u0026#34; # 设置 Homebrew 仓库的远程源 URL 为中国科学技术大学的镜像地址 git remote set-url origin https://mirrors.ustc.edu.cn/brew.git # 显示当前 Homebrew 的配置信息，如各种配置参数，如版本号、安装路径、镜像地址等 brew config 重置为官方镜像：\ncd \u0026#34;$(brew --repo)\u0026#34; git remote set-url origin https://github.com/Homebrew/brew.git 3.2 更换 homebrew-core.git 源 通过下方命令发现错误，这个错误信息表明 Git 认为在 \u0026ldquo;/opt/homebrew/Library/Taps/homebrew/homebrew-core\u0026rdquo; 这个路径下的仓库所有权存在可疑情况。这通常是由于安全机制引起的，Git 可能担心该仓库不是在安全的环境下或者可能存在恶意操作的风险。\ncd \u0026#34;$(brew --repo)/Library/Taps/homebrew/homebrew-core\u0026#34; git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git 按照要求执行命令，这个命令会将指定的目录添加到 Git 的安全目录列表中，告诉 Git 这个目录是安全的，可以进行操作。这样，在后续执行与这个仓库相关的 Git 操作时，就不会再出现这个错误了。\ngit config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-core git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git # 重置为官方地址： cd \u0026#34;$(brew --repo)/Library/Taps/homebrew/homebrew-core\u0026#34; git remote set-url origin https://github.com/Homebrew/homebrew-core 默认不安装 cask 有需要的可以替换（Homebrew cask 软件仓库，提供 macOS 应用和大型二进制文件），这个我没弄，我就不演示了。\ncd \u0026#34;$(brew --repo)\u0026#34;/Library/Taps/homebrew/homebrew-cask git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git # git remote set-url origin git://mirrors.ustc.edu.cn/homebrew-cask.git # 重置为官方地址： cd \u0026#34;$(brew --repo)\u0026#34;/Library/Taps/homebrew/homebrew-cask git remote set-url origin https://github.com/Homebrew/homebrew-cask 3.3 替换 Homebrew-bottles 源 用以下命令查看终端使用的是 Bash 还是 Zsh\necho $SHELL bash 用户 echo \u0026#39;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles\u0026#39; \u0026gt;\u0026gt; ~/.bash_profile source ~/.bash_profile zsh 用户 echo \u0026#39;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles\u0026#39; \u0026gt;\u0026gt; ~/.zshrc source ~/.zshrc brew4.x 系列有个 api 加速环境变量，是如下命令。阿里云镜像 是上下两个变量HOMEBREW_BOTTLE_DOMAIN 和 HOMEBREW_API_DOMAIN 都有的，只需要吧里面的 ustc 换成 aliyun即可 。然后这里我使用中科大 api 加速。后续 Homebrew 在使用 API 时会通过中科大的镜像加速地址来提高访问速度。\nbash 用户 echo \u0026#39;export HOMEBREW_API_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/api\u0026#39;\u0026gt;\u0026gt;~/.bash_profile source ~/.bash_profile zsh 用户 echo \u0026#39;export HOMEBREW_API_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/api\u0026#39;\u0026gt;\u0026gt;~/.zshrc source ~/.zshrc 4. 常用命令 4.1 安装卸载软件 brew --version 或者 brew -v 显示 brew 版本信息 brew install \u0026lt;formula\u0026gt; 安装指定软件 brew uninstall \u0026lt;formula\u0026gt; 卸载指定软件 brew list 显示所有的已安装的软件 brew search text 搜索本地远程仓库的软件，已安装会显示绿色的勾 brew search /text/ 使用正则表达式搜软件 brew info \u0026lt;formula\u0026gt; 显示指定软件信息 brew reinstall \u0026lt;formula\u0026gt; 重新安装指定软件，先卸载后安装 brew install \u0026lt;formula\u0026gt; --build-from-source 源码安装指定软件，可以给定指定参数 brew commands 列出所有可用命令 4.2 升级软件相关 brew update 自动升级 homebrew （从 github 下载最新版本） brew outdated 检测已经过时的软件 brew upgrade 升级所有已过时的软件，即列出的以过时软件 brew upgrade \u0026lt;formula\u0026gt; 升级指定的软件 brew pin \u0026lt;formula\u0026gt; 禁止指定软件升级 brew unpin \u0026lt;formula\u0026gt; 解锁禁止升级 brew upgrade --all 升级所有的软件包，包括未清理干净的旧版本的包 brew edit \u0026lt;formula\u0026gt; 编辑软件，不会的情况下慎用 brew tap 列出本地资源仓库，其中 homebrew 是默认仓库，其它都是第三方仓库 brew tap \u0026lt;user/repo\u0026gt; 添加第三方仓库，命名的规则按照 github 来定的。使用 brew untap \u0026lt;user/repo\u0026gt; 删除仓库 brew deps \u0026lt;formula\u0026gt; 查看指定软件依赖于哪些软件 brew uses \u0026lt;formula\u0026gt; 查看指定软件被哪些软件所依赖 4.3 清理相关 homebrew 再升级软件时候不会清理相关的旧版本，在软件升级后我们可以使用如下命令清理\nbrew cleanup -n 列出需要清理的内容 brew cleanup \u0026lt;formula\u0026gt; 清理指定的软件过时包 brew cleanup 清理所有的过时软件 brew unistall \u0026lt;formula\u0026gt; 卸载指定软件 brew unistall \u0026lt;fromula\u0026gt; --force 彻底卸载指定软件，包括旧版本 通过 brew 安装的文件会自动设置环境变量，所以不用担心命令行不能启动的问题。\n比如安装好了 gradle，即可运行 gradle -v\n4.4 管理后台服务 macOS 使用 launchctl 命令加载开机自动运行的服务，brew service 可以简化 lauchctl 的操作。\n以 \u0026lt;font style=\u0026quot;color:#ECAA04;\u0026quot;\u0026gt;MySQL\u0026lt;/font\u0026gt; 为例，使用 \u0026lt;font style=\u0026quot;color:#ECAA04;\u0026quot;\u0026gt;launchctl\u0026lt;/font\u0026gt; 启动:\nln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist 如使用 brew service 可以简化为:\nbrew services start mysql services 常用命令 brew services list # 查看使用brew安装的服务列表 brew services run formula|\u0026ndash;all # 启动服务（仅启动不注册） brew services start formula|\u0026ndash;all # 启动服务，并注册 brew services stop formula|\u0026ndash;all # 停止服务，并取消注册 brew services restart formula|\u0026ndash;all # 重启服务，并注册 brew services cleanup # 清除已卸载应用的无用的配置 配置文件目录 /Library/LaunchDaemons # 开机自启，需要sudo ~/Library/LaunchAgents # 用户登录后自启 以 homebrew.mxcl.kafka.plist 为例：\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;!DOCTYPE plist PUBLIC \u0026#34;-//Apple//DTD PLIST 1.0//EN\u0026#34; \u0026#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd\u0026#34;\u0026gt; \u0026lt;plist version=\u0026#34;1.0\u0026#34;\u0026gt; \u0026lt;dict\u0026gt; \u0026lt;key\u0026gt;Label\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;homebrew.mxcl.kafka\u0026lt;/string\u0026gt; \u0026lt;key\u0026gt;WorkingDirectory\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;/usr/local\u0026lt;/string\u0026gt; \u0026lt;key\u0026gt;ProgramArguments\u0026lt;/key\u0026gt; \u0026lt;array\u0026gt; \u0026lt;string\u0026gt;/usr/local/opt/kafka/bin/kafka-server-start\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;/usr/local/etc/kafka/server.properties\u0026lt;/string\u0026gt; \u0026lt;/array\u0026gt; \u0026lt;key\u0026gt;RunAtLoad\u0026lt;/key\u0026gt; \u0026lt;true/\u0026gt; \u0026lt;key\u0026gt;KeepAlive\u0026lt;/key\u0026gt; \u0026lt;true/\u0026gt; \u0026lt;key\u0026gt;StandardErrorPath\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;/usr/local/var/log/kafka/kafka_output.log\u0026lt;/string\u0026gt; \u0026lt;key\u0026gt;StandardOutPath\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;/usr/local/var/log/kafka/kafka_output.log\u0026lt;/string\u0026gt; \u0026lt;/dict\u0026gt; \u0026lt;/plist\u0026gt; 在这里可以找到服务路径、启动参数、日志路径等\n4.5 brew cask Homebrew Cask 是 Homebrew 的扩展，借助它可以方便地在 macOS 上安装图形界面程序，即我们常用的各类应用。Homebrew 中文含义为自制、自酿酒，Cask 中文含义为桶、木桶，桶装酒是一种成品，也就是说每一个 homebrew cask 都可以直接使用的，比如 Atom 的 Cask 名称为 atom，那么就可以使用如下命令安装：\nbrew cask install atom 甚至也可以提交新的 Cask，比如假设有桌面客户端少数派，则用 brew cask create sspai 创建新的名称为 sspai 的 Cask，当然还要提供官网下载链接、官方主页、应用版本等信息，可以参照 官方教程，此处就不再细说。\n安装 Homebrew Cask【以后新版不需要安装】\n安装好 brew 后，就可以执行命令 brew tap caskroom/cask 获取 Homebrew Cask。\n注意：\nCaskroom 的 Git 地址在 2018 年 5 月 25 日从 https://github.com/caskroom/homebrew-cask 迁移到了 https://github.com/Homebrew/homebrew-cask\n所以，以后就不需要安装 Homebrew Cask\n4.6 使用 Homebrew Cask github 使用：https://github.com/Homebrew/homebrew-cask/blob/master/USAGE.md\nbrew cask install \u0026lt;formula\u0026gt; 安装指定图形界面软件 brew cask uninstall \u0026lt;formula\u0026gt; 卸载软件 brew cask uninstall --force \u0026lt;formula\u0026gt; 卸载软件，带参数 brew cask search text 搜索软件 brew cask list 列出所有通过 cask 安装的软件 其它可以参考：https://github.com/Homebrew/homebrew-cask/blob/master/USAGE.md 举例可安装的软件\n# 安装chrome brew cask install google-chrome # 安装LaunchRocket brew cask install launchrocket 5. 图像化工具 cakebrew 官方地址 ：https://www.cakebrew.com/\nGithub 仓库地址 ：https://github.com/brunophilipe/Cakebrew\n点击上方导航栏的 Download，再点击 Download Now 就下载安装包，然后解压的程序拖到应用程序即可。\n或者通过 Homebrew 命令安装：\nbrew install --cask cakebrew 打开后，有点不太稳定，显示不了界面\n大家可以到网上搜搜使用教程，比命令行方便些。\n参考 https://zhuanlan.zhihu.com/p/111014448 安装 https://sspai.com/post/56009#! 1.2 核心概念、3 https://blog.csdn.net/Amio_/article/details/109694893 1.1 组成部分 https://cloud.tencent.com/developer/article/1867824 https://zhuanlan.zhihu.com/p/366354601 介绍 Homebrew 图形化工具 cakebrew ","permalink":"https://www.heiok.top/posts/tutorial/macos%E4%B8%8Ahomebrew-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/","summary":"\u003ch2 id=\"homebrew笔记\"\u003eHomebrew笔记\u003c/h2\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/direct/6130dc8c429e43f6993239736763a11a.png\" alt=\"在这里插入图片描述\"  /\u003e\n\u003c/p\u003e\n\u003ch3 id=\"1-介绍\"\u003e1. 介绍\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e官网：\u003c/strong\u003e \u003ca href=\"https://brew.sh/\"\u003e\u003cstrong\u003ehttps://brew.sh/\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e对于习惯了使用命令来完成一切的程序员来说，安装软件这种小事，自然是能够用命令解决，就不用图形界面选择。但是在 \u003ccode\u003eLinux\u003c/code\u003e 中，我们有 \u003ccode\u003eyum\u003c/code\u003e、\u003ccode\u003eapt\u003c/code\u003e、\u003ccode\u003ednf\u003c/code\u003e、\u003ccode\u003epkg\u003c/code\u003e等命令来完成软件的安装，\u003ccode\u003emacOS\u003c/code\u003e 却并未为我们提供一个好用的包管理器，帮助我们更好的使用 \u003ccode\u003emacOS\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e好在，虽然官方没有提供，我们却可以使用 Homebrew 这一神器，来完成类似的工作，就如同 \u003ccode\u003eHomebrew\u003c/code\u003e 的 Slogan ：\u0026ldquo;The missing package manager for macOS (or Linux)\u0026rdquo;\u003c/p\u003e","title":"MacOS上Homebrew 安装、配置、更改国内镜像源及使用教程"},{"content":"\n目录 1、直接通过brew安装 2、配置环境变量 1) 执行命令：open -e ~/.bash_profile 2）执行：open -e ~/.zshrc 3）分别执行 4）注意：以上3步执行完还不行，再继续这一步 3、nvm 常用命令 nvm 是 node 版本管理器，也就是说一个 nvm 可以管理多个 node 版本（包含 npm 与 npx），可以方便快捷的安装、切换 不同版本的 node。\n1、直接通过brew安装 执行命令：brew install nvm\nPS： 如果没有安装brew，可参考：brew安装小白教程\n安装成功显示如下：\n2、配置环境变量 执行命令：open -e ~/.bash_profile 添加\nexport NVM_DIR=~/.nvm source $(brew --prefix nvm)/nvm.sh **注意：**如果打开.bash_profile这一步报错.bash_profile does not exist，需要建立.bash_profile 文件，使用touch .bash_profile命令\n执行：open -e ~/.zshrc 添加\nexport NVM_DIR=~/.nvm source $(brew --prefix nvm)/nvm.sh 分别执行 source ~/.bash_profile source ~/.zshrc 到这一步，基本上nvm就可以正常使用了，通过 nvm -v 可查看到安装的版本\n注意：以上3步执行完还不行，再继续这一步 继续执行命令： open -e ~/.profile\n添加：\nexport NVM_DIR=~/.nvm source $(brew --prefix nvm)/nvm.sh 再分别执行以下命令：\nsource ~/.bash_profile source ~/.zshrc source ~/.profile 3、nvm 常用命令 // 查看当前使用的node版本 nvm current // 查看所有已经在本地安装的node版本 nvm ls // 查看所有可下载的版本 nvm list available // 安装最新版 node nvm install stable // 使用最新版本的node nvm use node // 安装指定版本的node nvm install node版本号（如：nvm install 14.16.0） // 使用指定版本的node nvm use node版本号 // 卸载指定版本的node nvm uninstall node版本号 // 设置node别名 nvm alias node别名 node版本号 // 取消别名 nvm unalias node别名 // 设置默认使用的node版本 nvm alias default node版本号 ","permalink":"https://www.heiok.top/posts/tutorial/mac%E5%AE%89%E8%A3%85nvm%E6%95%99%E7%A8%8B%E5%8F%8A%E4%BD%BF%E7%94%A8/","summary":"\u003cbr /\u003e\n\u003ch4 id=\"目录\"\u003e目录\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#1brew_3\"\u003e1、直接通过brew安装\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#2_15\"\u003e2、配置环境变量\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#1_open_e_bash_profile_16\"\u003e1) 执行命令：open -e ~/.bash_profile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#2open_e_zshrc_25\"\u003e2）执行：open -e ~/.zshrc\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#3_33\"\u003e3）分别执行\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#43_42\"\u003e4）注意：以上3步执行完还不行，再继续这一步\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#3nvm__60\"\u003e3、nvm 常用命令\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr /\u003e\n\u003cp\u003envm 是 node 版本管理器，也就是说一个 nvm 可以管理多个 node 版本（包含 npm 与 npx），可以方便快捷的安装、切换 不同版本的 node。\u003c/p\u003e\n\u003ch2 id=\"1直接通过brew安装\"\u003e1、直接通过brew安装\u003c/h2\u003e\n\u003cp\u003e执行命令：\u003ccode\u003ebrew install nvm\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003ePS： 如果没有安装brew，可参考：\u003ca href=\"https://blog.csdn.net/ganyingxie123456/article/details/132182152?spm=1001.2014.3001.5502\"\u003ebrew安装小白教程\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/blog_migrate/18d32b52d2e5cc2ab8871882a947f06a.png\" alt=\"在这里插入图片描述\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003e安装成功显示如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/blog_migrate/c9b3d100bbd5d7c3d08c8b09c5995d5e.png\" alt=\"在这里插入图片描述\"  /\u003e\n\u003c/p\u003e\n\u003ch2 id=\"2配置环境变量\"\u003e2、配置环境变量\u003c/h2\u003e\n\u003ch3 id=\"执行命令open--e-bash_profile\"\u003e执行命令：open -e ~/.bash_profile\u003c/h3\u003e\n\u003cp\u003e添加\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-gdscript3\" data-lang=\"gdscript3\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eexport\u003c/span\u003e NVM_DIR\u003cspan style=\"color:#f92672\"\u003e=~/.\u003c/span\u003envm \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esource \u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e(brew \u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003eprefix nvm)\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003envm\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esh\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/blog_migrate/0d1e3cc886dd16a5330d3cfd78c0e105.png\" alt=\"在这里插入图片描述\"  /\u003e\n\u003cbr\u003e\n**注意：**如果打开\u003ccode\u003e.bash_profile\u003c/code\u003e这一步报错\u003ccode\u003e.bash_profile does not exist\u003c/code\u003e，需要建立\u003ccode\u003e.bash_profile\u003c/code\u003e 文件，使用\u003ccode\u003etouch .bash_profile\u003c/code\u003e命令\u003c/p\u003e","title":"Mac安装nvm教程及使用"},{"content":"今日在执行Mysql修改和删除时出现报错，Lockwaittimeoutexceeded;try restarting transaction 后面经过排查和搜索发现是出现了线程阻塞的情况 select * from information_schema.innodb_trx; kill 57288\n可以使用命令查询，如果记录的trx_rows_locked这一列，如果大于０的话，说是有阻塞住了，然后查对应的trx_mysql_thread_id的值，　然后执行 kill thread_id 杀死这个线程就可以了，\n为什么会发生这个问题，暂时还不知道，后续将进行排查 ","permalink":"https://www.heiok.top/posts/tutorial/mysql%E7%BA%BF%E7%A8%8B%E9%98%BB%E5%A1%9E/","summary":"\u003ch3 id=\"今日在执行mysql修改和删除时出现报错lockwaittimeoutexceededtry-restarting-transaction\"\u003e今日在执行Mysql修改和删除时出现报错，Lockwaittimeoutexceeded;try restarting transaction\u003c/h3\u003e\n\u003cp\u003e后面经过排查和搜索发现是出现了线程阻塞的情况\nselect * from information_schema.innodb_trx;\nkill 57288\u003c/p\u003e\n\u003cp\u003e可以使用命令查询，如果记录的trx_rows_locked这一列，如果大于０的话，说是有阻塞住了，然后查对应的trx_mysql_thread_id的值，　\n然后执行\nkill thread_id 杀死这个线程就可以了，\u003c/p\u003e\n\u003ch3 id=\"为什么会发生这个问题暂时还不知道后续将进行排查\"\u003e为什么会发生这个问题，暂时还不知道，后续将进行排查\u003c/h3\u003e","title":"Mysql线程阻塞"},{"content":"PVE 核显直通Windows10教程 （cpu5800h） 主机Morefine S500+ 准备工作 在开始之前对pve系统进行一些设置\n下载pve_scoure\n1. 获取 BIOS 并提取 GOP AFUWIN5.12（win10完美运行）版本，下载后并在win10系统（已经测试在winpe也行）上提取bios，运行软件点下存储就可以。因为软件是win10或winpe环境才可以运行，所以你需要在设备上安装个win10或者用winpe系统环境下运行提取。\n在win10上运行这个软件点“储存”就能获取物理机的bios文件\n把存储的bios文件命名为5800h.rom（以你cpu型号命名）\n2.从bios.rom中提取AMD核显相关的AMDGopDriver.efi模块 把下载UBU 1.79.17工具解压，把存储的bios.rom拷贝进ubu软件目录下\n接着运行UBU.bat，打开你下载的BIOS文件。（如果UBU.bat程序cmd中没找到或者检测到bios，需要手动选择打开bios文件）\n提取完成之后在ubu的Extracted目录下有个GOP文件夹，里面最终目录分别有AMDGopDriver.efi文件和vbt.dat文件。AMDGopDriver.efi文件就是我们需要的。\n（5000系列以上的只有一个文件夹，需要额外提取vbios，5000系列及一下的可以直接使用ubu进行提取）\n3. 合并efi并生成rom 将提取出来的AMDGopDriver.efi 放入edk2-BaseTools-win32-master目录，同时这里还会用到核显的厂商与设备ID，ID可以通过在PVE Shell下执行 lspci -nn 命令,会列出有VGA的一行,最后的数字就是ID,如[8086:5917]。\nAMD核显合成方法： .\\EfiRom.exe -f 0x1002 -i 0x1638 -b .\\vbios_1638.dat -e .\\AMDGopDriver.efi -o 5800h.rom # 命令行中amd核显一定先是-b vbios.bin然后-e gop.efi这个顺序，-f和-i为核显的厂商编号aaaa、设备编号bbbb,比如 -f 0x1002 -i 0x164c，后面-o xxxx.rom是输出文件名。 将获取到的显卡rom上传到PVE的指定目录中(PVE开机状态),上传路径:/usr/share/kvm，并且使用chmod -R 777 文件名 添加权限\nwin下推荐上传工具:WinSCP下载地址https://winscp.net/eng/index.php\n4. PVE开启iommu直通 IOMMU（Input-Output Memory Management Unit）是一种硬件功能，用于管理设备对系统内存的访问。启用 IOMMU 后，可以在虚拟机中直接访问物理设备，并允许虚拟机独立于主机操作系统运行\nnano /etc/default/grub # 将以下行粘贴到其中，并在旧标签前面添加一个注释标签#,以下为常用的一些写法。 # 对于 AMD CPU (pve8.以下) GRUB_CMDLINE_LINUX_DEFAULT=\u0026#34;quiet iommu=pt initcall_blacklist=sysfb_init pcie_acs_override=downstream,multifunction pci=nommconf\u0026#34; GRUB_CMDLINE_LINUX_DEFAULT=\u0026#34;quiet iommu=pt initcall_blacklist=sysfb_init pcie_acs_override=downstream,multifunction pci=nommconf\u0026#34; 或者 # pve8.0以上 GRUB_CMDLINE_LINUX_DEFAULT=\u0026#34;quiet initcall_blacklist=sysfb_init\u0026#34; 注意,对于 AMD CPU：initcall_blacklist=sysfb_init 屏蔽掉pve7.2以上的一个bug，方便启动时候就屏蔽核显等设备驱动。pve8的grub里面不需要加入amd_iommu=on pcie_acs_override=downstream,multifunction这些参数，一般默认就开启了，如果后面直通不成功，在加上这些参数。 # 参数释义 1.iommu=pt：启用 Intel VT-d 或 AMD-Vi 的 IOMMU。这是一种硬件功能，用于管理设备对系统内存的访问。在虚拟化环境中，启用 IOMMU 后，可以将物理设备直通到虚拟机中，以便虚拟机可以直接访问硬件设备。“iommu=pt”不是必须的，PT模式只在必要的时候开启设备的IOMMU转换，可以提高未直通设备PCIe的性能，建议添加。 2.initcall_blacklist=sysfb_init：禁用 sysfb_init 内核初始化函数。这个函数通常用于在内核启动过程中初始化系统帧缓冲。在使用 GPU 直通的情况下，这个函数可能会干扰直通操作，因此需要禁用它。 3.i915.enable_gvt=1：启用 Intel GVT-g 虚拟 GPU 技术。这个选项用于创建一个虚拟的 Intel GPU 设备，以便多个虚拟机可以共享物理 GPU 设备。启用 GVT-g 需要在支持虚拟 GPU 的 Intel CPU 和主板上运行，并且需要正确配置内核和虚拟机。想开启GVT-g的就添加这条，显卡直通的就不要添加了。 4.initcall_blacklist=sysfb_init：屏蔽掉pve7.2以上的一个bug，方便启动时候就屏蔽核显等设备驱动； 5.pcie_acs_override=downstream,multifunction：便于iommu每个设备单独分组，以免直通导致物理机卡死等问题 6.pci=nommconf：意思是禁用pci配置空间的内存映射,所有的 PCI 设备都有一个描述该设备的区域（您可以看到lspci -vv），访问该区域的最初方法是通过 I/O 端口，而 PCIe 允许将此空间映射到内存以便更简单地访问。 更新grub\nupdate-grub 主机重新启动并运行后，运行以下命令,验证是否开启iommu\ndmesg | grep -e DMAR -e IOMMU -e AMD-Vi # 如果没有输出，则说明有问题。你应该看到这样的东西；“DMAR: IOMMU enabled” # 另外一种验证方式 dmesg | grep iommu # 出现如下例子。则代表成功 [ 1.341100] pci 0000:00:00.0: Adding to iommu group 0 [ 1.341116] pci 0000:00:01.0: Adding to iommu group 1 [ 1.341126] pci 0000:00:02.0: Adding to iommu group 2 [ 1.341137] pci 0000:00:14.0: Adding to iommu group 3 [ 1.341146] pci 0000:00:17.0: Adding to iommu group 4 # 此时输入命令 find /sys/kernel/iommu_groups/ -type l # 出现很多直通组，就代表成功了。如果没有任何东西，就是没有开启 启用必要的内核模块，运行以下命令\nnano /etc/modules # 添加以下行； vfio vfio_iommu_type1 vfio_pci vfio_virqfd 将驱动程序模块列入黑名单，以使虚拟机能够完全访问显卡等。运行以下命令\nnano /etc/modprobe.d/pve-blacklist.conf # 添加以下行； blacklist nvidiafb blacklist amdgpu blacklist i915 blacklist snd_hda_intel options vfio_iommu_type1 allow_unsafe_interrupts=1 # 注意不要重复了 通过设备ID绑定vfio-pci\nnano /etc/modprobe.d/vifo.conf # 添加以下行； options vfio-pci ids=1002:1638 # 上面获取到的核显的设备id 更新模块并重新启动主机以应用更改\nupdate-initramfs -u -k all reboot # 重启 注意：\n在设备黑名单中添加amdgpu，并grub里开启引导自动加载后，pve启动时会卡在以下界面。是正常的！等待一会只要PVE可以通过网页访问到WebUI管理页面就是正常没问题的。因为PVE开机时会按照设备黑名单设置的，释放对核显的控制权\n5 关于虚拟机创建配置 直通AMD核显 所选的虚拟机类型必须为q35 系统类型可选择为推荐使用Linux，Windows或其他类型可能会导致安装核显驱动后，出现43错误，驱动不成功。 固件类型选择ovmf UEFI TPM选择开启，安全启动随意 CPU类型选HOST，否则可能会出现装不上驱动 光驱选择ide，或者scsi，其他保持默认设置\n直通虚拟机环境设置\n虚拟机创建后先不要启动，为创建的虚拟机添加核显pcie，将显示设置为无 none。并同时添加负责声音的pcie设备。在PVE的SHell节点下执行命令\nnano /etc/pve/qemu-server/100.conf # 100是你创建直通核显虚拟机的ID 在核显后添加\nhostpci0: 0000:06:00.0,pcie=1,romfile=5800h.rom,x-vga=1 # 刚刚上传到/usr/share/kvm 的文件名 下面是我的虚拟机配置\nGNU nano 5.4 /etc/pve/qemu-server/101.conf bios: ovmf boot: order=ide2;scsi0;ide0;net0;hostpci0 cores: 8 cpu: host,hidden=1 efidisk0: local:101/vm-101-disk-0.qcow2,efitype=4m,size=528K hostpci0: 0000:06:00.0,pcie=1,romfile=5800h.rom,x-vga=1 hostpci1: 0000:06:00.1 ide0: local:101/vm-101-disk-1.qcow2,size=100G ide2: local:iso/zh-cn_windows_10_business_editions_version_22h2_updated_june_2024_x64_dvd_1139f6a3.iso,media=cdrom,size=6779692K machine: pc-q35-6.2 memory: 4096 meta: creation-qemu=7.2.0,ctime=1728756712 name: win net0: e1000=6A:14:B4:A8:37:28,bridge=vmbr0,firewall=1 numa: 0 ostype: win11 scsi0: local:iso/virtio-win.iso,media=cdrom,size=708140K scsihw: virtio-scsi-single smbios1: uuid=0bd69c1d-509e-43f4-a66d-bd96d30c2033 sockets: 1 tpmstate0: local:101/vm-101-disk-2.raw,size=4M,version=v2.0 vga: none vmgenid: 8286c8ff-aff5-4f71-a90b-e0eff7a57e3f 可以看到已经有GPU了\n启动虚拟机后，正常就可以看到PVE BIOS的开机画面，此时你可直通USB键盘，并按ESC进入UEFI设置，所有直\n通的操作就完成了。\n","permalink":"https://www.heiok.top/posts/tutorial/pve-%E7%9B%B4%E9%80%9Aamd-%E6%98%BE%E7%A4%BA%E5%99%A8%E8%BE%93%E5%87%BAamd/","summary":"\u003ch1 id=\"pve-核显直通windows10教程-cpu5800h-主机morefine-s500\"\u003ePVE 核显直通Windows10教程 （cpu5800h） 主机Morefine S500+\u003c/h1\u003e\n\u003ch2 id=\"准备工作\"\u003e准备工作\u003c/h2\u003e\n\u003cp\u003e在开始之前对pve系统进行一些设置\u003c/p\u003e\n\u003cp\u003e下载pve_scoure\u003c/p\u003e\n\u003ch2 id=\"1-获取-bios-并提取-gop\"\u003e1. 获取 \u003ccode\u003eBIOS\u003c/code\u003e 并提取 \u003ccode\u003eGOP\u003c/code\u003e\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAFUWIN5.12（win10完美运行）版本，下载后并在win10系统（已经测试在winpe也行）上提取bios，运行软件点下存储就可以。因为软件是win10或winpe环境才可以运行，所以你需要在设备上安装个win10或者用winpe系统环境下运行提取。\u003c/p\u003e","title":"PVE 直通amd 显示器输出（AMD）"},{"content":"目录\n[概述]\n[申请/下载证书] [部署证书]\n[本地测试访问]\n[服务器部署访问]\n[最后/扩展] [总结]\n概述 本篇博客说明如何将SpringBoot项目开启Https协议提供访问。\n博文以步骤**【申请/下载证书】，【部署证书】，【本地测试访问】，【服务器部署访问】** ，**【扩展】**展开说明。\n废话：当我们有类似需求：\u0026ldquo;小程序上线\u0026quot;后，请求的后端服务必须使用https协议，那么我们就需要去将http协议升级为https协议了。\nhttps协议？大致可以看成：\nhttps协议 = http协议 + ssl协议\n所以，要想将http升级成https很简单，只需要有一个ssl证书，然后部署到项目即可。\n前提准备：IPC备案过的域名\n那么，如下就开始我们的说明。\n申请/下载证书 我使用的是阿里云 的服务器和域名，因此可以到阿里云官网搜索【ssl证书】进入**【数字证书管理服务】**控制台。\n我们点击**【免费证书】\u0026mdash;\u0026gt;【创建证书】\u0026mdash;\u0026gt;【证书申请】**\n输入自己备案好的域名，其他基本默认，点击**【提交审核】**。\n审核基本上几分钟就可以下发证书，会有短信提示。\n审核好后，我们就可以点击**【下载】**，获取我们的证书。\n我使用的是SpringBoot项目 做的测试，使用内置服务器Tomcat ，因此直接下载Tomcat对应证书。 下载的压缩包内容：\n第一个是我们的证书，第二个是密码文本文件（存储密码）。\n部署证书 我创建了一个空的SpringBoot项目来做演示，写了一个简单的接口来测试：\n项目结构\nIndexController（测试接口）\n1.将证书放到resources目录下\n2.编写配置文件application.yml\n***key-store声明证书的放置的路径\n***请注意key-store-password填写自己下载的压缩包.txt文件里面的密码\n到此，我们启动项目即可。\n本地测试访问 我们使用Postman进行测试。\nps：当我们使用本地进行测试的时候，由于本地的IP与我们申请证书时添加的IP不一致，那么Postman会报错IP不匹配，我们可以不用理会，点击【Disable SSL Verification】关掉SSL验证即可。\n成功。\n服务器部署访问 我们将SpringBoot项目打包，上传到服务器， java -jar运行，然后Postman测试：\n当然，我们也可以使用域名（申请证书时填写的域名）进行访问。\n最后/扩展 我们可能会有这样的需求：\n我们也许不是一开始做项目就部署了SSL证书，而是后期再部署SSL证书，那么我们在此之前前端项目使用的是http协议进行后端服务访问，那么我们能不能不修改前端的代码，想要http协议和https协议都能访问呢？\n这是可以的，我们可以将http协议的访问重定向到https协议进行访问即可。\n这样做后，我们后端服务跑起来的时候就会开启两个端口，一个http的端口，一个https的端口。\n在启动类中进行配置：\npackage com.mh; import org.apache.catalina.Context; import org.apache.catalina.connector.Connector; import org.apache.tomcat.util.descriptor.web.SecurityCollection; import org.apache.tomcat.util.descriptor.web.SecurityConstraint; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory; import org.springframework.context.annotation.Bean; @SpringBootApplication public class SslTestApplication { public static void main(String[] args) { SpringApplication.run(SslTestApplication.class, args); } @Bean public TomcatServletWebServerFactory tomcatServletWebServerFactory() { TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory() { @Override protected void postProcessContext(Context context) { SecurityConstraint securityConstraint = new SecurityConstraint(); securityConstraint.setUserConstraint(\u0026#34;CONFIDENTIAL\u0026#34;); SecurityCollection securityCollection = new SecurityCollection(); securityCollection.addPattern(\u0026#34;/*\u0026#34;); securityConstraint.addCollection(securityCollection); context.addConstraint(securityConstraint); } }; factory.addAdditionalTomcatConnectors(httpConnector()); return factory; } @Bean public Connector httpConnector() { Connector connector = new Connector(\u0026#34;org.apache.coyote.http11.Http11NioProtocol\u0026#34;); connector.setScheme(\u0026#34;http\u0026#34;); // http的端口 connector.setPort(8080); connector.setSecure(false); // http的端口后转向到的https的端口 connector.setRedirectPort(443); return connector; } } 当然，你也可以做配置类，我这里直接放到启动类了，只要能将他们加到IOC容器即可生效。\n配置好后，我们再打包，重新放到服务器运行，浏览器测试：\n回车后，自动跳转访问https\n总结 开启Https很简单，总的来说只需要下载一个SSL证书进行部署即可。\n","permalink":"https://www.heiok.top/posts/tutorial/springboot%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%90%AFhttps%E5%8D%8F%E8%AE%AE%E6%8F%90%E4%BE%9B%E8%AE%BF%E9%97%AE/","summary":"\u003cp\u003e\u003cstrong\u003e目录\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e[概述]\u003c/p\u003e\n\u003cp\u003e[申请/下载证书]\n[部署证书]\u003c/p\u003e\n\u003cp\u003e[本地测试访问]\u003c/p\u003e\n\u003cp\u003e[服务器部署访问]\u003c/p\u003e\n\u003cp\u003e[最后/扩展]\n[总结]\u003c/p\u003e\n\u003chr\u003e\n\u003cbr /\u003e\n\u003ch2 id=\"概述\"\u003e概述\u003c/h2\u003e\n\u003cp\u003e本篇博客说明如何将SpringBoot项目开启Https协议提供访问。\u003c/p\u003e\n\u003cp\u003e博文以步骤**【申请/下载证书】，【部署证书】，【本地测试访问】，【服务器部署访问】** ，**【扩展】**展开说明。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e废话\u003c/strong\u003e：当我们有类似需求：\u0026ldquo;小程序上线\u0026quot;后，请求的后端服务必须使用https协议，那么我们就需要去将http协议升级为https协议了。\u003c/p\u003e","title":"SpringBoot后端服务开启Https协议提供访问"},{"content":"\n`Task.FromResult()` 是一个静态方法，可以用于创建一个已完成的 `Task` 对象，并将指定的结果分配给该对象。该方法通常用于在不使用异步操作的情况下返回一个 `Task` 对象。\n通常情况下，您不需要使用 `Task.FromResult()` 方法来创建完成的任务。只有在需要返回一个 `Task` 对象的方法中，且该方法不执行任何异步操作时，才需要使用它。\n例如，如果您编写了一个方法，该方法需要返回一个 `Task\u0026lt;bool\u0026gt;` 对象，但实际上不涉及任何异步操作，那么您可以使用 `Task.FromResult()` 来创建一个已完成的 `Task` 对象，并将要返回的结果分配给该对象。例如：\npublic Task\u0026lt;bool\u0026gt; MyMethod() { bool result = DoSomeSynchronousWork(); return Task.FromResult(result); } 在上述代码中，`MyMethod() ` 方法返回一个 `Task\u0026lt;bool\u0026gt; ` 对象，但实际上没有任何异步操作。因此，我们可以使用 `Task.FromResult() ` 来创建一个已完成的 `Task` 对象，并将 `DoSomeSynchronousWork()` 的结果分配给该对象。\n请注意，如果您的方法涉及异步操作，例如 I/O 操作或等待其他任务完成等操作，则不应使用 `Task.FromResult()`。相反，您应该使用异步操作和异步编程模型来处理这些操作。\n当我们需要返回一个 Task 对象时，通常是因为方法需要异步执行一些操作，然后返回操作的结果。然而，并不是所有的方法都需要异步执行操作，有时候我们只是需要返回一个 Task 对象以满足某些要求（例如，方法签名需要返回 Task 对象）。\n在这种情况下，我们可以使用 Task.FromResult() 方法来创建一个已完成的 Task 对象，并将要返回的结果分配给该对象。这个方法非常简单，它只需要将要返回的结果作为参数传递给它即可。\n在上面的示例中，MyMethod() 方法执行了一些同步操作，并将结果保存在 result 变量中。然后，它调用了 Task.FromResult() 方法来创建一个已完成的 Task\u0026lt;bool\u0026gt; 对象，并将 result 变量的值分配给该对象。最后，它返回这个已完成的 Task 对象。\n需要注意的是，如果您的方法需要执行异步操作（例如，访问数据库或调用 Web 服务），那么您不应该使用 Task.FromResult() 方法，而是应该使用异步操作来执行这些操作，并返回一个未完成的 Task 对象。只有在不涉及任何异步操作的情况下才应该使用 Task.FromResult() 方法。\n","permalink":"https://www.heiok.top/posts/tutorial/taskfromresult%E6%98%AF%E4%BB%80%E4%B9%88%E5%BA%94%E8%AF%A5%E5%9C%A8%E4%BD%95%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E4%BD%BF%E7%94%A8/","summary":"\u003cbr /\u003e\n\u003cp\u003e`\u003cstrong\u003eTask.FromResult()\u003c/strong\u003e` 是一个静态方法，可以用于创建一个已完成的 `Task` 对象，并将指定的结果分配给该对象。该方法通常用于在不使用异步操作的情况下返回一个 `Task` 对象。\u003c/p\u003e\n\u003cp\u003e通常情况下，您不需要使用 `Task.FromResult()` 方法来创建完成的任务。只有在需要返回一个 `Task` 对象的方法中，且该方法不执行任何异步操作时，才需要使用它。\u003c/p\u003e\n\u003cp\u003e例如，如果您编写了一个方法，该方法需要返回一个 `Task\u0026lt;bool\u0026gt;` 对象，但实际上不涉及任何异步操作，那么您可以使用 `Task.FromResult()` 来创建一个已完成的 `Task` 对象，并将要返回的结果分配给该对象。例如：\u003c/p\u003e","title":"Task.FromResult()是什么?应该在何种情况下使用？"},{"content":"1 错误信息 由于没有公钥，无法验证下列签名： NO_PUBKEY 7EA0A9C3F273FCD8 正在读取软件包列表… 完成 W: GPG 错误：https://download.docker.com/linux/ubuntu bionic InRelease: 由于没有公钥，无法验证下列签名： NO_PUBKEY 7EA0A9C3F273FCD8 E: 仓库 “https://download.docker.com/linux/ubuntu bionic InRelease” 没有数字签名。\n2 解决方案\n$ cd /etc/apt/sources.list.d/ $ sudo rm -f docker.list $ sudo rm -f docker.list.save $ sudo apt update ","permalink":"https://www.heiok.top/posts/tutorial/ubuntu-20044-%E7%94%B1%E4%BA%8E%E6%B2%A1%E6%9C%89%E5%85%AC%E9%92%A5%E6%97%A0%E6%B3%95%E9%AA%8C%E8%AF%81%E4%B8%8B%E5%88%97%E7%AD%BE%E5%90%8D-no_pubkey-7ea0a9c3f273fcd8-%E6%AD%A3%E5%9C%A8%E8%AF%BB%E5%8F%96%E8%BD%AF%E4%BB%B6%E5%8C%85%E5%88%97%E8%A1%A8-%E5%AE%8C%E6%88%90-w-gpg-%E9%94%99%E8%AF%AFhttp/","summary":"\u003cp\u003e1 错误信息\n由于没有公钥，无法验证下列签名： NO_PUBKEY 7EA0A9C3F273FCD8 正在读取软件包列表… 完成\nW: GPG 错误：https://download.docker.com/linux/ubuntu bionic InRelease: 由于没有公钥，无法验证下列签名：\nNO_PUBKEY 7EA0A9C3F273FCD8 E: 仓库 “https://download.docker.com/linux/ubuntu bionic InRelease” 没有数字签名。\u003c/p\u003e","title":"Ubuntu 20.04.4 由于没有公钥，无法验证下列签名： NO_PUBKEY 7EA0A9C3F273FCD8 正在读取软件包列表... 完成 W: GPG 错误：https://downlo"},{"content":"出现情况 虚拟机的Ubuntu 不知道什么原因，在命令行用sudo 改一个文件的时候的提示Read-only file system，其他各种sudo 操作都是如此。 docker 出现Error response from daemon: No such container: image Error response from daemon: container cbb03abddd7ae4c4cce8268c58f1e2259aca340728949439bf748f1797607c54: driver \u0026ldquo;overlay2\u0026rdquo; failed to remove root filesystem: unlinkat /var/lib/docker/overlay2/3f881869f57f34946585aae218b8bab784fcbd59a181d7d824a8ce8aa8167b42: read-only file system 3 .docker启动出现 docker start vaultwarden Error response from daemon: error creating overlay mount to /var/lib/docker/overlay2/f3631bb1f6dccd0a8640f01b2c124acf13ef99373c2e21df981d94615ae7dc3c/merged: invalid argument Error: failed to start containers: 可能的原因： 重启系统，提示根分区error，原因是磁盘出现文件系统错误。\n解决方法：\n使用fsck手动修复，具体操作如下：\n重启以后如果能切换到root模式就用root 用户，如果不能就在安全恢复模式下 查看是否有fsck.ext4 指令。\n然后运行fsck.ext4 -y /dev/sda1\n注意： 要根据自己的实际硬盘情况 改变是sda1 还是sdb1 之类的。可以通过df 指令查看\n查看系统分区信息命令：df -T-h\n","permalink":"https://www.heiok.top/posts/tutorial/ubuntu-%E7%B3%BB%E7%BB%9F%E5%87%BA%E7%8E%B0-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%8F%AA%E8%AF%BBread-only-file-system-%E4%B8%8E-docker%E5%AE%B9%E5%99%A8%E5%87%BA%E7%8E%B0error-creating-overlay-mount/","summary":"\u003ch2 id=\"出现情况\"\u003e出现情况\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e虚拟机的Ubuntu 不知道什么原因，在命令行用sudo 改一个文件的时候的提示Read-only file system，其他各种sudo 操作都是如此。\u003c/li\u003e\n\u003cli\u003edocker 出现Error response from daemon: No such container: image\nError response from daemon: container cbb03abddd7ae4c4cce8268c58f1e2259aca340728949439bf748f1797607c54: driver \u0026ldquo;overlay2\u0026rdquo; failed to remove root filesystem: unlinkat /var/lib/docker/overlay2/3f881869f57f34946585aae218b8bab784fcbd59a181d7d824a8ce8aa8167b42: read-only file system\n3 .docker启动出现 docker start vaultwarden\nError response from daemon: error creating overlay mount to /var/lib/docker/overlay2/f3631bb1f6dccd0a8640f01b2c124acf13ef99373c2e21df981d94615ae7dc3c/merged: invalid argument\nError: failed to start containers:\n\u003cstrong\u003e可能的原因：\u003c/strong\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e重启系统，提示根分区error，原因是磁盘出现文件系统错误。\u003c/p\u003e","title":"ubuntu 系统出现 文件系统只读Read-only file system 与  docker容器出现error creating overlay mount to /var/lib/docker/overlay2/f"},{"content":"ubuntu 安装dotnet https://www.cnblogs.com/bruce1992/p/16283975.html\ndocker 获取容器内部root权限 sudo docker exec -it -u root b667f9cfa164 bash\n","permalink":"https://www.heiok.top/posts/tutorial/%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/","summary":"\u003cp\u003eubuntu 安装dotnet \u003ca href=\"https://www.cnblogs.com/bruce1992/p/16283975.html\"\u003ehttps://www.cnblogs.com/bruce1992/p/16283975.html\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"docker-获取容器内部root权限\"\u003edocker 获取容器内部root权限\u003c/h2\u003e\n\u003cp\u003esudo docker exec -it -u root b667f9cfa164 bash\u003c/p\u003e","title":"其他文章"},{"content":"添加\n\u0026lt;meta name=\u0026#34;referrer\u0026#34; content=\u0026#34;no-referrer\u0026#34;\u0026gt; 到vue项目下的index.html 的head 中\n","permalink":"https://www.heiok.top/posts/tutorial/%E5%89%8D%E6%AE%B5%E9%A1%B5%E9%9D%A2%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87https%E5%9B%BE%E7%89%87%E6%8F%90%E7%A4%BA403/","summary":"\u003cp\u003e添加\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026lt;meta name=\u0026#34;referrer\u0026#34; content=\u0026#34;no-referrer\u0026#34;\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e到vue项目下的index.html 的head 中\u003c/p\u003e","title":"前段页面无法显示图片，https，图片提示403"},{"content":"工厂模式、单例模式、装饰模式、策略模式、代理模式和观察者模式\n1.工厂模式 实际应用场景 工厂方法在SpringBoot中，如果在用工厂的同时又出现了new，那绝对是一个败笔。在SpringBoot中，几乎所有对象都可以直接交给Spring容器管理，它天然已经是一个工厂对象，因此在SpringBoot项目中用工厂模式，再频繁new对象反而不妥。那么工厂模式究竟怎么用在SpringBoot项目的支付场景呢？其实很简单，如果我们要选择一个支付渠道，而项目中有100种支付渠道，那这个时候无疑要写100个@Autowired 注入100个支付渠道，并且需要做100种判断，这个时候我们可以用工厂模式取代我们判断，直接根据我们配置的映射关系从Spring容器中拿到对应支付渠道的实例，代码量将大大减少，这块是使用工厂的另一种秒用。\n模拟场景\n工厂方法模式包含如下角色：\nProduct：抽象产品 ConcreteProduct：具体产品 Factory：抽象工厂 ConcreteFactory：具体工厂 结构图：\n时序图\n工厂模式总结 （1）适用场景\n输出的产品是标准品，谁来做都可以。\n（2）举例\n常见的数据库连接工厂，SqlSessionFactory，产品是一个数据库连接，至于是oracle提供的，还是mysql提供的，我并不需要关心，因为都能让我通过sql来操作数据。\n（3）注意事项\n项目初期，软件结构和需求都没有稳定下来时，不建议使用此模式，因为其劣势也很明显，增加了代码的复杂度，增加了调用层次，增加了内存负担。所以要注意防止模式的滥用。\n（4）简单实现\npublic class FactoryPatternDemo { public static void main(String[] args) { Factory factory = new ConcreteFactoryB(); Product product = factory.createProduct(); product.use(); } } //抽象产品：提供了产品的接口 interface Product { public void use; } //具体产品A：实现抽象产品中的抽象方法 class ConcreteProductA implements Product { public void use() { System.out.println(\u0026#34;具体产品A显示...\u0026#34;); } } //具体产品B：实现抽象产品中的抽象方法 class ConcreteProductB implements Product { public void use() { System.out.println(\u0026#34;具体产品B显示...\u0026#34;); } } //抽象工厂：提供了厂品的生成方法 interface Factory { public Product createProduct(); } //具体工厂A：实现了厂品的生成方法 class ConcreteFactoryA implements AbstractFactory { public Product createProduct() { System.out.println(\u0026#34;具体工厂A生成--\u0026gt;具体产品A.\u0026#34;); return new ConcreteProductA(); } } //具体工厂B：实现了厂品的生成方法 class ConcreteFactoryB implements AbstractFactory { public Product createProduct() { System.out.println(\u0026#34;具体工厂B生成--\u0026gt;具体产品B.\u0026#34;); return new ConcreteProductB(); } } 实际场景，在springboot中需要根据不同的情况使用不同的支付方式\n工厂\n@Data @Configuration public class PayFactory implements ApplicationContextAware { private static ApplicationContext applicationContext; @Override public void setApplicationContext(ApplicationContext applicationContext) throws BeansException { PayFactory.applicationContext = applicationContext; } //根据不同的key获取到不同的bean，从而实现不同的支付方式 public PayChannel createChannel(String key) { return applicationContext.getBean(key, PayChannel.class); } } public interface PayChannel { void pay(); } @Component(\u0026#34;weixinPay\u0026#34;) public class WeixinPay implements PayChannel { @Override public void pay() { System.out.println(\u0026#34;微信支付\u0026#34;); } } @Component(\u0026#34;aliPay\u0026#34;) public class AliPay implements PayChannel { @Override public void pay() { System.out.println(\u0026#34;支付宝支付\u0026#34;); } } @RestController public class PayController { @Autowired private PayFactory payFactory; @GetMapping(\u0026#34;/pay\u0026#34;) public void pay(){ PayChannel channel = payFactory.createChannel(\u0026#34;1\u0026#34;); channel.pay(); } } 2.单例模式 概念：\n什么是单例模式？ 单例模式是一种创建型设计模式，用于确保一个类只有一个实例，并提供全局访问点来获取该实例。简单来说，单例模式就是通过限制类的实例化次数，使得该类只能被实例化一次。\n在单例模式中，类的构造方法通常会被设置为私有，以防止外部直接创建该类的实例。同时，该类内部会定义一个静态方法或成员变量来获取唯一的实例。\n单例模式的主要目的是确保系统中只存在一个实例，这样可以节省资源并提高性能。常见的应用场景包括数据库连接池、线程池、日志记录器等需要全局访问且实例唯一的情况。\n经典的单例模式实现方式是懒汉式和饿汉式。懒汉式在首次使用时才创建实例，而饿汉式在类加载时就创建实例。懒汉式相对于饿汉式更加延迟实例化，但需要考虑多线程下的线程安全性。\n优点：\n独一无二的实例：通过单例模式，确保一个类只有一个实例存在。这可以避免不同部分的代码创建出多个相同的实例，保证实例的唯一性。 全局访问点：单例模式提供了一个全局的访问点，使得其他对象可以方便地获取到该单例实例。这简化了对象之间的通信和数据共享。 节约资源：由于单例模式只创建一个实例并重复使用，可以减少系统中相同对象的创建和销毁过程，从而节约了系统资源。 惰性实例化：懒汉式单例模式在首次使用时才创建实例，避免了不必要的资源浪费。当实例对象较为复杂或初始化耗时较长时，惰性实例化可以提升系统启动速度。 避免竞态条件：单例模式可以通过合适的实现方式（如双重检查锁定）避免多线程下的竞态条件，确保线程安全性。 可控的实例化：通过单例模式，可以对实例化过程进行集中控制，从而更好地管理和维护实例化对象。 1.springboot单例模式 在Spring Boot中实现单例模式，可以使用Spring框架提供的**@Scope**注解。默认情况下，Spring Bean是单例的，因此不需要显式地指定@Scope注解。但是，如果需要更改Bean的作用域，则可以使用@Scope注解。\n以下是一个使用@Scope注解实现单例模式的示例：\nimport org.springframework.context.annotation.Scope; import org.springframework.stereotype.Component; @Component @Scope(\u0026#34;singleton\u0026#34;) public class SingletonBean { // 单例Bean的代码 } 在上面的示例中，我们使用@Component注解将SingletonBean类标记为Spring Bean，并使用@Scope(\u0026ldquo;singleton\u0026rdquo;)注解将其作用域设置为单例。\n相关问题\n2.springboot启用单例模式 在SpringBoot中，默认情况下，所有的Bean都是以单例模式进行管理的。这意味着在应用程序的整个生命周期中，只会创建一个实例，并且该实例会在需要时被重复使用。\nSpringBoot中启用单例模式的方式有以下几种：\n默认方式：当使用@Component、@Service、@Repository等注解标记类时，默认情况下会以单例模式进行管理。 @Service public class UserService { // ... } 使用@Scope注解：通过在类级别上使用@Scope(\u0026quot;singleton\u0026quot;)注解，可以明确指定该类以单例模式进行管理。 @Service @Scope(\u0026#34;singleton\u0026#34;) public class UserService { // ... } 在配置文件中指定：可以在application.properties或application.yml配置文件中，设置spring.main.allow-bean-definition-overriding=true来启用单例模式。这样，在使用@Component、@Service、@Repository等注解标记类时，默认会以单例模式进行管理。 需要注意的是，即使启用了单例模式，SpringBoot仍然可以通过其他方式创建非单例的Bean，例如在方法上使用@Scope(\u0026quot;prototype\u0026quot;)注解来指定原型模式。此外，在多线程环境下，需要注意单例Bean的线程安全性。\n3.springboot怎么使用单例模式 在Spring Boot中使用单例模式与使用传统的Java应用程序中使用单例模式是相同的。单例模式是一种创建型设计模式，旨在确保类只有一个实例，并且提供一个全局访问点。在Spring Boot中，可以通过将类标记为组件（使用@Component或其他相关注释）来实现单例模式，Spring Boot会自动管理这些组件的生命周期。\n例如，考虑一个名为SingletonService的类，它使用单例模式实现：\n@Component public class SingletonService { private static SingletonService instance; private SingletonService() {} public static synchronized SingletonService getInstance() { if (instance == null) { instance = new SingletonService(); } return instance; } public void doSomething() { System.out.println(\u0026#34;Doing something...\u0026#34;); } } 该示例通过在getInstance方法上添加synchronized关键字确保线程安全，但会对性能造成一定影响。为了避免每次都进行同步，也可以采用双重检查锁定（Double-Checked Locking）或静态内部类的方式实现懒汉式单例模式。\n@Service public class MyService { @Autowired private SingletonService singletonService; public void doSomething() { singletonService.doSomething(); } } 这样做可以确保在应用程序中只有一个SingletonService实例，并且可以在需要时被注入到其他组件中使用。\n3.装饰模式 装饰器（Decorator）模式的定义：指在不改变现有对象结构的情况下，动态地给该对象增加一些职责（即增加其额外功能）的模式，它属于对象结构型模式。\n装饰器模式的主要优点有：\n装饰器是继承的有力补充，比继承灵活，在不改变原有对象的情况下，动态的给一个对象扩展功能，即插即用 通过使用不用装饰类及这些装饰类的排列组合，可以实现不同效果 装饰器模式完全遵守开闭原则 其主要缺点是：装饰器模式会增加许多子类，过度使用会增加程序得复杂性。\n1. 装饰器模式的结构与实现 通常情况下，扩展一个类的功能会使用继承方式来实现。但继承具有静态特征，耦合度高，并且随着扩展功能的增多，子类会很膨胀。如果使用组合关系来创建一个包装对象（即装饰对象）来包裹真实对象，并在保持真实对象的类结构不变的前提下，为其提供额外的功能，这就是装饰器模式的目标。下面来分析其基本结构和实现方法\n4.建造者模式 4.1结构 抽象建造者 具体建造者 产品类 指挥者类 ","permalink":"https://www.heiok.top/posts/tutorial/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8/","summary":"\u003cp\u003e工厂模式、单例模式、装饰模式、策略模式、代理模式和观察者模式\u003c/p\u003e\n\u003ch3 id=\"1工厂模式\"\u003e1.工厂模式\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"实际应用场景\"\u003e实际应用场景\u003c/h4\u003e\n\u003cp\u003e工厂方法在SpringBoot中，如果在用工厂的同时又出现了new，那绝对是一个败笔。在SpringBoot中，几乎所有对象都可以直接交给Spring容器管理，它天然已经是一个工厂对象，因此在SpringBoot项目中用工厂模式，再频繁new对象反而不妥。那么工厂模式究竟怎么用在SpringBoot项目的支付场景呢？其实很简单，如果我们要选择一个支付渠道，而项目中有100种支付渠道，那这个时候无疑要写100个@Autowired 注入100个支付渠道，并且需要做100种判断，这个时候我们可以用工厂模式取代我们判断，直接根据我们配置的映射关系从Spring容器中拿到对应支付渠道的实例，代码量将大大减少，这块是使用工厂的另一种秒用。\u003c/p\u003e","title":"设计模式应用"},{"content":"本文主要讲如何将一个jar包打包成一个docker镜像，并运行起来，这里我以metabase.jar为例，这个jar包可以直接使用下面命令进行运行：\njava -jar shiyi-blog.jar\n接下来将他打包成docker镜像，直接在docker中运行，第一步没有安装docker的首先要安装docker，安装docker不为本教程重点，可点击如下链接：docker介绍和安装\n一，编写dockerfile 1.这个jar包可以放到你想放的地方，然后在与jar包相同的文件夹中运用下边命令创建dockerfile文件并进行编辑\ntouch DockerFile\n2.添加如下内容，当然如果是其它jar包要记得更换名字，不要照抄\n#penjdk:8-jre 为基础镜像，来构建此镜像，可以理解为运行的需要基础环境 FROM openjdk:8-jre #WORKDIR指令用于指定容器的一个目录， 容器启动时执行的命令会在该目录下执行。 WORKDIR /opt/docker/images/jar/ #将当前metabase.jar 复制到容器根目录下 ADD shiyi-blog.jar shiyi-blog.jar #将依赖包 复制到容器根目录/libs下,metabase.jar已不再需要添加其它jar包 #ADD libs /libs #暴露容器端口为3000 Docker镜像告知Docker宿主机应用监听了3000端口 EXPOSE 3000 #容器启动时执行的命令 CMD java -jar metabase.jar 创建后：\n二，使用docker build构建镜像 注意：这个命令是在我的DockerFile所在目录执行的，还有别忘记了命令后边的空格和点\n//docker build // . 表示当前目录 -f 参数指定Dockerfile文件 -t 表示 制作的镜像:tag 注意最后加上空格和. docker build -f DockerFile -t test/shiyi-blog:1.0.0 . 构建完成后使用以下命令查看是否有我们的test/metabase镜像\ndocker images\n以下是我的查询结果：\nopenjdk是我们编写DockerFile时添加的依赖镜像，所以docker会自动根据dockerfile将openjdk镜像下拉下来\n三，运行docker镜像 //-d 表示后台运行容器 ,-p表示将宿主机的3000端口映射到容器中的3000端口\ndocker run -d -p 3000:3000 test/metabase:1.0.0\n一个镜像每run一次就会新增一个容器，也就是一个镜像可以对应多个容器\n然后我们查看容器发现已经有了docker容器，使用以下命令\ndocker ps -a\n四，启动停止容器 启动(containerid就是docker ps -a 查询出来的containerid)：\ndocker start containerid\n","permalink":"https://www.heiok.top/posts/tutorial/%E4%BD%BF%E7%94%A8docker-%E9%83%A8%E7%BD%B2springboot%E9%A1%B9%E7%9B%AE/","summary":"\u003cp\u003e本文主要讲如何将一个jar包打包成一个docker镜像，并运行起来，这里我以metabase.jar为例，这个jar包可以直接使用下面命令进行运行：\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ejava -jar shiyi-blog.jar\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e接下来将他打包成docker镜像，直接在docker中运行，第一步没有安装docker的首先要安装docker，安装docker不为本教程重点，可点击如下链接：\u003ca href=\"https://blog.csdn.net/Jarbein/article/details/103627522\"\u003edocker介绍和安装\u003c/a\u003e\u003c/p\u003e","title":"使用docker 部署springboot项目"},{"content":"Ubuntu安装MySQL 介绍：\nUbuntu 是一款基于Linux操作系统的免费开源发行版，广受欢迎。它以稳定性、安全性和用户友好性而闻名，适用于桌面和服务器环境。Ubuntu提供了大量的软件包和应用程序，拥有庞大的社区支持和活跃的开发者社区。它的长期支持（LTS）版本获得5年的安全更新，为企业和个人提供了可靠的选择。 Ubuntu的桌面版本具有直观的用户界面，而服务器版本则适用于构建强大的Web服务器和云计算平台。\n当你需要在Ubuntu上安装MySQL时，有两种主要的方式：在线安装和离线安装。在线安装是通过Ubuntu软件包管理器直接下载和安装MySQL，而离线安装则涉及手动下载MySQL安装包并在离线环境中进行安装。\nUbuntu和MySQL默认版本对照 以下是一个以表格形式列出了不同Ubuntu版本和它们通常默认安装的MySQL版本：\nUbuntu 版本 默认 MySQL 版本 Ubuntu 22.04 LTS MySQL 8.0 Ubuntu 20.04 LTS MySQL 8.0 Ubuntu 18.04 LTS MySQL 5.7 Ubuntu 16.04 LTS MySQL 5.7 Ubuntu 14.04 LTS MySQL 5.5 Ubuntu 12.04 LTS MySQL 5.5 在线安装MySQL 步骤1：更新软件包列表 在进行任何软件安装之前，请确保你的系统的软件包列表是最新的。打开终端并运行以下命令：\nsudo apt update 步骤2：安装MySQL服务器 在更新软件包列表后，这里我们可以查看一下可使用的MySQL安装包：\n# 查看可使用的安装包 sudo apt search mysql-server 接下来可以使用以下命令安装MySQL服务器：\n# 安装最新版本 sudo apt install -y mysql-server # 安装指定版本 sudo apt install -y mysql-server-8.0 如果不加-y 会在安装过程中，系统将提示你设置MySQL的root密码。确保密码足够强，且记住它，因为你将在以后需要用到它。\n步骤3：启动MySQL服务 安装完成后，MySQL服务会自动启动，未启动则使用以下命令启动MySQL服务：\nsudo systemctl start mysql 并将MySQL设置为开机自启动：\nsudo systemctl enable mysql 步骤4：检查MySQL状态 你可以使用以下命令来检查MySQL是否正在运行：\nsudo systemctl status mysql 至此，你已经成功在线安装了MySQL服务器。\n步骤5：修改密码、权限 默认安装是没有设置密码的，需要我们自己设置密码。\n# 登录mysql，在默认安装时如果没有让我们设置密码，则直接回车就能登录成功。 mysql -uroot -p # 设置密码 mysql8.0 ALTER USER \u0026#39;root\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED WITH mysql_native_password BY \u0026#39;新密码\u0026#39;; # 设置密码 mysql5.7 set password=password(\u0026#39;新密码\u0026#39;); # 配置IP 5.7 grant all privileges on *.* to root@\u0026#34;%\u0026#34; identified by \u0026#34;密码\u0026#34;; # 刷新缓存 flush privileges; 注意 ：配置8.0版本参考：我这里通过这种方式没有实现所有IP都能访问；我是通过直接修改配置文件才实现的，MySQL8.0版本把配置文件 my.cnf 拆分成mysql.cnf 和mysqld.cnf，我们需要修改的是mysqld.cnf文件：\n如果遇到s not allowed to connect to this MySQL server 的报错\n1、执行登陆MySQL mysql -u root -p 密码 2、执行use mysql; 3、执行update user set host = \u0026#39;%\u0026#39; where user = \u0026#39;root\u0026#39;; 4、执行flush privileges; sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf 修改 bind-address，保存后重启MySQL即可。\nbind-address = 0.0.0.0 重启MySQL重新加载一下配置：\nsudo systemctl restart mysql 离线安装MySQL 如果你需要在没有互联网连接的环境中安装MySQL，可以在另一台联网的计算机上下载MySQL的安装包，然后将其传输到目标Ubuntu机器上进行安装。\n步骤1：下载MySQL安装包 在联网的计算机上，访问 MySQL官方网站 或者MySQL的软件仓库，然后下载适合你系统版本的MySQL安装包（通常是.deb文件）。将下载的文件保存到一个可移动的存储设备上。\n步骤2：传输安装包到目标机器 将下载的MySQL安装包从联网计算机传输到目标Ubuntu机器。你可以使用USB驱动器、外部硬盘、网络传输等方法来完成这个步骤。\n步骤3：安装MySQL 在目标Ubuntu机器上，使用以下命令来安装MySQL：\ndeb.文件安装方法 sudo dpkg -i mysql-package-name.deb 请将 mysql-package-name.deb 替换为你下载的MySQL安装包的文件名。\n.tar.gz 文件安装方法 # 解压文件 tar -zxvf mysql-package.tar.gz # 安装 cd /tmp/mysql-package/bin/ ./mysql_install_db 请将 mysql-package.tar.gz 替换为你实际下载的MySQL安装包的文件名。\n步骤4：配置MySQL 安装完成后，你可以使用以下命令启动MySQL服务：\nsudo systemctl start mysql 然后将MySQL设置为开机自启动：\nsudo systemctl enable mysql 步骤5：检查MySQL状态 使用以下命令来检查MySQL是否正在运行：\nsudo systemctl status mysql 至此，你已经成功在离线环境中安装了MySQL服务器。\n总结起来，你可以根据你的网络连接情况选择在线或离线安装MySQL。在线安装更加简单，但离线安装可以让你在没有网络连接的情况下进行安装。希望这篇博客对你有所帮助，顺利安装MySQL！如果你需要更详细的步骤或进一步的配置，请查阅MySQL官方文档或相关教程。\n","permalink":"https://www.heiok.top/posts/tutorial/%E5%9C%A8ubuntu-2204-lts-%E4%B8%8A%E5%AE%89%E8%A3%85-mysql%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%9C%A8%E7%BA%BF%E6%96%B9%E5%BC%8F%E5%92%8C%E7%A6%BB%E7%BA%BF%E6%96%B9%E5%BC%8F/","summary":"\u003ch2 id=\"content_views\"\u003eUbuntu安装MySQL\u003c/h2\u003e\n\u003cp\u003e介绍：\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://cn.ubuntu.com/\"\u003eUbuntu\u003c/a\u003e 是一款基于Linux操作系统的免费开源发行版，广受欢迎。它以稳定性、安全性和用户友好性而闻名，适用于桌面和服务器环境。Ubuntu提供了大量的软件包和应用程序，拥有庞大的社区支持和活跃的开发者社区。它的长期支持（LTS）版本获得5年的安全更新，为企业和个人提供了可靠的选择。 Ubuntu的桌面版本具有直观的用户界面，而服务器版本则适用于构建强大的Web服务器和云计算平台。\u003cbr\u003e\n\u003cimg loading=\"lazy\" src=\"https://i-blog.csdnimg.cn/blog_migrate/61b19448b3cf469f1aca350fefc13226.png\" alt=\"在这里插入图片描述\"  /\u003e\n\u003cbr\u003e\n当你需要在Ubuntu上安装MySQL时，有两种主要的方式：在线安装和离线安装。在线安装是通过Ubuntu软件包管理器直接下载和安装MySQL，而离线安装则涉及手动下载MySQL安装包并在离线环境中进行安装。\u003c/p\u003e","title":"在Ubuntu 22.04 LTS 上安装 MySQL两种方式：在线方式和离线方式"},{"content":"Homebrew笔记 内容\n","permalink":"https://www.heiok.top/posts/tutorial/macos_homebrew/","summary":"\u003ch2 id=\"homebrew笔记\"\u003eHomebrew笔记\u003c/h2\u003e\n\u003cp\u003e内容\u003c/p\u003e","title":"MacOS上Homebrew 安装、配置、更改国内镜像源及使用教程"},{"content":"数据库语法 DDL\u0026ndash;创建表 操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。\n查询当前数据库下所有表名称 show databases;--单行注释 /*多行注释*/ 创建数据库\ncreate databases 数据库名称; 删除\ndrop databases 数据库名称; 使用数据库\nselect database();--查看当前使用的数据库 use 数据库名称; ##DDl\u0026ndash;操作表\n查询表 查询当前数据库下所有的表名称\nshow tables;--先进入表（use 数据库名称）在使用 查询表结构\ndesc 表结构; 创建表 最后一行不加逗号\nCREATE TABLE 表名 ( 字段名1 数据类型1, 字段名2 数据类型2, … 字段名n 数据类型n ); 数据类型 数值\ntinyint : 小整数型，占一个字节 int ： 大整数类型，占四个字节 eg ： age int double ： 浮点类型 使用格式： 字段名 double(总长度,小数点后保留的位数) eg ： score double(5,2) 日期\ndate ： 日期值。只包含年月日 eg ：birthday date ： datetime ： 混合日期和时间值。包含年月日时分秒 字符串\nchar ： 定长字符串。 优点：存储性能高 缺点：浪费空间 eg ： name char(10) 如果存储的数据字符个数不足10个，也会占10个的空间 varchar ： 变长字符串。 优点：节约空间 缺点：存储性能底 eg ： name varchar(10) 如果存储的数据字符个数不足10个，那就数据字符个数是几就占几个的空间 删除表 删除表\ndrop table 表名; 删除表时判断表是否存在\ndrop table if exists 表名; 修改表 修改表名\nalter table 表名 rename to 新的表名; -- 将表名student修改为stu alter table student rename to stu; 添加一列\nalter table 表名 add 列名 数据类型; -- 给stu表添加一列address，该字段类型是varchar(50) alter table stu add address varchar(50); 修改数据类型\nalter table 表名 modify 列名 新数据类型 -- 将stu表中的address字段名改为 addr，类型改为varchar(50) alter table stu change address addr varchar(50); 修改列名和数据类型\nalter table 表名 change 列名 新列名 新数据类型; -- 将stu表中的address字段名改为 addr，类型改为varchar(50) alter table stu change address addr varchar(50); 删除列\nalter table 表名 drop 列名 -- 将stu表中的addr字段 删除 alter table stu drop addr; DML\u0026ndash;数据操作 添加数据 给指定列添加数据\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…); 给全部列添加数据\nINSERT INTO 表名 VALUES(值1,值2,…); 批量添加数据\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…; INSERT INTO 表名 VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…; eg\n-- 给指定列添加数据 INSERT INTO stu (id, NAME) VALUES (1, \u0026#39;张三\u0026#39;); -- 给所有列添加数据，列名的列表可以省略的 INSERT INTO stu (id,NAME,sex,birthday,score,email,tel,STATUS) VALUES (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11- 11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1); INSERT INTO stu VALUES (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1); -- 批量添加数据 INSERT INTO stu VALUES (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1), (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1), (2,\u0026#39;李四\u0026#39;,\u0026#39;男\u0026#39;,\u0026#39;1999-11-11\u0026#39;,88.88,\u0026#39;lisi@itcast.cn\u0026#39;,\u0026#39;13888888888\u0026#39;,1); 修改数据 修改表数据\nUPDATE 表名 SET 列名1=值1,列名2=值2,… [WHERE 条件] ; 修改语句中如果不加条件，则将所有数据都修改 像上面的语句中的中括号，表示在写sql语句中可以省略这部分 将张三的性别改为女\n1 update stu set sex = \u0026#39;女\u0026#39; where name = \u0026#39;张三\u0026#39;; 将张三的生日改为 1999-12-12 分数改为99.99\nupdate stu set birthday = \u0026#39;1999-12-12\u0026#39;, score = 99.99 where name = \u0026#39;张三\u0026#39;; ###删除数据\n删除数据\nDELETE FROM 表名 [WHERE 条件] ; -- 删除张三记录 delete from stu where name = \u0026#39;张三\u0026#39;; -- 删除stu表中所有的数据 delete from stu; DQL\u0026ndash;查询数据 SELECT 字段列表 FROM 表名列表 WHERE 条件列表 GROUP BY 分组字段 HAVING 分组后条件 ORDER BY 排序字段 LIMIT 分页限定 基础查询 查询多个字段\nSELECT 字段列表 FROM 表名; SELECT * FROM 表名; -- 查询所有数据 去除重复记录\n1 SELECT DISTINCT 字段列表 FROM 表名; 起别名\nAS: AS 也可以省略 练习 查询name、age两列\nselect name,age from stu; 查询所有列的数据，列名可用*代替\nselect * from stu; 去除重复记录\nselect distinct address from stu; 查询姓名、数学成绩、英语成绩。并通过as给math和english起别名（as关键字可以省略）\nselect name,math as 数学成绩,english as 英文成绩 from stu; select name,math 数学成绩,english 英文成绩 from stu; 范围查询\nselect * from emp where sal in(1500,3000,5000); 条件查询 语法\nSELECT 字段列表 FROM 表名 WHERE 条件列表; 条件\n练习 查询年龄大于20岁的学员信息\n1 select * from stu where age \u0026gt; 20; 查询年龄大于等于20岁的学员信息\nselect * from stu where age \u0026gt;= 20; 查询年龄大于等于20岁 并且 年龄 小于等于 30岁 的学员信息\nselect * from stu where age \u0026gt;= 20 \u0026amp;\u0026amp; age \u0026lt;= 30; select * from stu where age \u0026gt;= 20 and age \u0026lt;= 30; 上面语句中 \u0026amp;\u0026amp; 和 and 都表示并且的意思。建议使用 and 。 也可以使用 between \u0026hellip; and 来实现上面需求\nselect * from stu where age BETWEEN 20 and 30; 查询入学日期在'1998-09-01\u0026rsquo; 到 \u0026lsquo;1999-09-01\u0026rsquo; 之间的学员信息\nselect * from stu where hire_date BETWEEN \u0026#39;1998-09-01\u0026#39; and \u0026#39;1999-09-01\u0026#39;; 查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学员信息\nselect * from stu where age = 18 or age = 20 or age = 22; select * from stu where age in (18,20 ,22); 查询英语成绩为 null的学员信息 null值的比较不能使用 = 或者 != 。需要使用 is 或者 is not\nselect * from stu where english = null; -- 这个语句是不行的 select * from stu where english is null; select * from stu where english is not null; 模糊查询 模糊查询使用like关键字，可以使用通配符进行占位: （1）_ : 代表单个任意字符\n（2）% : 代表任意个数字符\n查询姓\u0026rsquo;马\u0026rsquo;的学员信息\nselect * from stu where name like \u0026#39;马%\u0026#39;; 查询第二个字是\u0026rsquo;花\u0026rsquo;的学员信息\nselect * from stu where name like \u0026#39;_花%\u0026#39;; 查询名字中包含 \u0026lsquo;德\u0026rsquo; 的学员信息\nselect * from stu where name like \u0026#39;%德%\u0026#39;; 排序查询 语法\nselect字段列表 from 表名 order by 排序字段名1 [排序方式1],排序字段名2 [排序方式2] …; ASC ： 升序排列 （默认值）\nDESC ： 降序排列\n注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序\n查询学生信息，按照年龄升序排列\nselect * from stu order by age ; 查询学生信息，按照数学成绩降序排列，如果数学成绩一样，再按照英语成绩升序排列\nselect * from stu order by math desc , english asc ; 聚合函数 概念\n将一列数据作为一个整体，进行纵向计算。\n分类\n聚合函数语法\nselect聚合函数名(列名) from 表; 注意：null 值不参与所有聚合函数运算\n练习 统计班级一共有多少个学生(后面可以加条件查询语句)\nselect count from stu; select count(english) from stu; 上面语句根据某个字段进行统计，如果该字段某一行的值为null的话，将不会被统计。所以可以在count() 来实现。 表 示所有字段数据，一行中也不可能所有的数据都为null，所以建议使用 count(*)\n1 select count(*) from stu; 查询数学成绩的最高分\nselect max(math) from stu; ###分组查询\n语法\nSELECT 字段列表 FROM 表名 [WHERE 分组前条件限定] GROUP BY 分组字段名 [HAVING 分组后条件过滤]; 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n练习 查询男同学和女同学各自的数学平均分\nselect sex, avg(math) from stu group by sex; 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n查询男同学和女同学各自的数学平均分，以及各自人数\nselect avg(age) \u0026#39;年龄\u0026#39;,count(*) \u0026#39;性别\u0026#39; from xsjbxxb group by xb; 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组\nselect sex, avg(math),count(*) from stu where math \u0026gt; 70 group by sex; 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的\nselect sex, avg(math),count(*) from stu where math \u0026gt; 70 group by sex having count(*) \u0026gt; 2; 执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过 滤。\n可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。\n分页查询 语法\nSELECT 字段列表 FROM 表名 LIMIT 起始索引 , 查询条目数; 从0开始查询，查询3条数据（这里0就是起始索引）\nselect * from stu limit 0 , 3; 公式\n起始索引 = (当前页码 - 1) * 每页显示的条数 ","permalink":"https://www.heiok.top/posts/blog/mysql_op_base/","summary":"\u003ch1 id=\"数据库语法\"\u003e数据库语法\u003c/h1\u003e\n\u003ch2 id=\"ddl创建表\"\u003eDDL\u0026ndash;创建表\u003c/h2\u003e\n\u003cp\u003e操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e查询当前数据库下所有表名称\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eshow\u003c/span\u003e databases;\u003cspan style=\"color:#75715e\"\u003e--单行注释 /*多行注释*/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e创建数据库\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ecreate\u003c/span\u003e databases \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e数据库名称\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e删除\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edrop\u003c/span\u003e databases \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e数据库名称\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用数据库\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edatabase\u003c/span\u003e();\u003cspan style=\"color:#75715e\"\u003e--查看当前使用的数据库\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003euse \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e数据库名称\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e##DDl\u0026ndash;操作表\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"查询表\"\u003e查询表\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e查询当前数据库下所有的表名称\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eshow\u003c/span\u003e tables;\u003cspan style=\"color:#75715e\"\u003e--先进入表（use 数据库名称）在使用\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查询表结构\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edesc\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e表结构\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"创建表\"\u003e创建表\u003c/h3\u003e\n\u003cp\u003e最后一行不加逗号\u003c/p\u003e","title":"Mysql"},{"content":" Sulv\u0026#39;s Blog 一个记录技术、阅读、生活的博客 👉友链格式 名称： Wait\u0026rsquo;s Blog 网址： https://www.heiok.top/ 图标： https://www.heiok.top/img/Q.gif 描述： 一个记录技术、阅读、生活的博客 👉友链申请要求 秉承互换友链原则、文章定期更新、不能有太多广告、个人描述字数控制在15字内\n","permalink":"https://www.heiok.top/links/","summary":"\u003cdiv class=\"friend\"\u003e\n\u003ca target=\"_blank\" href=https://www.sulvblog.cn title=Sulv\u0026#39;s\u0026#32;Blog class=\"friendurl\"\u003e\n  \u003cdiv class=\"frienddiv\"\u003e\n    \u003cdiv class=\"frienddivleft\"\u003e\n      \u003cimg class=\"myfriend\" src=https://www.sulvblog.cn/img/Q.gif /\u003e\n    \u003c/div\u003e\n    \u003cdiv class=\"frienddivright\"\u003e\n      \u003cdiv class=\"friendname\"\u003eSulv\u0026#39;s Blog\u003c/div\u003e\n      \u003cdiv class=\"friendinfo\"\u003e一个记录技术、阅读、生活的博客\u003c/div\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/a\u003e\n\n\u003c/div\u003e\n\u003cbr/\u003e\n\u003cbr/\u003e\n\u003cbr/\u003e\n\u003cbr/\u003e\n\u003cbr/\u003e\n\u003cdiv style=\"font-size: 20px;\" class=\"youlian\"\u003e👉友链格式\u003c/div\u003e\n\u003cdiv style=\"font-size: 16px;\"\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e\u003c/th\u003e\n          \u003cth\u003e\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e名称：\u003c/td\u003e\n          \u003ctd\u003eWait\u0026rsquo;s Blog\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e网址：\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://www.heiok.top/\"\u003ehttps://www.heiok.top/\u003c/a\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e图标：\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://www.heiok.top/img/Q.gif\"\u003ehttps://www.heiok.top/img/Q.gif\u003c/a\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e描述：\u003c/td\u003e\n          \u003ctd\u003e一个记录技术、阅读、生活的博客\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cbr/\u003e\n\u003cdiv style=\"font-size: 20px;\"\u003e👉友链申请要求\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e秉承互换友链原则、文章定期更新\u003c!-- 、网站在工信部备案 --\u003e、不能有太多广告、个人描述字数控制在15字内\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cbr/\u003e\n\u003c!-- \u003cdiv style=\"font-size: 20px;\"\u003e👉Hugo博客交流群\u003c/div\u003e --\u003e\n\u003c!-- \u003e 787018782 --\u003e","title":"🤝友链"},{"content":"关于我\n英文名: Wait 职业: 程序员，爬虫，自动化测试 运动: 游戏 ","permalink":"https://www.heiok.top/about/","summary":"\u003cp style=\"font-size: 25px;\"\u003e关于我\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e\u003c/th\u003e\n          \u003cth\u003e\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e英文名:\u003c/td\u003e\n          \u003ctd\u003eWait\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e职业:\u003c/td\u003e\n          \u003ctd\u003e程序员，爬虫，自动化测试\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e运动:\u003c/td\u003e\n          \u003ctd\u003e游戏\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e","title":"🙋🏻‍♂️关于"},{"content":"1. 介绍 scan命令的作用和keys *的作用类似，主要用于查找redis中的键，但是在正式的生产环境中一般不会直接使用keys *这个命令，因为他会返回所有的键，如果键的数量很多会导致查询时间很长，进而导致服务器阻塞，所以需要scan来进行更细致的查找\nscan总共有这几种命令：scan、sscan、hscan、zscan，分别用于迭代数据库中的：数据库中所有键、集合键、哈希键、有序集合键，命令具体结构如下：\nscan cursor [MATCH pattern] [COUNT count] [TYPE type] sscan key cursor [MATCH pattern] [COUNT count] hscan key cursor [MATCH pattern] [COUNT count] zscan key cursor [MATCH pattern] [COUNT count] 2. scan scan cursor [MATCH pattern] [COUNT count] [TYPE type]，cursor表示游标，指查询开始的位置，count默认为10，查询完后会返回下一个开始的游标，当返回0的时候表示所有键查询完了\n127.0.0.1:6379[2]\u0026gt; scan 0 1) \u0026#34;3\u0026#34; 2) 1) \u0026#34;mystring\u0026#34; 2) \u0026#34;myzadd\u0026#34; 3) \u0026#34;myhset\u0026#34; 4) \u0026#34;mylist\u0026#34; 5) \u0026#34;myset2\u0026#34; 6) \u0026#34;myset1\u0026#34; 7) \u0026#34;mystring1\u0026#34; 8) \u0026#34;mystring3\u0026#34; 9) \u0026#34;mystring4\u0026#34; 10) \u0026#34;myset\u0026#34; 127.0.0.1:6379[2]\u0026gt; scan 3 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;myzadd1\u0026#34; 2) \u0026#34;mystring2\u0026#34; 3) \u0026#34;mylist2\u0026#34; 4) \u0026#34;myhset1\u0026#34; 5) \u0026#34;mylist1\u0026#34; MATCH可以采用模糊匹配找出自己想要查找的键，这里的逻辑是先查出20个，再匹配，而不是先匹配再查询，这里加上count 20是因为默认查出的10个数中可能不能包含所有的相关项，所以把范围扩大到查20个，我这里测试的键总共有15个\n127.0.0.1:6379[2]\u0026gt; scan 0 match mylist* count 20 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;mylist\u0026#34; 2) \u0026#34;mylist2\u0026#34; 3) \u0026#34;mylist1\u0026#34; TYPE可以根据具体的结构类型来匹配该类型的键\n127.0.0.1:6379[2]\u0026gt; scan 0 count 20 type list 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;mylist\u0026#34; 2) \u0026#34;mylist2\u0026#34; 3) \u0026#34;mylist1\u0026#34; 3. sscan sscan key cursor [MATCH pattern] [COUNT count]，sscan的第一个参数总是集合类型的key\n127.0.0.1:6379[2]\u0026gt; sadd myset1 a b c d (integer) 4 127.0.0.1:6379[2]\u0026gt; smembers myset1 1) \u0026#34;d\u0026#34; 2) \u0026#34;a\u0026#34; 3) \u0026#34;c\u0026#34; 4) \u0026#34;b\u0026#34; 127.0.0.1:6379[2]\u0026gt; sscan myset1 0 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;d\u0026#34; 2) \u0026#34;c\u0026#34; 3) \u0026#34;b\u0026#34; 4) \u0026#34;a\u0026#34; 127.0.0.1:6379[2]\u0026gt; sscan myset1 0 match a 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;a\u0026#34; 4. hscan hscan key cursor [MATCH pattern] [COUNT count]，sscan的第一个参数总是哈希类型的key\n127.0.0.1:6379[2]\u0026gt; hset myhset1 kk1 vv1 kk2 vv2 kk3 vv3 (integer) 3 127.0.0.1:6379[2]\u0026gt; hgetall myhset1 1) \u0026#34;kk1\u0026#34; 2) \u0026#34;vv1\u0026#34; 3) \u0026#34;kk2\u0026#34; 4) \u0026#34;vv2\u0026#34; 5) \u0026#34;kk3\u0026#34; 6) \u0026#34;vv3\u0026#34; 127.0.0.1:6379[2]\u0026gt; hscan myhset1 0 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;kk1\u0026#34; 2) \u0026#34;vv1\u0026#34; 3) \u0026#34;kk2\u0026#34; 4) \u0026#34;vv2\u0026#34; 5) \u0026#34;kk3\u0026#34; 6) \u0026#34;vv3\u0026#34; 5. zscan zscan key cursor [MATCH pattern] [COUNT count]，sscan的第一个参数总是有序集合类型的key\n127.0.0.1:6379[2]\u0026gt; zadd myzadd1 1 zz1 2 zz2 3 zz3 (integer) 3 127.0.0.1:6379[2]\u0026gt; zrange myzadd1 0 -1 withscores 1) \u0026#34;zz1\u0026#34; 2) \u0026#34;1\u0026#34; 3) \u0026#34;zz2\u0026#34; 4) \u0026#34;2\u0026#34; 5) \u0026#34;zz3\u0026#34; 6) \u0026#34;3\u0026#34; 127.0.0.1:6379[2]\u0026gt; zscan myzadd1 0 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;zz1\u0026#34; 2) \u0026#34;1\u0026#34; 3) \u0026#34;zz2\u0026#34; 4) \u0026#34;2\u0026#34; 5) \u0026#34;zz3\u0026#34; 6) \u0026#34;3\u0026#34; ","permalink":"https://www.heiok.top/posts/tech/tech1/","summary":"\u003ch2 id=\"1-介绍\"\u003e1. 介绍\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003escan\u003c/code\u003e命令的作用和\u003ccode\u003ekeys *\u003c/code\u003e的作用类似，主要用于查找redis中的键，但是在正式的生产环境中一般不会直接使用\u003ccode\u003ekeys *\u003c/code\u003e这个命令，因为他会返回所有的键，如果键的数量很多会导致查询时间很长，进而导致服务器阻塞，所以需要scan来进行更细致的查找\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003escan\u003c/code\u003e总共有这几种命令：\u003ccode\u003escan\u003c/code\u003e、\u003ccode\u003esscan\u003c/code\u003e、\u003ccode\u003ehscan\u003c/code\u003e、\u003ccode\u003ezscan\u003c/code\u003e，分别用于迭代数据库中的：数据库中所有键、集合键、哈希键、有序集合键，命令具体结构如下：\u003c/p\u003e","title":"Redis scan命令学习"},{"content":"\u0026lt;div\u0026gt; 科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 科技代码 \u0026lt;/div\u0026gt; ","permalink":"https://www.heiok.top/posts/tech/tech/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026lt;\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    科技代码\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026lt;/\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Tech"}]