---
title: "å€ŸåŠ©nginxå®ç°åå‘ä»£ç†ï¼Œå¹¶é€šè¿‡SSLè¯ä¹¦å®ç°httpsè®¿é—®ä»¥åŠhttpè°ƒæ•´httpsè®¿é—®ã€‚"
date: 2026-01-08T16:37:49+08:00
lastmod: 2026-01-08T16:37:49+08:00
author: ["wait"]
keywords: 
- 
categories:  # æ²¡æœ‰åˆ†ç±»ç•Œé¢å¯ä»¥ä¸å¡«å†™
- 
tags: # æ ‡ç­¾
- tutorial
description: "å€ŸåŠ©nginxå®ç°åå‘ä»£ç†ï¼Œå¹¶é€šè¿‡SSLè¯ä¹¦å®ç°httpsè®¿é—®ä»¥åŠhttpè°ƒæ•´httpsè®¿é—®ã€‚"
weight:
slug: ""
draft: false # æ˜¯å¦ä¸ºè‰ç¨¿
comments: true # æœ¬é¡µé¢æ˜¯å¦æ˜¾ç¤ºè¯„è®º
reward: true # æ‰“èµ
mermaid: true #æ˜¯å¦å¼€å¯mermaid
showToc: true # æ˜¾ç¤ºç›®å½•
TocOpen: true # è‡ªåŠ¨å±•å¼€ç›®å½•
hidemeta: false # æ˜¯å¦éšè—æ–‡ç« çš„å…ƒä¿¡æ¯ï¼Œå¦‚å‘å¸ƒæ—¥æœŸã€ä½œè€…ç­‰
disableShare: true # åº•éƒ¨ä¸æ˜¾ç¤ºåˆ†äº«æ 
showbreadcrumbs: true #é¡¶éƒ¨æ˜¾ç¤ºè·¯å¾„
cover:
    image: "" #å›¾ç‰‡è·¯å¾„ä¾‹å¦‚ï¼šposts/tech/123/123.png
    zoom: # å›¾ç‰‡å¤§å°ï¼Œä¾‹å¦‚å¡«å†™ 50% è¡¨ç¤ºåŸå›¾åƒçš„ä¸€åŠå¤§å°
    caption: "" #å›¾ç‰‡åº•éƒ¨æè¿°
    alt: ""
    relative: false
---

<br />

#### ç›®å½•

- [{#\_1}å‰è¨€ {#content\_views}](#_1å‰è¨€-content_views)
- [{#nginx\_5}nginx](#nginx_5nginx)
  - [{#\_11}åå‘ä»£ç†](#_11åå‘ä»£ç†)
  - [{#\_24}ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç”¨åˆ°åå‘ä»£ç†ï¼Ÿ](#_24ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç”¨åˆ°åå‘ä»£ç†)
- [{#\_38}å¼€å§‹é…ç½®](#_38å¼€å§‹é…ç½®)
  - [{#\_39}è½¯ä»¶ç‰ˆæœ¬](#_39è½¯ä»¶ç‰ˆæœ¬)
  - [{#SSL\_45}ç”³è¯·SSLè¯ä¹¦](#ssl_45ç”³è¯·sslè¯ä¹¦)
  - [{#nginx\_53}é¦–å…ˆå®‰è£…nginx](#nginx_53é¦–å…ˆå®‰è£…nginx)
  - [{#crtkey\_57}ä¸Šä¼ .crtå’Œ.keyè¯ä¹¦](#crtkey_57ä¸Šä¼ crtå’Œkeyè¯ä¹¦)
  - [{#\_68}åˆ›å»ºé…ç½®æ–‡ä»¶](#_68åˆ›å»ºé…ç½®æ–‡ä»¶)
  - [{#nginx\_106}éªŒè¯é…ç½®æ–‡ä»¶å¹¶é‡å¯nginxæœåŠ¡](#nginx_106éªŒè¯é…ç½®æ–‡ä»¶å¹¶é‡å¯nginxæœåŠ¡)
- [{#\_120}æˆåŠŸ](#_120æˆåŠŸ)
- [{#\_123}è‹¥æœ‰å¸®åŠ©ï¼Œå¸Œæœ›å¯ä»¥ç‚¹èµæ”¶è—ğŸ˜ã€‚](#_123è‹¥æœ‰å¸®åŠ©å¸Œæœ›å¯ä»¥ç‚¹èµæ”¶è—)

<br />

{#_1}å‰è¨€ {#content_views}
------------------------

è¿™æ®µæ—¶é—´å€ŸåŠ©hexoç²—ç•¥çš„æ­å»ºäº†ä¸€ä¸ªè‡ªå·±çš„ä¸ªäººåšå®¢ï¼Œé€šè¿‡åŸŸåè®¿é—®æ—¶å‘ç°æµè§ˆå™¨ä¸€ç›´ä¸å®‰å…¨ï¼Œæœ€åå‘ç°æ˜¯å› ä¸ºä¸€ç›´é€šè¿‡çš„httpè®¿é—®ã€‚æƒ³ç€æ—¢ç„¶å¦‚æ­¤ä¸€æ­¥åˆ°ä½ï¼Œå®Œå–„æˆhttpsè®¿é—®æ–¹å¼ã€‚æ­£å·§è…¾è®¯äº‘åŸŸåç”³è¯·æŠ¥å¤‡åï¼Œ SSLè¯ä¹¦çš„ç”³è¯·å¾ˆå®¹æ˜“ï¼Œ æŸ¥é˜…äº†ä¸å°‘èµ„æ–™ï¼Œä½œä¸ºå°ç™½æœ€åä¹Ÿå®Œæˆäº†è¿™ä¸€ç›®æ ‡ã€‚ æ‰€ä»¥åœ¨è¿™é‡Œå°†è¸©è¿‡çš„å‘ï¼Œä»¥åŠç»éªŒæ­¥éª¤æ€»ç»“å¦‚ä¸‹ï¼Œæ¬¢è¿æŒ‡æ­£ğŸ˜€ã€‚  
é¦–å…ˆæˆ‘ä¼šç®€å•è§£é‡Šä¸€ä¸‹nginxã€ä»¥åŠåå‘ä»£ç†ã€‚

{#nginx_5}nginx
---------------

èƒ½æ‰¾åˆ°çš„å¤§å¤šæ•°èµ„æ–™éƒ½æ˜¯åŸºäº [nginx](https://zh.wikipedia.org/wiki/Nginx) å®ç°çš„ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ nginx å‘¢ï¼Ÿ
> Nginxï¼ˆå‘éŸ³åŒ"engine X"ï¼‰æ˜¯å¼‚æ­¥æ¡†æ¶çš„ç½‘é¡µæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œåå‘ä»£ç†ã€è´Ÿè½½å¹³è¡¡å™¨å’ŒHTTPç¼“å­˜ã€‚ *------æ‘˜è‡ªç»´åŸºç™¾ç§‘*

å¯¹äºä¸ç†Ÿæ‚‰webçš„äººï¼Œæˆ–è€…å°ç™½å¯ä»¥å°†å…¶çœ‹ä½œä¸€ç½‘é¡µæœåŠ¡å™¨å°±å¥½ï¼Œæˆ‘ä»¬è¿™é‡Œéœ€è¦ç”¨åˆ°çš„ä¸»è¦æœ‰**åå‘ä»£ç†**ã€‚

### {#_11}åå‘ä»£ç†

å€ŸåŠ©åœ¨çŸ¥ä¹ä¸Šæ‰¾åˆ°çš„ä¸€ä¸ªå›¾å¯ä»¥å¾ˆå¥½çš„è§£é‡Š  
![](https://img-blog.csdnimg.cn/20210123131143331.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNDU0NDAx,size_16,color_FFFFFF,t_70#pic_center)  
æ²¡çœ‹æ˜ç™½ï¼Ÿæ²¡äº‹ï¼Œæ¥ç‚¹å½¢è±¡çš„æ —å­ğŸ˜  
æ­£å‘ä»£ç†ï¼š
> å‡å¦‚ä½ ä»¬å®¿èˆåªæœ‰ä¸€ä½åŒå­¦å¯ä»¥ç”¨æ‰‹æœºä¸Šç½‘è´­ç‰©ï¼Œä½ ä»¬æœ‰è´­ç‰©çš„éœ€æ±‚éƒ½éœ€è¦å€ŸåŠ©è¿™ä½åŒå­¦æ¥å®ç°ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ€ç»ˆä½ ä»¬éƒ½å¯ä»¥è¾¾åˆ°åœ¨ç”µå•†å¹³å°è´­ç‰©çš„ç›®çš„ï¼Œä½†å¯¹äºç”µå•†å¹³å°æˆ–è€…è¯´åº—å®¶æ¥è¯´ï¼Œ**ä»–å¹¶ä¸çŸ¥é“åˆ°åº•æ˜¯è°è´­ä¹°äº†äº§å“**ã€‚

åœ¨å®¿èˆè¿™å¯çœ‹ä½œä¸€ä¸ªå°çš„LANï¼Œé‚£ä½å¯ä»¥ç”¨æ‰‹æœºä¸Šç½‘çš„åŒå­¦åˆ™å……å½“äº†**æ­£å‘ä»£ç†** çš„ä½œç”¨ï¼Œå³æˆ‘ä»¬ä¸€èˆ¬æ„ä¹‰ä¸Šçš„**ä»£ç†** ã€‚  
åå‘ä»£ç†ï¼š
> æ¢ä¸ªæ —å­ï¼Œä½ ä»¬ç¤¾å›¢éœ€è¦ä¹°ä¸€äº›åŠå…¬ç”¨å“ä»¥åŠæ´»åŠ¨ç”¨å“ï¼Œäº¤ç”±ä¸€ä¸ªåŒå­¦å¤–å‡ºé‡‡è´­ï¼Œå› ä¸ºä»–æœ‰é™„è¿‘æ‰€æœ‰å•†å®¶çš„è”ç³»æ–¹å¼ã€‚ä½ ä»¬å°†éœ€è¦è´­ä¹°çš„ç”¨å“å‘Šè¯‰é‚£ä¸ªåŒå­¦åï¼Œé‚£ä¸ªåŒå­¦å¤–å‡ºé‡‡è´­ï¼Œå†å¸¦å›æ¥ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ä»¬åªæäº¤äº†éœ€æ±‚ï¼Œäº¤ç”±é‚£ä¸ªåŒå­¦å»å®Œæˆï¼Œ**è€Œæœ€ç»ˆæ¯ä¸€ä¸ªç‰©å“åœ¨å®é™…åœ¨å“ªå®¶åº—è´­ä¹°ï¼Œä½ ä»¬å¹¶ä¸çŸ¥æ™“ã€‚**

åœ¨ä¸Šé¢è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé‚£ä½ åŒå­¦ä¾¿ æ‰®æ¼”äº†**åå‘ä»£ç†**çš„è§’è‰²ã€‚

### {#_24}ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç”¨åˆ°åå‘ä»£ç†ï¼Ÿ

> 1ã€ä¿æŠ¤æœåŠ¡å®‰å…¨  
> éšè—æœåŠ¡èŠ‚ç‚¹çš„IPï¼›  
> å°†æœåŠ¡èŠ‚ç‚¹ç½®äºé˜²ç«å¢™ä¹‹åï¼Œé¿å…ç›´æ¥æ”»å‡»ä¸šåŠ¡èŠ‚ç‚¹æœåŠ¡å™¨ã€‚  
> 2ã€æœåŠ¡èŠ‚ç‚¹æ›´ä¸“æ³¨äºä¸šåŠ¡ï¼ŒåŒæ—¶æå‡æ€§èƒ½  
> ç”±äºæœ‰åå‘ä»£ç†çš„å­˜åœ¨ï¼Œå¯ä»¥è®©åå‘ä»£ç†æœåŠ¡å™¨å»å®ç°æ¯”å¦‚httpsã€gzipå‹ç¼©ç­‰ä¸ä¸šåŠ¡æ— å…³çš„åŠŸèƒ½ï¼›  
> æä¾›åŠ¨é™æ€åˆ†ç¦»ï¼Œå°†é™æ€æ–‡ä»¶å‘å¾€é™æ€æœåŠ¡å™¨æˆ–æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œé¿å…ä¸šåŠ¡èŠ‚ç‚¹å¤„ç†è¿™äº›ä¸ä¸šåŠ¡æ— å…³çš„è¯·æ±‚ï¼›  
> æä¾›ç¼“å­˜æœºåˆ¶ï¼Œå°†ä¸€äº›çŸ­æ—¶é—´å†…ä¸ä¼šå˜åŒ–çš„åŠ¨æ€å†…å®¹ï¼Œåœ¨åå‘ä»£ç†æœåŠ¡å™¨è¿™å±‚å¢åŠ ç¼“å­˜ï¼Œé™ä½ä¸šåŠ¡æœåŠ¡å™¨çš„è¯·æ±‚é‡ï¼›  
> ç”±äºæ§åˆ¶æƒåœ¨ä»£ç†æœåŠ¡è¿™è¾¹ï¼Œå®Œå…¨å¯ä»¥æ ¹æ®æœåŠ¡èŠ‚ç‚¹çš„æ€§èƒ½åŠ¨æ€åˆ†é…è¯·æ±‚ï¼Œåšåˆ°æœåŠ¡èŠ‚ç‚¹æ€§èƒ½æœ€ä½³ã€‚  
> æ­£æ˜¯ç”±äºNgxinå¼•å…¥äº†åå‘ä»£ç†çš„ç‰¹æ€§ï¼Œè®©è¯·æ±‚å’Œå“åº”éƒ½è¦ç»è¿‡Nginxï¼Œå› æ­¤ç»™Nginxå¸¦æ¥äº†éå¸¸å¤šçš„å¯èƒ½ã€‚æ¯”å¦‚è´Ÿè½½å‡è¡¡ã€HTTPç¼“å­˜ç­‰ã€‚

ä»¥ä¸Šå†…å®¹æ¥è‡ªï¼š[phpä¸­æ–‡ç½‘](https://www.php.cn/nginx/457309.html)  
è¯´å›å®é™…ï¼Œå› ä¸º hexo æœåŠ¡é»˜è®¤å¼€å¯ç«¯å£æ˜¯4000ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åå‘ä»£ç†å°† https æˆ–è€… http æŒ‡å‘4000ç«¯å£ã€‚

{#_38}å¼€å§‹é…ç½®
----------

### {#_39}è½¯ä»¶ç‰ˆæœ¬

|   è½¯ä»¶   |       ç‰ˆæœ¬       |
|--------|----------------|
| ubuntu | 18.04.5        |
| nginx  | 1.14.0(Ubuntu) |

æ³¨æ„ç”±äºnginxç‰ˆæœ¬ä¸åŒï¼Œé…ç½®å¯èƒ½ä¸åŒ

### {#SSL_45}ç”³è¯·SSLè¯ä¹¦

é…ç½®httpsæœåŠ¡ï¼Œå¿…é¡»å¾—æœ‰SSLè¯ä¹¦ã€‚åœ¨æŸæŸäº‘ç”³è¯·çš„åŸŸåã€äº‘æœåŠ¡å™¨ï¼Œéƒ½å¯ä»¥åœ¨å¯¹åº”çš„å¹³å°ç”³è¯·SSL è¯ä¹¦ï¼Œå¾ˆå®¹æ˜“ä¸”å¿«é€Ÿã€‚
> åœ¨è…¾è®¯äº‘å®˜ç½‘è´­ä¹°çš„äº‘æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥ç™»å½• äº‘æœåŠ¡å™¨æ§åˆ¶å° è·å–æœåŠ¡å™¨ IP åœ°å€ã€ç”¨æˆ·ååŠå¯†ç ã€‚

ç”³è¯·ä¸‹SSLè¯ä¹¦ï¼Œå°†å…¶ä¸‹è½½è§£å‹åï¼Œä¼šå‘ç°æœ‰Nginxæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€é‡Œé¢çš„.crtå’Œ.keyæ–‡ä»¶å³åˆ†åˆ«æ˜¯ä½ çš„è¯ä¹¦å’Œå¯†é’¥ã€‚  
![](https://img-blog.csdnimg.cn/20210123142553394.png#pic_center)

### {#nginx_53}é¦–å…ˆå®‰è£…nginx

```prism language-d
sudo apt install nginx
```

### {#crtkey_57}ä¸Šä¼ .crtå’Œ.keyè¯ä¹¦

å®‰è£…å¥½çš„ nginx åœ¨ /etc/nginx ç›®å½•ä¸‹ï¼Œåœ¨æ­¤ç›®å½•æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªsslçš„ç›®å½•ç”¨æ¥å­˜å‚¨è¯ä¹¦ã€‚

```prism language-d
cd /etc/nginx
sudo mkdir ssl
```

å†é€šè¿‡ftpæˆ–è€…sshå°†è¯ä¹¦çš„.crtå’Œ.keyæ–‡ä»¶ä¸Šä¼ åˆ° ssl è¿™ä¸ªç›®å½•ä¸‹ã€‚  
æ•…è¿™æ ·ä½ çš„  
è¯ä¹¦è·¯å¾„å°±æ˜¯ /etc/nginx/ssl/1_xxxxxxx.xxx.crt  
å¯†é’¥è·¯å¾„ï¼š/etc/nginx/ssl/2_xxxxxxxx.xxx.key

### {#_68}åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨ /etc/nginx/conf.d ç›®å½•ä¸‹ï¼Œåˆ›å»º yoursite.conf æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š  
ä»¥ä¸‹é…ç½®å‚è€ƒè‡ªè…¾è®¯äº‘æ–‡æ¡£ä¸­å¿ƒ

```prism language-d
server {
    #SSL è®¿é—®ç«¯å£å·ä¸º 443
    listen 443 ssl; 
 #å¡«å†™ç»‘å®šè¯ä¹¦çš„åŸŸå
    server_name your_domain_name; 
 #è¯ä¹¦æ–‡ä»¶åç§°			å³.crtæ–‡ä»¶è·¯å¾„
    ssl_certificate /etc/nginx/ssl/1_xxxxxxx.xxx.crt;
 #ç§é’¥æ–‡ä»¶åç§°			å³.keyæ–‡ä»¶è·¯å¾„
    ssl_certificate_key /etc/nginx/ssl/2_xxxxxxxx.xxx.key; 
    ssl_session_timeout 5m;
 #è¯·æŒ‰ç…§ä»¥ä¸‹åè®®é…ç½®
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; 
 #è¯·æŒ‰ç…§ä»¥ä¸‹å¥—ä»¶é…ç½®ï¼Œé…ç½®åŠ å¯†å¥—ä»¶ï¼Œå†™æ³•éµå¾ª openssl æ ‡å‡†ã€‚
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; 
    ssl_prefer_server_ciphers on;
    location / {
    #ç½‘ç«™ä¸»é¡µè·¯å¾„ã€‚æ­¤è·¯å¾„ä»…ä¾›å‚è€ƒï¼Œå…·ä½“è¯·æ‚¨æŒ‰ç…§å®é™…ç›®å½•æ“ä½œã€‚
        root html; 
        index  index.html index.htm;
        #é…ç½®ä»£ç†  å› ä¸ºhexoé»˜è®¤ç«¯å£ä¸º4000ï¼Œæ•…ä½¿å…¶æŒ‡å‘
        proxy_pass http://localhost:4000;
    }
}
server {
listen 80;
#å¡«å†™ç»‘å®šè¯ä¹¦çš„åŸŸå
server_name your_domain_name; 
#æŠŠhttpçš„åŸŸåè¯·æ±‚è½¬æˆhttps
return 301 https://$host$request_uri; 
}
```

å®Œæˆåï¼Œä¿å­˜å¹¶é€€å‡ºã€‚  
ç¬¬ä¸€ä¸ª server æ˜¯é…ç½®443ç«¯å£çš„httpsæœåŠ¡ï¼Œç¬¬äºŒä¸ªserver æ˜¯ä½¿httpè‡ªåŠ¨è·³è½¬åˆ°Httpsçš„å®‰å…¨é…ç½®ã€‚

### {#nginx_106}éªŒè¯é…ç½®æ–‡ä»¶å¹¶é‡å¯nginxæœåŠ¡

åœ¨nginxæ ¹ç›®å½•ä¸‹ï¼Œé€šè¿‡æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤éªŒè¯é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®

```prism language-d
sudo nginx -t
```

æ˜¾ç¤ºokå’Œsuccessfulåˆ™ä»£è¡¨æˆåŠŸã€‚  
é‡å¯nginxæœåŠ¡

```prism language-d
sudo systemctl restart nginx
```

æ£€æŸ¥nginxçŠ¶æ€

```prism language-bash
systemctl status nginx
```

{#_120}æˆåŠŸ
---------

åˆ°è¿™é‡Œä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œåˆ™ä»£è¡¨ä½ çš„é…ç½®æˆåŠŸäº†ï¼Œç°åœ¨å·²ç»å¯ä»¥é€šè¿‡Httpsè®¿é—®ä½ çš„ç½‘ç«™ï¼Œæµè§ˆå™¨ä¸ä¼šå†æ˜¾ç¤ºä¸å®‰å…¨ğŸ˜ã€‚  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20210123145524725.png#pic_center)

{#_123}è‹¥æœ‰å¸®åŠ©ï¼Œå¸Œæœ›å¯ä»¥ç‚¹èµæ”¶è—ğŸ˜ã€‚
-----------------------


